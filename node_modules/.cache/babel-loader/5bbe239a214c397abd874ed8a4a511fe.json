{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Modal,Button,Icon,Image}from'semantic-ui-react';import firebase from'firebase/compat/app';import'firebase/compat/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ProfileModal=/*#__PURE__*/function(_React$Component){_inherits(ProfileModal,_React$Component);var _super=_createSuper(ProfileModal);function ProfileModal(){var _this;_classCallCheck(this,ProfileModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={resetDisabled:false};_this.onSignOut=function(){firebase.auth().signOut();window.location.reload();};_this.resetPassword=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;if(!_this.props.user.email){_context.next=5;break;}_context.next=4;return firebase.auth().sendPasswordResetEmail(_this.props.user.email);case 4:_this.setState({resetDisabled:true});case 5:_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](0);console.warn(_context.t0);case 10:case\"end\":return _context.stop();}}},_callee,null,[[0,7]]);}));return _this;}_createClass(ProfileModal,[{key:\"render\",value:function render(){var _this$props=this.props,close=_this$props.close,userImage=_this$props.userImage;return/*#__PURE__*/_jsxs(Modal,{open:true,onClose:close,children:[/*#__PURE__*/_jsxs(Modal.Header,{children:[/*#__PURE__*/_jsx(Image,{avatar:true,src:userImage}),this.props.user.email]}),/*#__PURE__*/_jsx(Modal.Content,{children:/*#__PURE__*/_jsxs(\"div\",{style:{width:'300px',display:'flex',alignItems:'center',flexDirection:'column',gap:'10px'},children:[/*#__PURE__*/_jsxs(Button,{icon:true,labelPosition:\"left\",fluid:true,href:\"https://gravatar.com\",target:\"_blank\",color:\"blue\",children:[/*#__PURE__*/_jsx(Icon,{name:\"image\"}),\"Edit Gravatar\"]}),/*#__PURE__*/_jsxs(Button,{disabled:this.state.resetDisabled,icon:true,labelPosition:\"left\",fluid:true,color:\"green\",onClick:this.resetPassword,children:[/*#__PURE__*/_jsx(Icon,{name:\"key\"}),\"Reset Password\"]}),/*#__PURE__*/_jsxs(Button,{icon:true,labelPosition:\"left\",onClick:this.onSignOut,color:\"red\",fluid:true,children:[/*#__PURE__*/_jsx(Icon,{name:\"sign out\"}),\"Sign out\"]})]})})]});}}]);return ProfileModal;}(React.Component);","map":{"version":3,"sources":["/home/runner/work/watchparty/watchparty/src/components/Modal/ProfileModal.tsx"],"names":["React","Modal","Button","Icon","Image","firebase","ProfileModal","state","resetDisabled","onSignOut","auth","signOut","window","location","reload","resetPassword","props","user","email","sendPasswordResetEmail","setState","console","warn","close","userImage","width","display","alignItems","flexDirection","gap","Component"],"mappings":"i6BAAA,MAAOA,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,KAAT,CAAgBC,MAAhB,CAAwBC,IAAxB,CAA8BC,KAA9B,KAA2C,mBAA3C,CACA,MAAOC,CAAAA,QAAP,KAAqB,qBAArB,CACA,MAAO,sBAAP,C,wFAEA,UAAaC,CAAAA,YAAb,+VAKSC,KALT,CAKiB,CAAEC,aAAa,CAAE,KAAjB,CALjB,OAOEC,SAPF,CAOc,UAAM,CAChBJ,QAAQ,CAACK,IAAT,GAAgBC,OAAhB,GACAC,MAAM,CAACC,QAAP,CAAgBC,MAAhB,GACD,CAVH,OAYEC,aAZF,sEAYkB,uJAER,MAAKC,KAAL,CAAWC,IAAX,CAAgBC,KAFR,+CAGJb,CAAAA,QAAQ,CAACK,IAAT,GAAgBS,sBAAhB,CAAuC,MAAKH,KAAL,CAAWC,IAAX,CAAgBC,KAAvD,CAHI,QAIV,MAAKE,QAAL,CAAc,CAAEZ,aAAa,CAAE,IAAjB,CAAd,EAJU,sFAOZa,OAAO,CAACC,IAAR,cAPY,oEAZlB,gEAuBE,iBAAS,CACP,gBAA6B,KAAKN,KAAlC,CAAQO,KAAR,aAAQA,KAAR,CAAeC,SAAf,aAAeA,SAAf,CACA,mBACE,MAAC,KAAD,EAAO,IAAI,CAAE,IAAb,CAAmB,OAAO,CAAED,KAA5B,wBACE,MAAC,KAAD,CAAO,MAAP,yBACE,KAAC,KAAD,EAAO,MAAM,KAAb,CAAc,GAAG,CAAEC,SAAnB,EADF,CAEG,KAAKR,KAAL,CAAWC,IAAX,CAAgBC,KAFnB,GADF,cAKE,KAAC,KAAD,CAAO,OAAP,wBACE,aACE,KAAK,CAAE,CACLO,KAAK,CAAE,OADF,CAELC,OAAO,CAAE,MAFJ,CAGLC,UAAU,CAAE,QAHP,CAILC,aAAa,CAAE,QAJV,CAKLC,GAAG,CAAE,MALA,CADT,wBASE,MAAC,MAAD,EACE,IAAI,KADN,CAEE,aAAa,CAAC,MAFhB,CAGE,KAAK,KAHP,CAIE,IAAI,CAAC,sBAJP,CAKE,MAAM,CAAC,QALT,CAME,KAAK,CAAC,MANR,wBAQE,KAAC,IAAD,EAAM,IAAI,CAAC,OAAX,EARF,mBATF,cAoBE,MAAC,MAAD,EACE,QAAQ,CAAE,KAAKtB,KAAL,CAAWC,aADvB,CAEE,IAAI,KAFN,CAGE,aAAa,CAAC,MAHhB,CAIE,KAAK,KAJP,CAKE,KAAK,CAAC,OALR,CAME,OAAO,CAAE,KAAKO,aANhB,wBAQE,KAAC,IAAD,EAAM,IAAI,CAAC,KAAX,EARF,oBApBF,cA+BE,MAAC,MAAD,EACE,IAAI,KADN,CAEE,aAAa,CAAC,MAFhB,CAGE,OAAO,CAAE,KAAKN,SAHhB,CAIE,KAAK,CAAC,KAJR,CAKE,KAAK,KALP,wBAOE,KAAC,IAAD,EAAM,IAAI,CAAC,UAAX,EAPF,cA/BF,GADF,EALF,GADF,CAoDD,CA7EH,0BAAkCT,KAAK,CAAC8B,SAAxC","sourcesContent":["import React from 'react';\nimport { Modal, Button, Icon, Image } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nexport class ProfileModal extends React.Component<{\n  close: Function;\n  user: firebase.User;\n  userImage: string | null;\n}> {\n  public state = { resetDisabled: false };\n\n  onSignOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  resetPassword = async () => {\n    try {\n      if (this.props.user.email) {\n        await firebase.auth().sendPasswordResetEmail(this.props.user.email);\n        this.setState({ resetDisabled: true });\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\n  render() {\n    const { close, userImage } = this.props;\n    return (\n      <Modal open={true} onClose={close as any}>\n        <Modal.Header>\n          <Image avatar src={userImage} />\n          {this.props.user.email}\n        </Modal.Header>\n        <Modal.Content>\n          <div\n            style={{\n              width: '300px',\n              display: 'flex',\n              alignItems: 'center',\n              flexDirection: 'column',\n              gap: '10px',\n            }}\n          >\n            <Button\n              icon\n              labelPosition=\"left\"\n              fluid\n              href=\"https://gravatar.com\"\n              target=\"_blank\"\n              color=\"blue\"\n            >\n              <Icon name=\"image\" />\n              Edit Gravatar\n            </Button>\n            <Button\n              disabled={this.state.resetDisabled}\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"green\"\n              onClick={this.resetPassword}\n            >\n              <Icon name=\"key\" />\n              Reset Password\n            </Button>\n            <Button\n              icon\n              labelPosition=\"left\"\n              onClick={this.onSignOut}\n              color=\"red\"\n              fluid\n            >\n              <Icon name=\"sign out\" />\n              Sign out\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}