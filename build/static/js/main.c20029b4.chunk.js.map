{"version":3,"sources":["utils/index.ts","utils/generateName.ts","components/UserMenu/UserMenu.tsx","components/Chat/Chat.tsx","components/Modal/LoginModal.tsx","components/Modal/SubscribeModal.tsx","components/SubscribeButton/SubscribeButton.tsx","components/Modal/ProfileModal.tsx","components/TopBar/TopBar.tsx","components/VBrowser/data.ts","components/VBrowser/events.ts","components/VBrowser/base.ts","components/VBrowser/VBrowser.tsx","components/VBrowser/index.ts","components/VideoChat/VideoChat.tsx","components/Settings/LocalSettings.tsx","components/Modal/MultiStreamModal.tsx","utils/examples.ts","components/Playlist/ChatVideoCard.tsx","components/ComboBox/ComboBox.tsx","components/SearchResult/SearchResult.tsx","components/SearchComponent/SearchComponent.tsx","components/Controls/Controls.tsx","components/Modal/VBrowserModal.tsx","components/Modal/PermanentRoomModal.tsx","components/Settings/SettingsTab.tsx","components/Modal/ErrorModal.tsx","components/Modal/PasswordModal.tsx","components/Modal/ScreenShareModal.tsx","components/Modal/FileShareModal.tsx","components/App/App.tsx","components/Home/Home.tsx","components/PrivacyTerms/PrivacyTerms.tsx","components/Footer/Footer.tsx","serviceWorker.js","index.tsx","components/Home/Home.module.css","components/Playlist/ChatVideoCard.module.css"],"names":["formatTimestamp","input","undefined","Number","isNaN","Infinity","hours","Math","floor","minutes","toString","padStart","seconds","formatSpeed","toFixed","colorMappings","red","orange","yellow","olive","green","teal","blue","violet","purple","pink","brown","grey","black","colorCache","getColorForStringHex","id","colors","abs","hash","i","length","charCodeAt","hashString","getColorForString","getMediaType","startsWith","testAutoplay","a","canAutoplay","video","result","decodeEntities","DOMParser","parseFromString","documentElement","textContent","debounce","func","wait","immediate","timeout","context","this","args","arguments","later","apply","callNow","clearTimeout","setTimeout","getMediaPathForList","list","match","name","decoded","decodeURIComponent","getDefaultPicture","background","isMobile","window","screen","width","iceServers","urls","username","credential","serverPath","process","REACT_APP_SERVER_HOST","location","protocol","host","getMediaPathResults","mediaPath","query","fetch","response","results","includes","text","xml","parseStringPromise","data","filtered","ListBucketResult","Contents","filter","file","Key","map","url","json","type","option","toLowerCase","getStreamPathResults","streamPath","encodeURIComponent","getYouTubeResults","openFileSelector","accept","Promise","resolve","inputElement","document","createElement","addEventListener","files","dispatchEvent","MouseEvent","getAndSaveClientId","clientId","localStorage","getItem","uuidv4","setItem","calculateMedian","array","sort","b","getUserImage","user","email","md5","gravatar","ok","photoURL","capFirst","string","charAt","toUpperCase","slice","getRandomInt","min","max","random","generateName","name1","name2","UserMenu","socket","userToManage","trigger","displayName","position","disabled","useState","isOpen","setIsOpen","Popup","className","on","open","onOpen","onClose","Button","content","negative","icon","onClick","getIdToken","token","emit","userToBeKicked","uid","Chat","state","chatMsg","isNearBottom","isPickerOpen","messagesRef","React","createRef","updateChatMsg","_e","setState","value","sendChatMsg","chatTooLong","props","Boolean","onScroll","isChatNearBottom","current","scrollHeight","scrollTop","offsetHeight","scrollToBottom","formatMessage","cmd","msg","Fragment","style","textTransform","getMediaDisplayName","addEmoji","emoji","native","prevProps","scrollTimestamp","hide","display","flexDirection","flexGrow","minHeight","marginTop","marginBottom","padding","ref","Comment","Group","chat","message","pictureMap","nameMap","owner","timestamp","size","bottom","margin","PickerMenu","closeMenu","Input","inverted","fluid","onKeyPress","e","key","onChange","error","isChatDisabled","placeholder","Icon","circular","link","opacity","role","Component","ChatMessage","system","Avatar","src","Content","Author","as","Metadata","Date","toLocaleTimeString","Text","PickerMenuInner","handleClickOutside","set","sheetSize","theme","showPreview","showSkinTones","onSelect","onClickOutside","LoginModal","password","isCreateMode","resetPassword","firebase","auth","sendPasswordResetEmail","closeLogin","emailSignIn","signInWithEmailAndPassword","createAccount","createUserWithEmailAndPassword","emailLinkSignIn","sendSignInLinkToEmail","href","handleCodeInApp","Modal","Header","Message","color","header","Form","Field","target","stripePromise","loadStripe","SubscribeModal","onSubscribe","console","warn","stripe","redirectToCheckout","lineItems","price","quantity","mode","successUrl","cancelUrl","customerEmail","clientReferenceId","isSubscriber","closeSubscribe","image","Description","Table","definition","unstackable","striped","celled","Row","HeaderCell","Body","Cell","textAlign","labelPosition","SubscribeButton","isCustomer","isSubscribeModalOpen","setIsSubscribeModalOpen","onManage","useCallback","JSON","return_url","stringify","method","headers","body","resp","session","log","assign","ProfileModal","resetDisabled","onSignOut","signOut","reload","close","userImage","Image","avatar","alignItems","gap","NewRoomButton","createRoom","openNewTab","SignInButton","isLoginOpen","isProfileOpen","facebookSignIn","provider","FacebookAuthProvider","signInWithPopup","googleSignIn","GoogleAuthProvider","cursor","basic","Dropdown","height","labeled","button","Menu","Item","ListRoomsButton","rooms","refreshRooms","axios","get","deleteRoom","roomId","delete","room","scrolling","vanity","replace","marginLeft","paddingLeft","stopPropagation","nativeEvent","stopImmediatePropagation","TopBar","subscribeButton","flexWrap","paddingBottom","marginRight","borderRadius","backgroundColor","top","fontWeight","fontSize","lineHeight","rel","title","hideNewRoom","hideMyRooms","hideSignin","OPCODE","EVENT","DISCONNECT","ANSWER","PROVIDE","LOCKED","RELEASE","REQUEST","REQUESTING","CLIPBOARD","GIVE","CONFIGURATIONS","RESOLUTION","SET","BAN","KICK","LOCK","UNLOCK","MUTE","UNMUTE","CONTROL","BaseClient","_ws","_peer","_channel","_timeout","_displayname","_state","_id","RTCPeerConnection","prototype","addTransceiver","readyState","WebSocket","OPEN","peerConnected","socketOpen","displayname","supported","Error","onmessage","onMessage","bind","onerror","event","onError","onclose","onDisconnected","onTimeout","err","connected","buffer","payload","ArrayBuffer","DataView","setUint8","setUint16","x","y","setInt16","send","sdp","lite","servers","onconnectionstatechange","connectionState","onsignalingstatechange","signalingState","oniceconnectionstatechange","iceConnectionState","onConnected","ontrack","onTrack","direction","createDataChannel","onData","setRemoteDescription","createAnswer","then","d","setLocalDescription","catch","parse","ice","createPeer","track","kind","streams","label","reason","disconnect","EventEmitter","VBrowser","focused","fullscreen","activeKeys","Set","controlling","scroll","scroll_invert","rate","keepAliveInterval","_container","_overlay","_video","$client","NekoClient","takeControl","sendMessage","once","changeResolution","resString","split","onFocus","navigator","clipboard","readText","onBlur","forEach","sendData","preventDefault","onContextMenu","onMousePos","w","h","rect","getBoundingClientRect","round","clientX","left","clientY","onWheel","deltaX","deltaY","onMouseDown","onMouseUp","onMouseMove","onMouseEnter","focus","onMouseLeave","blur","getCode","keyCode","onKeyDown","add","onKeyUp","onResize","setInterval","login","setResolution","stream","getElementById","srcObject","getTracks","audio","MediaStream","play","doPlay","onClipboardChanged","hostname","passive","resolution","clearInterval","removeAllListeners","logout","writeText","justifyContent","playsInline","tabIndex","clientWidth","clientHeight","scrollbarWidth","connect","configurations","VideoChat","ourStream","videoRefs","videoPCs","handleSignal","from","pc","addIceCandidate","RTCIceCandidate","RTCSessionDescription","answer","sendSignal","localDescription","setupWebRTC","canvas","Object","getContext","fillRect","captureStream","getVideoTracks","enabled","mediaDevices","getUserMedia","stopWebRTC","stop","keys","toggleVideoWebRTC","forceUpdate","getVideoWebRTC","toggleAudioWebRTC","getAudioTracks","getAudioWebRTC","updateWebRTC","participants","isVideoChat","addTrack","onicecandidate","candidate","onnegotiationneeded","createOffer","offer","to","off","rosterUpdateTS","tsMap","videoChatContentStyle","objectFit","overflow","p","right","visibility","el","transform","autoPlay","muted","alt","backdropFilter","textOverflow","whiteSpace","getCurrentSettings","setting","settings","validateSettingsString","settingObject","updateSettings","newSetting","MultiStreamModal","setMedia","resetMultiSelect","closeIcon","Loader","List","toLocaleString","examples","duration","ChatVideoCard","index","controls","onPlay","onPlayNext","onRemove","onSetMedia","onPlaylistAdd","isYoutube","handlePlayClick","handlePlayNextClick","handleRemoveClick","classes","Card","Wrapper","ThumbnailWrapper","DurationLabel","img","Thumbnail","Title","ChannelName","channel","Controls","ButtonGroup","ComboBox","inputMedia","loading","lastResultTimestamp","debounced","setMediaAndClose","doSearch","persist","items","playlistAdd","currentMedia","select","playlist","item","maxWidth","playlistDelete","playlistMove","vertical","maxHeight","zIndex","YouTubeSearchResult","MediaPathSearchResult","StreamPathSearchResult","launchMultiSelect","magnet","metadata","multiStreamSelection","localeCompare","Label","empty","seeders","SearchComponent","resetDropdown","search","onSearchChange","showTimestamp","currTimestamp","posTimestamp","onMouseOver","onMouseOut","pct","togglePlay","onSeek","fullScreen","toggleMute","toggleSubtitle","jumpToLeader","paused","subtitled","currentTime","leaderTime","isPauseDisabled","isBehind","Progress","minWidth","total","pointerEvents","pointing","getVolume","step","setVolume","VBrowserModal","isVMPoolFull","US","closeModal","startVBrowser","LaunchButton","withGoogleReCaptcha","googleReCaptchaProps","large","executeRecaptcha","rcToken","vmPoolFullMessage","reCaptchaKey","useRecaptchaNet","PermanentRoomModal","SettingsTab","roomLock","setRoomLock","setVanity","roomLink","setPassword","setIsChatDisabled","clearChat","updateTS","setUpdateTS","permModalOpen","setPermModalOpen","validVanity","setValidVanity","validVanityLoading","setValidVanityLoading","adminSettingsChanged","setAdminSettingsChanged","setRoomState","setRoomOwner","checkValidVanity","lockDisabled","permanentDisabled","description","checked","helpIcon","undo","subOnly","origin","action","primary","disableChatSound","SettingRow","Divider","horizontal","Radio","toggle","ErrorModal","PasswordModal","savedPasswords","ScreenShareModal","startScreenShare","FileShareModal","startFileShare","App","currentMediaPaused","currentSubtitle","myName","myPicture","controlsTimestamp","watchOptions","isScreenSharing","isScreenSharingFile","isVBrowser","isYouTubeReady","isAutoPlayable","downloaded","speed","connections","isErrorAuth","vBrowserResolution","isVBrowserLarge","nonPlayableMedia","currentTab","querystring","substring","tab","isVBrowserModalOpen","isScreenShareModalOpen","isFileShareModalOpen","controller","errorMessage","successMessage","showRightBar","watchPartyYTPlayer","ytDebounce","screenShareStream","screenHostPC","screenSharePC","progressUpdater","heartbeat","getRoomLink","handleRoomState","setOwner","setRoomLink","history","replaceState","loadSettings","customSettingsData","customSettings","loadSignInData","firstName","updateName","updatePicture","updateUid","loadYouTube","tag","append","onYouTubeIframeAPIReady","ytPlayer","YT","Player","events","onReady","isYouTube","onStateChange","PlayerState","CUED","ENDED","onVideoEnded","PLAYING","PAUSED","doPause","init","join","savedPasswordsString","shard","test","exec","io","transports","userName","success","doSeek","isSubtitled","isScreenShare","stopScreenShare","isFileShare","stopVBrowser","subtitle","getVBrowserHost","setLoadingFalse","leftVideo","pause","stopVideo","doSrc","videoTS","visibilityState","Audio","push","syncSubtitle","updateScreenShare","sharer","_sdp","line","trim","sendSignalSS","getCurrentTime","setupFileShare","URL","createObjectURL","onaddtrack","onended","setupScreenShare","getDisplayMedia","logicalSurface","autoGainControl","channelCount","echoCancellation","latency","noiseSuppression","sampleRate","sampleSize","values","find","options","changeController","setSubtitle","reader","FileReader","subData","readAsText","isVideo","isHttp","getVBrowserPass","getDuration","isPaused","ended","getPlayerState","isMuted","textTracks","getOption","languageCode","maxTS","getLeaderTime","time","innerHTML","videoId","altVideoId","cueVideoById","lv","canPlayType","hls","Hls","loadSource","attachMedia","setMute","playVideo","pauseVideo","seekTo","shouldPlay","onFullScreenChange","fullscreenElement","onKeydown","activeElement","tagName","bVideoOnly","container","requestFullscreen","webkitEnterFullScreen","webkitEnterFullscreen","bChangeElements","exitFullscreen","mute","unMute","volume","loadSubtitles","subtitleSrc","subtitlePath","lastIndexOf","getFileName","arrayBuffer","toWebVTT","Blob","srclang","appendChild","offset","cues","cue","origStart","startTime","origEnd","endTime","setOption","tracks","toIndex","magnetUrl","torrent","decode","locked","haveLock","val","fileIndex","searchParams","onfullscreenchange","onkeydown","removeEventListener","displayRightContent","rightBar","Grid","Column","widths","active","positive","stackable","clearable","selection","Dimmer","allowFullScreen","frameBorder","allow","onEnded","Separator","flexShrink","Home","styles","heroText","subText","featureSection","Step","Feature","flex","fitted","featureTitle","featureText","Hero","hero","heroInner","mdStyle","Privacy","Terms","FAQ","Footer","Debug","lazy","firebaseConfig","initializeApp","WatchParty","onAuthStateChanged","StrictMode","path","exact","render","params","fallback","ReactDOM","serviceWorker","ready","registration","unregister","module","exports"],"mappings":"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AAKC,MAAQC,IAAIF,EAAKC,OAAS,IACxCD,EAAKC,MALJ,uBAMGE,EANH,0CAMiD1G,EANjD,yBAOoByC,OAAOgB,MAAMiD,GAPjC,kBAQUC,GARV,yCASMD,GATN,WAYDH,EAAKK,SAZJ,0CAaIL,EAAKK,SAAW,yBAbpB,2EAeqC5G,EAfrC,8D,4fCxUP,SAAS6G,EAASC,GAChB,OAAOA,EAAOC,OAAO,GAAGC,cAAgBF,EAAOG,MAAM,GAGvD,SAASC,EAAaC,EAAaC,GACjC,OAAO/I,KAAKC,MAAMD,KAAKgJ,UAAYD,EAAMD,IAAQA,EAG5C,SAASG,IACd,IAAIC,EAAQ,CACV,YACA,OACA,WACA,WACA,cACA,WACA,aACA,YACA,eACA,WACA,SACA,SACA,YACA,SACA,SACA,QACA,YACA,UACA,aACA,WACA,SACA,WACA,SACA,eACA,OACA,cACA,aACA,QACA,WACA,YACA,YACA,OACA,UACA,WACA,QACA,YACA,QACA,MACA,aACA,UACA,YACA,QACA,SACA,UACA,WACA,UACA,UACA,QACA,YACA,WACA,SACA,UACA,UACA,UACA,MACA,eACA,cACA,MACA,SACA,OACA,WACA,WACA,UACA,UACA,cACA,WACA,WACA,YACA,aACA,UACA,YACA,aACA,YACA,aACA,UACA,QACA,UACA,QACA,UACA,UACA,MACA,OACA,QACA,OACA,SACA,QACA,YACA,UACA,UACA,aACA,SACA,OACA,YACA,MACA,cACA,gBACA,aACA,SACA,QACA,kBACA,QACA,QACA,UACA,QACA,QACA,WACA,QACA,OACA,WACA,QACA,UACA,OACA,OACA,SACA,QACA,OACA,SACA,YACA,QACA,QACA,YACA,QACA,SACA,YACA,QACA,SACA,SACA,QACA,UACA,SACA,QACA,QACA,UACA,aACA,QACA,WACA,OACA,UACA,UACA,cACA,OACA,SACA,SACA,UACA,WACA,UACA,WACA,SACA,WACA,YACA,aACA,WACA,QACA,WACA,SACA,QACA,SACA,SACA,WACA,UACA,QACA,QACA,YACA,SACA,QACA,SACA,SACA,WACA,SACA,YACA,SACA,OACA,WACA,YACA,WACA,cACA,SACA,gBACA,YACA,WACA,UACA,cACA,WACA,YACA,WACA,WACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,cACA,QACA,UACA,SACA,aACA,YACA,SACA,QACA,SACA,WACA,SACA,WACA,QACA,WACA,UACA,UACA,QACA,WACA,SACA,aACA,WACA,aACA,QACA,QACA,OACA,cACA,UACA,OACA,YACA,SACA,SACA,UACA,OACA,WACA,OACA,SACA,YACA,OACA,UACA,SACA,UACA,WACA,OACA,cACA,YACA,UACA,YACA,WACA,aACA,UACA,aACA,YACA,aACA,YACA,YACA,QACA,SACA,aACA,YACA,cACA,WACA,WACA,aACA,UACA,YACA,YACA,UACA,WACA,MACA,UACA,YACA,SACA,aACA,WACA,aACA,aACA,WACA,SACA,UACA,YACA,SACA,QACA,YACA,YACA,SACA,UACA,WACA,YACA,QACA,QACA,SACA,SACA,YACA,OACA,SACA,WACA,SACA,SACA,MACA,OACA,OACA,UACA,OACA,QACA,UACA,QACA,OACA,aACA,WACA,SACA,WACA,YACA,UACA,SACA,UACA,WACA,UACA,aACA,aACA,cACA,cACA,UACA,YACA,QACA,YACA,aACA,YACA,cACA,WACA,UACA,SACA,UACA,QACA,aACA,YACA,WACA,UACA,WACA,OACA,YACA,cACA,QACA,OACA,UACA,YACA,YACA,YACA,YACA,UACA,WACA,SACA,YACA,cACA,SACA,aACA,cACA,cACA,cACA,WACA,UACA,QACA,OACA,WACA,OACA,QACA,WACA,SACA,QACA,YACA,MACA,UACA,YACA,UACA,OACA,MACA,QACA,WACA,YACA,WACA,UACA,WACA,SACA,SACA,SACA,WACA,MACA,SACA,SACA,OACA,WACA,OACA,QACA,YACA,UACA,QACA,QACA,aACA,SACA,OACA,SACA,WACA,aACA,SACA,WACA,UACA,SACA,QACA,YACA,UACA,OACA,YACA,UACA,WACA,SACA,SACA,WACA,aACA,YACA,WACA,QACA,QACA,SACA,OACA,SACA,QACA,WACA,WACA,aACA,cACA,SACA,SACA,SACA,YACA,QACA,SACA,SACA,SACA,WACA,OACA,WACA,aACA,QACA,QACA,QACA,aACA,UACA,UACA,WACA,SACA,UACA,QACA,QACA,WACA,SACA,SACA,YACA,UACA,QACA,WACA,UACA,aACA,aACA,SACA,WACA,SACA,OACA,SACA,OACA,eACA,WACA,WACA,WACA,QACA,YACA,WACA,WACA,QACA,OACA,QACA,SACA,QACA,aACA,OACA,QACA,WACA,WACA,QACA,YACA,UACA,WACA,UACA,WACA,QACA,SACA,WACA,SACA,SACA,WACA,QACA,QACA,OACA,WACA,WACA,QACA,QACA,iBACA,OACA,eACA,UACA,WACA,aACA,QACA,QACA,UACA,WACA,UACA,YACA,SACA,WACA,QACA,QACA,UACA,WACA,SACA,UACA,OACA,aACA,YACA,SACA,SACA,SACA,SACA,YACA,UACA,UACA,WACA,aACA,MACA,OACA,SACA,cACA,UACA,YACA,SACA,UACA,QACA,OACA,MACA,QACA,aACA,YACA,OACA,UACA,WACA,WACA,MACA,UACA,YACA,eACA,aACA,cACA,YACA,cACA,aACA,aACA,YACA,UACA,cACA,aACA,YACA,YACA,gBACA,SACA,WACA,YACA,aACA,cACA,iBACA,aACA,aACA,SACA,SACA,eACA,eACA,aACA,kBACA,aACA,YACA,gBACA,WACA,WACA,YACA,aACA,WACA,WACA,WACA,WACA,WACA,YACA,gBACA,YACA,cACA,gBACA,cACA,SACA,cACA,cACA,WACA,gBACA,WACA,WACA,gBACA,aACA,QACA,QACA,SACA,aACA,SACA,UACA,UACA,QACA,QACA,SACA,SACA,SACA,WACA,YACA,QACA,QACA,SACA,QACA,WACA,gBACA,OACA,MACA,OACA,cACA,SACA,SACA,SACA,SACA,gBACA,UACA,QACA,QACA,SACA,OACA,QACA,QACA,OACA,UACA,OACA,SACA,SACA,OACA,UACA,OACA,QACA,OACA,QACA,aACA,QACA,eACA,UACA,SACA,UACA,OACA,UACA,SACA,QACA,SACA,SACA,OACA,SACA,QACA,YACA,OACA,SACA,OACA,YACA,QACA,WACA,OACA,OACA,UACA,SACA,SACA,MACA,QACA,QACA,YACA,WACA,QACA,WACA,YACA,MACA,UACA,cACA,WACA,QACA,OACA,UACA,UACA,YACA,YACA,UACA,SACA,SACA,QACA,OACA,SACA,QACA,UACA,WACA,SACA,OACA,SACA,UACA,YACA,WACA,QACA,QACA,WACA,OACA,QACA,WACA,YACA,QACA,QACA,YACA,UACA,YACA,QACA,QACA,SACA,SACA,QACA,YACA,UACA,aACA,QACA,YACA,WACA,aACA,cACA,QACA,UACA,eACA,UACA,QACA,QACA,QACA,QACA,aACA,QACA,SACA,QACA,UACA,UACA,WACA,OACA,OACA,YACA,QACA,WACA,YACA,aACA,cACA,UACA,MACA,OACA,OACA,QACA,SACA,QACA,YACA,QACA,UACA,SACA,UACA,QACA,aACA,QACA,UACA,OACA,aACA,QACA,WACA,QACA,SACA,OACA,SACA,UACA,aACA,MACA,UACA,UACA,YACA,WACA,MACA,gBACA,OACA,OACA,UACA,aACA,UACA,SACA,UACA,UACA,SACA,SACA,WACA,WACA,QACA,MACA,WACA,WACA,aACA,aACA,cACA,OACA,aACA,UACA,YACA,aACA,YACA,OACA,SACA,WACA,UACA,UACA,aACA,OACA,SACA,WACA,UACA,UACA,WACA,WACA,QACA,WACA,YACA,QACA,cACA,QACA,QACA,WACA,WACA,OACA,UACA,QACA,YACA,UACA,UACA,WACA,UACA,WACA,QACA,QACA,WACA,SACA,YACA,UACA,YACA,SACA,OACA,UACA,SACA,OACA,WACA,WACA,UACA,WACA,YACA,YACA,WACA,UACA,cACA,SACA,WACA,WACA,SACA,UACA,UACA,QACA,WACA,UACA,QACA,WACA,aACA,aACA,UACA,SACA,QACA,UACA,WACA,UACA,OACA,OACA,SACA,QACA,SACA,UACA,WACA,SACA,YACA,cACA,YACA,SACA,YACA,eACA,QACA,eACA,QACA,iBACA,SACA,WACA,YACA,UACA,SACA,QACA,OACA,OACA,MACA,SACA,WACA,cACA,QACA,OACA,YACA,aACA,MACA,aACA,QACA,UACA,WACA,WACA,aACA,aACA,SACA,YACA,WACA,aACA,cACA,YACA,YACA,YACA,OACA,QACA,QACA,SACA,OACA,UACA,SACA,OACA,WACA,SACA,QACA,QACA,QACA,QACA,UACA,UACA,QACA,OACA,QACA,QACA,QACA,MACA,OACA,QACA,OACA,QACA,OACA,YACA,WACA,YACA,QACA,SACA,SACA,QACA,UACA,YACA,aACA,WACA,WACA,UACA,SACA,YACA,cACA,SACA,eACA,eACA,UACA,cACA,WACA,SACA,UACA,aACA,UACA,SACA,SACA,UACA,QACA,UACA,WACA,YACA,QACA,aACA,QACA,UACA,WACA,SACA,QACA,aACA,QACA,SACA,MACA,OACA,SACA,QACA,QACA,SACA,UACA,SACA,aACA,SACA,SACA,WACA,WACA,SACA,SACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,QACA,SACA,SACA,OACA,SACA,WACA,SACA,YACA,SACA,WACA,OACA,QACA,QACA,SACA,OACA,YACA,gBACA,OACA,YACA,UACA,QACA,OACA,UACA,YACA,SACA,WACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,UACA,OACA,SACA,UACA,WACA,SACA,QACA,UACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,QACA,cACA,SACA,SACA,WACA,UACA,QACA,SACA,WACA,WACA,UACA,SACA,WACA,WACA,aACA,SACA,SACA,UACA,UACA,aACA,cACA,SACA,WACA,SACA,SACA,QACA,QACA,SACA,cACA,WACA,aACA,cACA,YACA,aACA,SACA,SACA,QACA,aACA,QACA,cACA,OACA,YACA,OACA,MACA,WACA,OACA,QACA,WACA,OACA,UACA,UACA,WACA,SACA,QACA,QACA,WACA,WACA,QACA,WACA,OACA,QACA,QACA,OACA,QACA,UACA,OACA,WACA,SACA,QACA,aACA,aACA,UACA,aACA,OACA,QACA,SACA,SACA,OACA,QACA,OACA,QACA,QACA,YACA,YACA,aACA,SACA,UACA,aACA,aACA,SACA,WACA,OACA,UACA,WACA,OACA,WACA,cACA,SACA,WACA,QACA,YACA,OACA,OACA,WACA,eACA,UACA,gBACA,WACA,cACA,cACA,YACA,SACA,aACA,QACA,WACA,cACA,UACA,YACA,UACA,cACA,SACA,SACA,UACA,UACA,WACA,UACA,UACA,YACA,aACA,cACA,SACA,SACA,YACA,YACA,WACA,SACA,SACA,WACA,UACA,SACA,SACA,UACA,YACA,WACA,YACA,YACA,YACA,SACA,UACA,QACA,QACA,SACA,OACA,SACA,UACA,WACA,QACA,SACA,QACA,OACA,QACA,WACA,QACA,WACA,OACA,UACA,YACA,WACA,aACA,UACA,UACA,aACA,WACA,WACA,aACA,SACA,UACA,UACA,WACA,UACA,QACA,YACA,QACA,aACA,MACA,UACA,OACA,cACA,SACA,OACA,WACA,WACA,cACA,SACA,OACA,UACA,OACA,QACA,SACA,MACA,SACA,QACA,UACA,QACA,UACA,kBACA,eACA,gBACA,WACA,YACA,WACA,aACA,YACA,MACA,QACA,YACA,YACA,YACA,QACA,QACA,WACA,SACA,OACA,YACA,SACA,OACA,UACA,SACA,UACA,QACA,SACA,OACA,OACA,QACA,SACA,SACA,YACA,SACA,QACA,QACA,UACA,OACA,UACA,YACA,QACA,QACA,YACA,aACA,SACA,WACA,WACA,WACA,QACA,MACA,UACA,SACA,SACA,YACA,QACA,WACA,QACA,OACA,UACA,QACA,SACA,SAGEC,EAAQ,CACV,SACA,UACA,MACA,MACA,QACA,cACA,MACA,SACA,aACA,SACA,SACA,WACA,OACA,OACA,SACA,QACA,SACA,UACA,SACA,OACA,OACA,gBACA,SACA,MACA,OACA,aACA,UACA,WACA,UACA,YACA,QACA,UACA,YACA,OACA,WACA,aACA,UACA,UACA,SACA,OACA,UACA,OACA,cACA,aACA,OACA,UACA,WACA,QACA,WACA,QACA,QACA,OACA,YACA,aACA,SACA,UACA,cACA,WACA,aACA,SACA,UACA,QACA,OACA,WACA,UACA,OACA,QACA,eACA,YACA,UACA,WACA,SACA,SACA,UACA,QACA,YACA,YACA,WACA,aACA,OACA,SACA,UACA,QACA,cACA,QACA,WACA,QACA,QACA,YACA,aACA,UACA,UACA,aACA,aACA,OACA,OACA,WACA,UACA,SACA,SACA,WACA,OACA,cACA,UACA,UACA,WACA,aACA,UACA,gBACA,QACA,YACA,UACA,OACA,SACA,SACA,OACA,OACA,OACA,cACA,WACA,UACA,WACA,YACA,YACA,OACA,SACA,WACA,WACA,YACA,WACA,QACA,WACA,WACA,UACA,OACA,cACA,eACA,gBACA,SACA,aACA,YACA,OACA,WACA,YACA,UACA,eACA,cACA,cACA,SACA,SACA,SACA,WACA,YACA,eACA,WACA,OACA,SACA,SACA,UACA,OACA,SACA,UACA,QACA,QACA,aACA,cACA,UACA,WACA,QACA,aACA,UACA,YACA,YACA,OACA,QACA,SACA,QACA,SACA,aACA,aACA,UACA,UACA,UACA,iBACA,YACA,QACA,YACA,SACA,cACA,OACA,SACA,QACA,SACA,aACA,cACA,QACA,cACA,QACA,SACA,SACA,QACA,aACA,aACA,cACA,UACA,aACA,WACA,UACA,KACA,SACA,UACA,aACA,YACA,OACA,cACA,SACA,WACA,YACA,WACA,iBACA,SACA,WACA,WACA,cACA,aACA,iBACA,WACA,YACA,UACA,UACA,UACA,WACA,YACA,WACA,WACA,UACA,OACA,aACA,aACA,cACA,QACA,QACA,YACA,SACA,WACA,aACA,cACA,QACA,cACA,QACA,UACA,aACA,SACA,WACA,OACA,YACA,QACA,QACA,YACA,WACA,SACA,aACA,QACA,WACA,SACA,WACA,WACA,QACA,QACA,QACA,WACA,aACA,aACA,UACA,YACA,UACA,aACA,YACA,QACA,UACA,aACA,YACA,eACA,WACA,UACA,WACA,WACA,QACA,SACA,aACA,OACA,UACA,YACA,YACA,UACA,SACA,iBACA,SACA,UACA,SACA,WACA,SACA,aACA,aACA,SACA,WACA,SACA,WACA,SACA,MACA,UACA,aACA,eACA,YACA,aACA,eACA,aACA,UACA,UACA,SACA,SACA,SACA,QACA,UACA,YACA,SACA,UACA,SACA,SACA,UACA,OACA,UACA,aACA,WACA,MACA,cACA,OACA,MACA,SACA,SACA,SACA,cACA,YACA,QACA,QACA,WACA,aACA,eACA,SACA,YACA,eACA,OACA,QACA,OACA,UACA,SACA,OACA,WACA,UACA,cACA,UACA,aACA,WACA,UACA,YACA,eACA,WACA,aACA,QACA,cACA,SACA,OACA,OACA,OACA,YACA,WACA,SACA,cACA,cACA,eACA,OACA,aACA,MACA,OACA,WACA,WACA,YACA,cACA,aACA,QACA,MACA,SACA,MACA,UACA,UACA,SACA,SACA,SACA,aACA,SACA,QACA,QACA,YACA,aACA,eACA,SACA,UACA,OACA,SACA,gBACA,cACA,UACA,UACA,QACA,aACA,cACA,eACA,SACA,aACA,YACA,OACA,SACA,OACA,UACA,QACA,SACA,aACA,YACA,WACA,WACA,cACA,QACA,SACA,cACA,SACA,WACA,UACA,SACA,WACA,UACA,QACA,aACA,YACA,WACA,UACA,OACA,WACA,cACA,eACA,QACA,SACA,cACA,YACA,UACA,OACA,MACA,UACA,aACA,UACA,OACA,aACA,MACA,aACA,YACA,OACA,WACA,cACA,aACA,YACA,QACA,WACA,OACA,YACA,cACA,aACA,QACA,UACA,WACA,UACA,WACA,OACA,SACA,UACA,QACA,QACA,OACA,OACA,OACA,QACA,QACA,UACA,QACA,WACA,QACA,OACA,OACA,OACA,MACA,MACA,QACA,SACA,OACA,QACA,OACA,OACA,UACA,OACA,OACA,aACA,MACA,OACA,MACA,QACA,OACA,OACA,UACA,QACA,OACA,SACA,QACA,WACA,QACA,QACA,SACA,UACA,QACA,OACA,OACA,OACA,OACA,QACA,OACA,OACA,QACA,OACA,OACA,MACA,QACA,MACA,QACA,WACA,OACA,SACA,MACA,SACA,QACA,QACA,WACA,WACA,QACA,UACA,QACA,MACA,OACA,QACA,MACA,QACA,OACA,OACA,OACA,SACA,QACA,QACA,SACA,OACA,OACA,QACA,MACA,UACA,SACA,SACA,QACA,OACA,SACA,SACA,OACA,SACA,WACA,QACA,OACA,QACA,QACA,SACA,MACA,MACA,OACA,SACA,SACA,UACA,WACA,QACA,OACA,QACA,SACA,OACA,QACA,MACA,OACA,UACA,QACA,OACA,QACA,UACA,SACA,SACA,MACA,QACA,SACA,YACA,QACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,OACA,OACA,MACA,QACA,MACA,MACA,SACA,QACA,MACA,OACA,SACA,OACA,QACA,QACA,MACA,OACA,QACA,OACA,SACA,UACA,WACA,MACA,WACA,MACA,OACA,WACA,WACA,SACA,YACA,UACA,MACA,QACA,QACA,OACA,QACA,OACA,OACA,QACA,QACA,SACA,OACA,SACA,YACA,OACA,UACA,OACA,aACA,SACA,QACA,UACA,MACA,QACA,SACA,SACA,OACA,SACA,UACA,QACA,OACA,OACA,UACA,UACA,SACA,UACA,UACA,MACA,OACA,QACA,OACA,YACA,UACA,SACA,MACA,OACA,MACA,UACA,QACA,SACA,UACA,OACA,SACA,OACA,OACA,OACA,QACA,UACA,YACA,SACA,OACA,OACA,QACA,SACA,OACA,QACA,WACA,OACA,SACA,QACA,UACA,OACA,SACA,QACA,QACA,QACA,OACA,QACA,SACA,QACA,SACA,OACA,MACA,YACA,SACA,OACA,OACA,OACA,SACA,WACA,UACA,OACA,UACA,QACA,QACA,SACA,OACA,SACA,SACA,SACA,WACA,OACA,SACA,SACA,SACA,UACA,QACA,YACA,WACA,MACA,QACA,QACA,QACA,UACA,OACA,SACA,WACA,YACA,OACA,OACA,WACA,MACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,UACA,OACA,OACA,SACA,OACA,aACA,QACA,OACA,SACA,QACA,QACA,QACA,SACA,SACA,MACA,WACA,UACA,OACA,YACA,SACA,QACA,OACA,QACA,UACA,OACA,MACA,SACA,MACA,QACA,YACA,WACA,OACA,SACA,SACA,SACA,SACA,OACA,OACA,OACA,QACA,aACA,OACA,OACA,UACA,OACA,WACA,UACA,MACA,QACA,SACA,QACA,SACA,OACA,QACA,OACA,YACA,aACA,WACA,SACA,SACA,MACA,QACA,OACA,QACA,SACA,MACA,UACA,OACA,QACA,OACA,OACA,QACA,QACA,OACA,SACA,QACA,YACA,OACA,QACA,YACA,MACA,QACA,QACA,QACA,QACA,gBACA,QACA,OACA,SACA,OACA,YACA,MACA,OACA,UACA,OACA,WACA,QACA,QACA,MACA,OACA,SACA,OACA,OACA,SACA,QACA,OACA,OACA,QACA,OACA,WACA,YACA,MACA,OACA,UACA,SACA,QACA,MACA,WACA,OACA,OACA,SACA,SACA,YACA,OACA,OACA,YACA,QACA,UACA,MACA,SACA,UACA,OACA,UACA,UACA,UACA,OACA,UACA,WACA,WACA,YACA,MACA,SACA,UACA,MACA,SACA,MACA,OACA,SACA,OACA,OACA,QACA,WACA,YACA,QACA,OACA,YACA,UACA,YACA,OACA,QACA,MACA,QACA,UACA,SACA,QACA,OACA,UACA,OACA,UACA,WACA,OACA,QACA,WACA,UACA,UACA,QACA,SACA,QACA,OACA,SACA,OACA,WACA,WACA,QACA,UACA,SACA,UACA,QACA,WACA,OACA,QACA,OACA,MACA,QACA,YACA,MACA,OACA,SACA,SACA,SACA,UACA,QACA,QACA,OACA,QACA,QACA,WACA,QACA,OACA,SACA,QACA,MACA,OACA,QACA,OACA,QACA,QACA,YACA,SACA,OACA,OACA,SACA,UACA,SACA,UACA,MACA,OACA,QACA,UACA,SACA,QACA,UACA,OACA,SACA,SACA,OACA,QACA,SACA,OACA,MACA,OACA,OACA,QACA,MACA,QACA,QACA,SACA,OACA,SACA,UACA,aACA,QACA,OACA,OACA,OACA,QACA,SACA,QACA,UACA,WACA,QACA,OACA,QACA,OACA,QACA,SACA,MACA,WACA,QACA,QACA,QACA,WACA,OACA,aACA,UACA,UACA,OACA,QACA,OACA,UACA,OACA,QACA,SACA,QACA,SACA,QACA,QACA,UACA,UACA,SACA,cACA,OACA,OACA,SACA,UACA,OACA,SACA,OACA,UACA,QACA,SACA,OACA,OACA,QACA,QACA,OACA,aACA,SACA,SACA,QACA,OACA,OACA,QACA,QACA,MACA,SACA,OACA,MACA,OACA,QACA,SACA,MACA,WACA,UACA,QACA,UACA,MACA,QACA,WACA,WACA,QACA,QACA,MACA,OACA,YACA,WACA,SACA,OACA,OACA,MACA,MACA,OACA,QACA,QACA,UACA,MACA,QACA,SACA,QACA,UACA,WACA,SACA,OACA,OACA,OACA,OACA,SACA,SACA,OACA,UACA,MACA,QACA,QACA,UACA,MACA,OACA,QACA,MACA,OACA,OACA,OACA,OACA,KACA,QACA,QACA,QACA,SACA,OACA,OACA,QACA,OACA,QACA,QACA,UACA,WACA,OACA,OACA,OACA,OACA,MACA,SACA,MACA,SACA,SACA,OACA,MACA,WACA,aACA,QACA,WACA,UACA,WACA,MACA,UACA,WACA,OACA,MACA,QACA,SACA,OACA,OACA,MACA,MACA,WACA,SACA,aACA,OACA,MACA,MACA,QACA,OACA,OACA,QACA,YACA,eACA,gBACA,SACA,OACA,cACA,UACA,UACA,QACA,QACA,SACA,OACA,aACA,MACA,WACA,OACA,UACA,QACA,OACA,YACA,WACA,UACA,SACA,UACA,QACA,OACA,WACA,OACA,OACA,QACA,QACA,UACA,OACA,SACA,SACA,MACA,UACA,MACA,YACA,SACA,UACA,UACA,cACA,QACA,WACA,QACA,OACA,QACA,QACA,YACA,SACA,SACA,QACA,WACA,OACA,OACA,QACA,SACA,SACA,QACA,SACA,OACA,OACA,QACA,SACA,OACA,SACA,UACA,QACA,OACA,MACA,UACA,OACA,QACA,UACA,UACA,WACA,MACA,WACA,QACA,cACA,OACA,OACA,OACA,QACA,QACA,QACA,OACA,SACA,WACA,QACA,SACA,UACA,OACA,UACA,OACA,SACA,SACA,QACA,OACA,SACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,OACA,MACA,YACA,QACA,QACA,SACA,WACA,MACA,OACA,UACA,OACA,WACA,MACA,OACA,SACA,OACA,OACA,WACA,OACA,QACA,SACA,QACA,QACA,OACA,QACA,OACA,OACA,UACA,QACA,QACA,QACA,YACA,UACA,UACA,OACA,SACA,OACA,QACA,MACA,OACA,WACA,OACA,OACA,YACA,MACA,MACA,SACA,QACA,WACA,OACA,QACA,QACA,QACA,OACA,MACA,OACA,QACA,OACA,QACA,SACA,SACA,QACA,OACA,QACA,OACA,UACA,UACA,SACA,QACA,OACA,QACA,QACA,OACA,UACA,UACA,MACA,SACA,aACA,OACA,OACA,UACA,QACA,UACA,YACA,SACA,MACA,QACA,QACA,QACA,SACA,SACA,OACA,QACA,SACA,QACA,MACA,UACA,OACA,SACA,SACA,WACA,OACA,UACA,QACA,MACA,SACA,QACA,WACA,UACA,QACA,SACA,QACA,SACA,WACA,OACA,QACA,QACA,OACA,SACA,UACA,QACA,YACA,OACA,QACA,OACA,OACA,OACA,SACA,QACA,UACA,UACA,OACA,OACA,OACA,QACA,UACA,QACA,QACA,QACA,WACA,QACA,SACA,QACA,OACA,cACA,WACA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","file":"static/js/main.c20029b4.chunk.js","sourcesContent":["//@ts-ignore\nimport canAutoplay from 'can-autoplay';\nimport { parseStringPromise } from 'xml2js';\nimport { v4 as uuidv4 } from 'uuid';\nimport md5 from 'blueimp-md5';\nimport firebase from 'firebase/compat/app';\n\nexport function formatTimestamp(input: any) {\n  if (\n    input === null ||\n    input === undefined ||\n    input === false ||\n    Number.isNaN(input) ||\n    input === Infinity\n  ) {\n    return '';\n  }\n  let hours = Math.floor(Number(input) / 3600);\n  let minutes = (Math.floor(Number(input) / 60) % 60)\n    .toString()\n    .padStart(2, '0');\n  let seconds = Math.floor(Number(input) % 60)\n    .toString()\n    .padStart(2, '0');\n  return `${hours}:${minutes}:${seconds}`;\n}\n\nexport function formatSpeed(input: number) {\n  if (input >= 1000000) {\n    return (input / 1000000).toFixed(2) + ' MiB/s';\n  }\n  if (input >= 1000) {\n    return (input / 1000).toFixed(0) + ' KiB/s';\n  }\n  return input + ' B/s';\n}\n\nexport function hashString(input: string) {\n  var hash = 0;\n  for (var i = 0; i < input.length; i++) {\n    var charCode = input.charCodeAt(i);\n    hash += charCode;\n  }\n  return hash;\n}\n\nexport const colorMappings: StringDict = {\n  red: 'B03060',\n  orange: 'FE9A76',\n  yellow: 'FFD700',\n  olive: '32CD32',\n  green: '016936',\n  teal: '008080',\n  blue: '0E6EB8',\n  violet: 'EE82EE',\n  purple: 'B413EC',\n  pink: 'FF1493',\n  brown: 'A52A2A',\n  grey: 'A0A0A0',\n  black: '000000',\n};\n\nlet colorCache = {} as NumberDict;\nexport function getColorForString(id: string) {\n  let colors = [\n    'red',\n    'orange',\n    'yellow',\n    'olive',\n    'green',\n    'teal',\n    'blue',\n    'violet',\n    'purple',\n    'pink',\n    'brown',\n    'grey',\n  ];\n  if (colorCache[id]) {\n    return colors[colorCache[id]];\n  }\n  colorCache[id] = Math.abs(hashString(id)) % colors.length;\n  return colors[colorCache[id]];\n}\n\nexport function getColorForStringHex(id: string) {\n  return colorMappings[getColorForString(id)];\n}\n\nexport const getFbPhoto = (fbId: string) =>\n  `https://graph.facebook.com/${fbId}/picture?type=normal`;\n\nexport const getMediaType = (input: string) => {\n  if (!input) {\n    return '';\n  }\n  if (\n    input.startsWith('https://www.youtube.com/') ||\n    input.startsWith('https://youtu.be/')\n  ) {\n    return 'youtube';\n  }\n  return 'video';\n};\n\nexport async function testAutoplay() {\n  const result = await canAutoplay.video();\n  return result.result;\n}\n\nexport function decodeEntities(input: string) {\n  const doc = new DOMParser().parseFromString(input, 'text/html');\n  return doc.documentElement.textContent;\n}\n\n// Returns a function, that, as long as it continues to be invoked, will not\n// be triggered. The function will be called after it stops being called for\n// N milliseconds. If `immediate` is passed, trigger the function on the\n// leading edge, instead of the trailing.\nexport function debounce(func: Function, wait: number, immediate?: boolean) {\n  var timeout: any;\n\n  // This is the function that is actually executed when\n  // the DOM event is triggered.\n  return function executedFunction() {\n    // Store the context of this and any\n    // parameters passed to executedFunction\n    //@ts-ignore\n    var context = this;\n    var args = arguments;\n\n    // The function to be called after\n    // the debounce time has elapsed\n    var later = function () {\n      // null timeout to indicate the debounce ended\n      timeout = null;\n\n      // Call function now if you did not on the leading end\n      if (!immediate) func.apply(context, args);\n    };\n\n    // Determine if you should call the function\n    // on the leading or trail end\n    var callNow = immediate && !timeout;\n\n    // This will reset the waiting every function execution.\n    // This is the step that prevents the function from\n    // being executed because it will never reach the\n    // inside of the previous setTimeout\n    clearTimeout(timeout);\n\n    // Restart the debounce waiting period.\n    // setTimeout returns a truthy value (it differs in web vs node)\n    timeout = setTimeout(later, wait);\n\n    // Call immediately if you're dong a leading\n    // end execution\n    if (callNow) func.apply(context, args);\n  };\n}\n\nexport const getMediaPathForList = (list: string) => {\n  if (list.startsWith('https://gitlab.com/')) {\n    const match = list.match(\n      /https:\\/\\/gitlab.com\\/api\\/v4\\/projects\\/(.*)\\/repository\\/tree/\n    );\n    const name = match && match[1];\n    const decoded = decodeURIComponent(name || '');\n    return `https://glcdn.githack.com/${decoded}/-/raw/master/`;\n  }\n  // Nginx servers use the same mediapath as list, add trailing /\n  return list + '/';\n};\n\nexport const getDefaultPicture = (name: string, background = 'a0a0a0') => {\n  return `https://ui-avatars.com/api/?name=${name}&background=${background}&size=256&color=ffffff`;\n};\n\nexport const isMobile = () => {\n  return window.screen.width <= 600;\n};\n\nexport function shuffle(array: any[]) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * i);\n    const temp = array[i];\n    array[i] = array[j];\n    array[j] = temp;\n  }\n}\n\nexport const iceServers = () => [\n  { urls: 'stun:stun.l.google.com:19302' },\n  {\n    urls: 'turn:5.161.49.183:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:135.181.147.65:3478',\n    username: 'username',\n    credential: 'password',\n  },\n  {\n    urls: 'turn:numb.viagenie.ca',\n    credential: 'watchparty',\n    username: 'howardzchung@gmail.com',\n  },\n];\n\nexport const serverPath =\n  process.env.REACT_APP_SERVER_HOST ||\n  `${window.location.protocol}//${\n    process.env.NODE_ENV === 'production'\n      ? window.location.host\n      : `${window.location.hostname}:8080`\n  }`;\n\nexport async function getMediaPathResults(\n  mediaPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  // Get media list if provided\n  const response = await window.fetch(mediaPath);\n  let results: SearchResult[] = [];\n  if (mediaPath.includes('s3.')) {\n    // S3-style buckets return data in XML\n    const xml = await response.text();\n    const data = await parseStringPromise(xml);\n    let filtered = data.ListBucketResult.Contents.filter(\n      (file: any) => !file.Key[0].includes('/')\n    );\n    results = filtered.map((file: any) => ({\n      url: mediaPath + '/' + file.Key[0],\n      name: mediaPath + '/' + file.Key[0],\n    }));\n  } else {\n    const data = await response.json();\n    results = data\n      .filter((file: any) => file.type === 'file')\n      .map((file: any) => ({\n        url: file.url || getMediaPathForList(mediaPath) + file.name,\n        name: getMediaPathForList(mediaPath) + file.name,\n      }));\n  }\n  results = results.filter((option: SearchResult) =>\n    option.name.toLowerCase().includes(query.toLowerCase())\n  );\n  return results;\n}\n\nexport async function getStreamPathResults(\n  streamPath: string,\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    streamPath + '/search?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function getYouTubeResults(\n  query: string\n): Promise<SearchResult[]> {\n  const response = await window.fetch(\n    serverPath + '/youtube?q=' + encodeURIComponent(query)\n  );\n  const data = await response.json();\n  return data;\n}\n\nexport async function openFileSelector(accept?: string) {\n  return new Promise<FileList | null>((resolve) => {\n    // Create an input element\n    const inputElement = document.createElement('input');\n\n    // Set its type to file\n    inputElement.type = 'file';\n\n    // Set accept to the file types you want the user to select.\n    // Include both the file extension and the mime type\n    if (accept) {\n      inputElement.accept = accept;\n    }\n\n    // set onchange event to call callback when user has selected file\n    inputElement.addEventListener('change', () => {\n      resolve(inputElement.files);\n    });\n\n    // dispatch a click event to open the file dialog\n    inputElement.dispatchEvent(new MouseEvent('click'));\n  });\n}\n\nexport function getAndSaveClientId() {\n  let clientId = window.localStorage.getItem('watchparty-clientid');\n  if (!clientId) {\n    // Generate a new clientID and save it\n    clientId = uuidv4();\n    window.localStorage.setItem('watchparty-clientid', clientId);\n  }\n  return clientId;\n}\n\nexport function calculateMedian(array: Array<number>): number {\n  // Check If Data Exists\n  if (array.length >= 1) {\n    // Sort Array\n    array = array.sort((a: number, b: number) => {\n      return a - b;\n    });\n\n    // Array Length: Even\n    if (array.length % 2 === 0) {\n      // Average Of Two Middle Numbers\n      return (array[array.length / 2 - 1] + array[array.length / 2]) / 2;\n    }\n    // Array Length: Odd\n    else {\n      // Middle Number\n      return array[(array.length - 1) / 2];\n    }\n  }\n  return 0;\n}\n\nexport async function getUserImage(\n  user: firebase.User\n): Promise<string | null> {\n  // Check if user has a Gravatar\n  const hash = user.email ? md5(user.email) : '';\n  if (user.email) {\n    const gravatar = `https://www.gravatar.com/avatar/${hash}?d=404&s=256`;\n    const response = await window.fetch(gravatar);\n    if (response.ok) {\n      return gravatar;\n    }\n  }\n  if (user.photoURL) {\n    return user.photoURL + '?height=256&width=256';\n  }\n  return `https://www.gravatar.com/avatar/${hash}?d=identicon`;\n}\n","function capFirst(string: string) {\n  return string.charAt(0).toUpperCase() + string.slice(1);\n}\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min)) + min;\n}\n\nexport function generateName() {\n  var name1 = [\n    'abandoned',\n    'able',\n    'absolute',\n    'adorable',\n    'adventurous',\n    'academic',\n    'acceptable',\n    'acclaimed',\n    'accomplished',\n    'accurate',\n    'aching',\n    'acidic',\n    'acrobatic',\n    'active',\n    'actual',\n    'adept',\n    'admirable',\n    'admired',\n    'adolescent',\n    'adorable',\n    'adored',\n    'advanced',\n    'afraid',\n    'affectionate',\n    'aged',\n    'aggravating',\n    'aggressive',\n    'agile',\n    'agitated',\n    'agonizing',\n    'agreeable',\n    'ajar',\n    'alarmed',\n    'alarming',\n    'alert',\n    'alienated',\n    'alive',\n    'all',\n    'altruistic',\n    'amazing',\n    'ambitious',\n    'ample',\n    'amused',\n    'amusing',\n    'anchored',\n    'ancient',\n    'angelic',\n    'angry',\n    'anguished',\n    'animated',\n    'annual',\n    'another',\n    'antique',\n    'anxious',\n    'any',\n    'apprehensive',\n    'appropriate',\n    'apt',\n    'arctic',\n    'arid',\n    'aromatic',\n    'artistic',\n    'ashamed',\n    'assured',\n    'astonishing',\n    'athletic',\n    'attached',\n    'attentive',\n    'attractive',\n    'austere',\n    'authentic',\n    'authorized',\n    'automatic',\n    'avaricious',\n    'average',\n    'aware',\n    'awesome',\n    'awful',\n    'awkward',\n    'babyish',\n    'bad',\n    'back',\n    'baggy',\n    'bare',\n    'barren',\n    'basic',\n    'beautiful',\n    'belated',\n    'beloved',\n    'beneficial',\n    'better',\n    'best',\n    'bewitched',\n    'big',\n    'big-hearted',\n    'biodegradable',\n    'bite-sized',\n    'bitter',\n    'black',\n    'black-and-white',\n    'bland',\n    'blank',\n    'blaring',\n    'bleak',\n    'blind',\n    'blissful',\n    'blond',\n    'blue',\n    'blushing',\n    'bogus',\n    'boiling',\n    'bold',\n    'bony',\n    'boring',\n    'bossy',\n    'both',\n    'bouncy',\n    'bountiful',\n    'bowed',\n    'brave',\n    'breakable',\n    'brief',\n    'bright',\n    'brilliant',\n    'brisk',\n    'broken',\n    'bronze',\n    'brown',\n    'bruised',\n    'bubbly',\n    'bulky',\n    'bumpy',\n    'buoyant',\n    'burdensome',\n    'burly',\n    'bustling',\n    'busy',\n    'buttery',\n    'buzzing',\n    'calculating',\n    'calm',\n    'candid',\n    'canine',\n    'capital',\n    'carefree',\n    'careful',\n    'careless',\n    'caring',\n    'cautious',\n    'cavernous',\n    'celebrated',\n    'charming',\n    'cheap',\n    'cheerful',\n    'cheery',\n    'chief',\n    'chilly',\n    'chubby',\n    'circular',\n    'classic',\n    'clean',\n    'clear',\n    'clear-cut',\n    'clever',\n    'close',\n    'closed',\n    'cloudy',\n    'clueless',\n    'clumsy',\n    'cluttered',\n    'coarse',\n    'cold',\n    'colorful',\n    'colorless',\n    'colossal',\n    'comfortable',\n    'common',\n    'compassionate',\n    'competent',\n    'complete',\n    'complex',\n    'complicated',\n    'composed',\n    'concerned',\n    'concrete',\n    'confused',\n    'conscious',\n    'considerate',\n    'constant',\n    'content',\n    'conventional',\n    'cooked',\n    'cool',\n    'cooperative',\n    'coordinated',\n    'corny',\n    'corrupt',\n    'costly',\n    'courageous',\n    'courteous',\n    'crafty',\n    'crazy',\n    'creamy',\n    'creative',\n    'creepy',\n    'criminal',\n    'crisp',\n    'critical',\n    'crooked',\n    'crowded',\n    'cruel',\n    'crushing',\n    'cuddly',\n    'cultivated',\n    'cultured',\n    'cumbersome',\n    'curly',\n    'curvy',\n    'cute',\n    'cylindrical',\n    'damaged',\n    'damp',\n    'dangerous',\n    'dapper',\n    'daring',\n    'darling',\n    'dark',\n    'dazzling',\n    'dead',\n    'deadly',\n    'deafening',\n    'dear',\n    'dearest',\n    'decent',\n    'decimal',\n    'decisive',\n    'deep',\n    'defenseless',\n    'defensive',\n    'defiant',\n    'deficient',\n    'definite',\n    'definitive',\n    'delayed',\n    'delectable',\n    'delicious',\n    'delightful',\n    'delirious',\n    'demanding',\n    'dense',\n    'dental',\n    'dependable',\n    'dependent',\n    'descriptive',\n    'deserted',\n    'detailed',\n    'determined',\n    'devoted',\n    'different',\n    'difficult',\n    'digital',\n    'diligent',\n    'dim',\n    'dimpled',\n    'dimwitted',\n    'direct',\n    'disastrous',\n    'discrete',\n    'disfigured',\n    'disgusting',\n    'disloyal',\n    'dismal',\n    'distant',\n    'downright',\n    'dreary',\n    'dirty',\n    'disguised',\n    'dishonest',\n    'dismal',\n    'distant',\n    'distinct',\n    'distorted',\n    'dizzy',\n    'dopey',\n    'doting',\n    'double',\n    'downright',\n    'drab',\n    'drafty',\n    'dramatic',\n    'dreary',\n    'droopy',\n    'dry',\n    'dual',\n    'dull',\n    'dutiful',\n    'each',\n    'eager',\n    'earnest',\n    'early',\n    'easy',\n    'easy-going',\n    'ecstatic',\n    'edible',\n    'educated',\n    'elaborate',\n    'elastic',\n    'elated',\n    'elderly',\n    'electric',\n    'elegant',\n    'elementary',\n    'elliptical',\n    'embarrassed',\n    'embellished',\n    'eminent',\n    'emotional',\n    'empty',\n    'enchanted',\n    'enchanting',\n    'energetic',\n    'enlightened',\n    'enormous',\n    'enraged',\n    'entire',\n    'envious',\n    'equal',\n    'equatorial',\n    'essential',\n    'esteemed',\n    'ethical',\n    'euphoric',\n    'even',\n    'evergreen',\n    'everlasting',\n    'every',\n    'evil',\n    'exalted',\n    'excellent',\n    'exemplary',\n    'exhausted',\n    'excitable',\n    'excited',\n    'exciting',\n    'exotic',\n    'expensive',\n    'experienced',\n    'expert',\n    'extraneous',\n    'extroverted',\n    'extra-large',\n    'extra-small',\n    'fabulous',\n    'failing',\n    'faint',\n    'fair',\n    'faithful',\n    'fake',\n    'false',\n    'familiar',\n    'famous',\n    'fancy',\n    'fantastic',\n    'far',\n    'faraway',\n    'far-flung',\n    'far-off',\n    'fast',\n    'fat',\n    'fatal',\n    'fatherly',\n    'favorable',\n    'favorite',\n    'fearful',\n    'fearless',\n    'feisty',\n    'feline',\n    'female',\n    'feminine',\n    'few',\n    'fickle',\n    'filthy',\n    'fine',\n    'finished',\n    'firm',\n    'first',\n    'firsthand',\n    'fitting',\n    'fixed',\n    'flaky',\n    'flamboyant',\n    'flashy',\n    'flat',\n    'flawed',\n    'flawless',\n    'flickering',\n    'flimsy',\n    'flippant',\n    'flowery',\n    'fluffy',\n    'fluid',\n    'flustered',\n    'focused',\n    'fond',\n    'foolhardy',\n    'foolish',\n    'forceful',\n    'forked',\n    'formal',\n    'forsaken',\n    'forthright',\n    'fortunate',\n    'fragrant',\n    'frail',\n    'frank',\n    'frayed',\n    'free',\n    'French',\n    'fresh',\n    'frequent',\n    'friendly',\n    'frightened',\n    'frightening',\n    'frigid',\n    'frilly',\n    'frizzy',\n    'frivolous',\n    'front',\n    'frosty',\n    'frozen',\n    'frugal',\n    'fruitful',\n    'full',\n    'fumbling',\n    'functional',\n    'funny',\n    'fussy',\n    'fuzzy',\n    'gargantuan',\n    'gaseous',\n    'general',\n    'generous',\n    'gentle',\n    'genuine',\n    'giant',\n    'giddy',\n    'gigantic',\n    'gifted',\n    'giving',\n    'glamorous',\n    'glaring',\n    'glass',\n    'gleaming',\n    'gleeful',\n    'glistening',\n    'glittering',\n    'gloomy',\n    'glorious',\n    'glossy',\n    'glum',\n    'golden',\n    'good',\n    'good-natured',\n    'gorgeous',\n    'graceful',\n    'gracious',\n    'grand',\n    'grandiose',\n    'granular',\n    'grateful',\n    'grave',\n    'gray',\n    'great',\n    'greedy',\n    'green',\n    'gregarious',\n    'grim',\n    'grimy',\n    'gripping',\n    'grizzled',\n    'gross',\n    'grotesque',\n    'grouchy',\n    'grounded',\n    'growing',\n    'growling',\n    'grown',\n    'grubby',\n    'gruesome',\n    'grumpy',\n    'guilty',\n    'gullible',\n    'gummy',\n    'hairy',\n    'half',\n    'handmade',\n    'handsome',\n    'handy',\n    'happy',\n    'happy-go-lucky',\n    'hard',\n    'hard-to-find',\n    'harmful',\n    'harmless',\n    'harmonious',\n    'harsh',\n    'hasty',\n    'hateful',\n    'haunting',\n    'healthy',\n    'heartfelt',\n    'hearty',\n    'heavenly',\n    'heavy',\n    'hefty',\n    'helpful',\n    'helpless',\n    'hidden',\n    'hideous',\n    'high',\n    'high-level',\n    'hilarious',\n    'hoarse',\n    'hollow',\n    'homely',\n    'honest',\n    'honorable',\n    'honored',\n    'hopeful',\n    'horrible',\n    'hospitable',\n    'hot',\n    'huge',\n    'humble',\n    'humiliating',\n    'humming',\n    'humongous',\n    'hungry',\n    'hurtful',\n    'husky',\n    'icky',\n    'icy',\n    'ideal',\n    'idealistic',\n    'identical',\n    'idle',\n    'idiotic',\n    'idolized',\n    'ignorant',\n    'ill',\n    'illegal',\n    'ill-fated',\n    'ill-informed',\n    'illiterate',\n    'illustrious',\n    'imaginary',\n    'imaginative',\n    'immaculate',\n    'immaterial',\n    'immediate',\n    'immense',\n    'impassioned',\n    'impeccable',\n    'impartial',\n    'imperfect',\n    'imperturbable',\n    'impish',\n    'impolite',\n    'important',\n    'impossible',\n    'impractical',\n    'impressionable',\n    'impressive',\n    'improbable',\n    'impure',\n    'inborn',\n    'incomparable',\n    'incompatible',\n    'incomplete',\n    'inconsequential',\n    'incredible',\n    'indelible',\n    'inexperienced',\n    'indolent',\n    'infamous',\n    'infantile',\n    'infatuated',\n    'inferior',\n    'infinite',\n    'informal',\n    'innocent',\n    'insecure',\n    'insidious',\n    'insignificant',\n    'insistent',\n    'instructive',\n    'insubstantial',\n    'intelligent',\n    'intent',\n    'intentional',\n    'interesting',\n    'internal',\n    'international',\n    'intrepid',\n    'ironclad',\n    'irresponsible',\n    'irritating',\n    'itchy',\n    'jaded',\n    'jagged',\n    'jam-packed',\n    'jaunty',\n    'jealous',\n    'jittery',\n    'joint',\n    'jolly',\n    'jovial',\n    'joyful',\n    'joyous',\n    'jubilant',\n    'judicious',\n    'juicy',\n    'jumbo',\n    'junior',\n    'jumpy',\n    'juvenile',\n    'kaleidoscopic',\n    'keen',\n    'key',\n    'kind',\n    'kindhearted',\n    'kindly',\n    'klutzy',\n    'knobby',\n    'knotty',\n    'knowledgeable',\n    'knowing',\n    'known',\n    'kooky',\n    'kosher',\n    'lame',\n    'lanky',\n    'large',\n    'last',\n    'lasting',\n    'late',\n    'lavish',\n    'lawful',\n    'lazy',\n    'leading',\n    'lean',\n    'leafy',\n    'left',\n    'legal',\n    'legitimate',\n    'light',\n    'lighthearted',\n    'likable',\n    'likely',\n    'limited',\n    'limp',\n    'limping',\n    'linear',\n    'lined',\n    'liquid',\n    'little',\n    'live',\n    'lively',\n    'livid',\n    'loathsome',\n    'lone',\n    'lonely',\n    'long',\n    'long-term',\n    'loose',\n    'lopsided',\n    'lost',\n    'loud',\n    'lovable',\n    'lovely',\n    'loving',\n    'low',\n    'loyal',\n    'lucky',\n    'lumbering',\n    'luminous',\n    'lumpy',\n    'lustrous',\n    'luxurious',\n    'mad',\n    'made-up',\n    'magnificent',\n    'majestic',\n    'major',\n    'male',\n    'mammoth',\n    'married',\n    'marvelous',\n    'masculine',\n    'massive',\n    'mature',\n    'meager',\n    'mealy',\n    'mean',\n    'measly',\n    'meaty',\n    'medical',\n    'mediocre',\n    'medium',\n    'meek',\n    'mellow',\n    'melodic',\n    'memorable',\n    'menacing',\n    'merry',\n    'messy',\n    'metallic',\n    'mild',\n    'milky',\n    'mindless',\n    'miniature',\n    'minor',\n    'minty',\n    'miserable',\n    'miserly',\n    'misguided',\n    'misty',\n    'mixed',\n    'modern',\n    'modest',\n    'moist',\n    'monstrous',\n    'monthly',\n    'monumental',\n    'moral',\n    'mortified',\n    'motherly',\n    'motionless',\n    'mountainous',\n    'muddy',\n    'muffled',\n    'multicolored',\n    'mundane',\n    'murky',\n    'mushy',\n    'musty',\n    'muted',\n    'mysterious',\n    'naive',\n    'narrow',\n    'nasty',\n    'natural',\n    'naughty',\n    'nautical',\n    'near',\n    'neat',\n    'necessary',\n    'needy',\n    'negative',\n    'neglected',\n    'negligible',\n    'neighboring',\n    'nervous',\n    'new',\n    'next',\n    'nice',\n    'nifty',\n    'nimble',\n    'nippy',\n    'nocturnal',\n    'noisy',\n    'nonstop',\n    'normal',\n    'notable',\n    'noted',\n    'noteworthy',\n    'novel',\n    'noxious',\n    'numb',\n    'nutritious',\n    'nutty',\n    'obedient',\n    'obese',\n    'oblong',\n    'oily',\n    'oblong',\n    'obvious',\n    'occasional',\n    'odd',\n    'oddball',\n    'offbeat',\n    'offensive',\n    'official',\n    'old',\n    'old-fashioned',\n    'only',\n    'open',\n    'optimal',\n    'optimistic',\n    'opulent',\n    'orange',\n    'orderly',\n    'organic',\n    'ornate',\n    'ornery',\n    'ordinary',\n    'original',\n    'other',\n    'our',\n    'outlying',\n    'outgoing',\n    'outlandish',\n    'outrageous',\n    'outstanding',\n    'oval',\n    'overcooked',\n    'overdue',\n    'overjoyed',\n    'overlooked',\n    'palatable',\n    'pale',\n    'paltry',\n    'parallel',\n    'parched',\n    'partial',\n    'passionate',\n    'past',\n    'pastel',\n    'peaceful',\n    'peppery',\n    'perfect',\n    'perfumed',\n    'periodic',\n    'perky',\n    'personal',\n    'pertinent',\n    'pesky',\n    'pessimistic',\n    'petty',\n    'phony',\n    'physical',\n    'piercing',\n    'pink',\n    'pitiful',\n    'plain',\n    'plaintive',\n    'plastic',\n    'playful',\n    'pleasant',\n    'pleased',\n    'pleasing',\n    'plump',\n    'plush',\n    'polished',\n    'polite',\n    'political',\n    'pointed',\n    'pointless',\n    'poised',\n    'poor',\n    'popular',\n    'portly',\n    'posh',\n    'positive',\n    'possible',\n    'potable',\n    'powerful',\n    'powerless',\n    'practical',\n    'precious',\n    'present',\n    'prestigious',\n    'pretty',\n    'precious',\n    'previous',\n    'pricey',\n    'prickly',\n    'primary',\n    'prime',\n    'pristine',\n    'private',\n    'prize',\n    'probable',\n    'productive',\n    'profitable',\n    'profuse',\n    'proper',\n    'proud',\n    'prudent',\n    'punctual',\n    'pungent',\n    'puny',\n    'pure',\n    'purple',\n    'pushy',\n    'putrid',\n    'puzzled',\n    'puzzling',\n    'quaint',\n    'qualified',\n    'quarrelsome',\n    'quarterly',\n    'queasy',\n    'querulous',\n    'questionable',\n    'quick',\n    'quick-witted',\n    'quiet',\n    'quintessential',\n    'quirky',\n    'quixotic',\n    'quizzical',\n    'radiant',\n    'ragged',\n    'rapid',\n    'rare',\n    'rash',\n    'raw',\n    'recent',\n    'reckless',\n    'rectangular',\n    'ready',\n    'real',\n    'realistic',\n    'reasonable',\n    'red',\n    'reflecting',\n    'regal',\n    'regular',\n    'reliable',\n    'relieved',\n    'remarkable',\n    'remorseful',\n    'remote',\n    'repentant',\n    'required',\n    'respectful',\n    'responsible',\n    'repulsive',\n    'revolving',\n    'rewarding',\n    'rich',\n    'rigid',\n    'right',\n    'ringed',\n    'ripe',\n    'roasted',\n    'robust',\n    'rosy',\n    'rotating',\n    'rotten',\n    'rough',\n    'round',\n    'rowdy',\n    'royal',\n    'rubbery',\n    'rundown',\n    'ruddy',\n    'rude',\n    'runny',\n    'rural',\n    'rusty',\n    'sad',\n    'safe',\n    'salty',\n    'same',\n    'sandy',\n    'sane',\n    'sarcastic',\n    'sardonic',\n    'satisfied',\n    'scaly',\n    'scarce',\n    'scared',\n    'scary',\n    'scented',\n    'scholarly',\n    'scientific',\n    'scornful',\n    'scratchy',\n    'scrawny',\n    'second',\n    'secondary',\n    'second-hand',\n    'secret',\n    'self-assured',\n    'self-reliant',\n    'selfish',\n    'sentimental',\n    'separate',\n    'serene',\n    'serious',\n    'serpentine',\n    'several',\n    'severe',\n    'shabby',\n    'shadowy',\n    'shady',\n    'shallow',\n    'shameful',\n    'shameless',\n    'sharp',\n    'shimmering',\n    'shiny',\n    'shocked',\n    'shocking',\n    'shoddy',\n    'short',\n    'short-term',\n    'showy',\n    'shrill',\n    'shy',\n    'sick',\n    'silent',\n    'silky',\n    'silly',\n    'silver',\n    'similar',\n    'simple',\n    'simplistic',\n    'sinful',\n    'single',\n    'sizzling',\n    'skeletal',\n    'skinny',\n    'sleepy',\n    'slight',\n    'slim',\n    'slimy',\n    'slippery',\n    'slow',\n    'slushy',\n    'small',\n    'smart',\n    'smoggy',\n    'smooth',\n    'smug',\n    'snappy',\n    'snarling',\n    'sneaky',\n    'sniveling',\n    'snoopy',\n    'sociable',\n    'soft',\n    'soggy',\n    'solid',\n    'somber',\n    'some',\n    'spherical',\n    'sophisticated',\n    'sore',\n    'sorrowful',\n    'soulful',\n    'soupy',\n    'sour',\n    'Spanish',\n    'sparkling',\n    'sparse',\n    'specific',\n    'spectacular',\n    'speedy',\n    'spicy',\n    'spiffy',\n    'spirited',\n    'spiteful',\n    'splendid',\n    'spotless',\n    'spotted',\n    'spry',\n    'square',\n    'squeaky',\n    'squiggly',\n    'stable',\n    'staid',\n    'stained',\n    'stale',\n    'standard',\n    'starchy',\n    'stark',\n    'starry',\n    'steep',\n    'sticky',\n    'stiff',\n    'stimulating',\n    'stingy',\n    'stormy',\n    'straight',\n    'strange',\n    'steel',\n    'strict',\n    'strident',\n    'striking',\n    'striped',\n    'strong',\n    'studious',\n    'stunning',\n    'stupendous',\n    'stupid',\n    'sturdy',\n    'stylish',\n    'subdued',\n    'submissive',\n    'substantial',\n    'subtle',\n    'suburban',\n    'sudden',\n    'sugary',\n    'sunny',\n    'super',\n    'superb',\n    'superficial',\n    'superior',\n    'supportive',\n    'sure-footed',\n    'surprised',\n    'suspicious',\n    'svelte',\n    'sweaty',\n    'sweet',\n    'sweltering',\n    'swift',\n    'sympathetic',\n    'tall',\n    'talkative',\n    'tame',\n    'tan',\n    'tangible',\n    'tart',\n    'tasty',\n    'tattered',\n    'taut',\n    'tedious',\n    'teeming',\n    'tempting',\n    'tender',\n    'tense',\n    'tepid',\n    'terrible',\n    'terrific',\n    'testy',\n    'thankful',\n    'that',\n    'these',\n    'thick',\n    'thin',\n    'third',\n    'thirsty',\n    'this',\n    'thorough',\n    'thorny',\n    'those',\n    'thoughtful',\n    'threadbare',\n    'thrifty',\n    'thunderous',\n    'tidy',\n    'tight',\n    'timely',\n    'tinted',\n    'tiny',\n    'tired',\n    'torn',\n    'total',\n    'tough',\n    'traumatic',\n    'treasured',\n    'tremendous',\n    'tragic',\n    'trained',\n    'tremendous',\n    'triangular',\n    'tricky',\n    'trifling',\n    'trim',\n    'trivial',\n    'troubled',\n    'true',\n    'trusting',\n    'trustworthy',\n    'trusty',\n    'truthful',\n    'tubby',\n    'turbulent',\n    'twin',\n    'ugly',\n    'ultimate',\n    'unacceptable',\n    'unaware',\n    'uncomfortable',\n    'uncommon',\n    'unconscious',\n    'understated',\n    'unequaled',\n    'uneven',\n    'unfinished',\n    'unfit',\n    'unfolded',\n    'unfortunate',\n    'unhappy',\n    'unhealthy',\n    'uniform',\n    'unimportant',\n    'unique',\n    'united',\n    'unkempt',\n    'unknown',\n    'unlawful',\n    'unlined',\n    'unlucky',\n    'unnatural',\n    'unpleasant',\n    'unrealistic',\n    'unripe',\n    'unruly',\n    'unselfish',\n    'unsightly',\n    'unsteady',\n    'unsung',\n    'untidy',\n    'untimely',\n    'untried',\n    'untrue',\n    'unused',\n    'unusual',\n    'unwelcome',\n    'unwieldy',\n    'unwilling',\n    'unwitting',\n    'unwritten',\n    'upbeat',\n    'upright',\n    'upset',\n    'urban',\n    'usable',\n    'used',\n    'useful',\n    'useless',\n    'utilized',\n    'utter',\n    'vacant',\n    'vague',\n    'vain',\n    'valid',\n    'valuable',\n    'vapid',\n    'variable',\n    'vast',\n    'velvety',\n    'venerated',\n    'vengeful',\n    'verifiable',\n    'vibrant',\n    'vicious',\n    'victorious',\n    'vigilant',\n    'vigorous',\n    'villainous',\n    'violet',\n    'violent',\n    'virtual',\n    'virtuous',\n    'visible',\n    'vital',\n    'vivacious',\n    'vivid',\n    'voluminous',\n    'wan',\n    'warlike',\n    'warm',\n    'warmhearted',\n    'warped',\n    'wary',\n    'wasteful',\n    'watchful',\n    'waterlogged',\n    'watery',\n    'wavy',\n    'wealthy',\n    'weak',\n    'weary',\n    'webbed',\n    'wee',\n    'weekly',\n    'weepy',\n    'weighty',\n    'weird',\n    'welcome',\n    'well-documented',\n    'well-groomed',\n    'well-informed',\n    'well-lit',\n    'well-made',\n    'well-off',\n    'well-to-do',\n    'well-worn',\n    'wet',\n    'which',\n    'whimsical',\n    'whirlwind',\n    'whispered',\n    'white',\n    'whole',\n    'whopping',\n    'wicked',\n    'wide',\n    'wide-eyed',\n    'wiggly',\n    'wild',\n    'willing',\n    'wilted',\n    'winding',\n    'windy',\n    'winged',\n    'wiry',\n    'wise',\n    'witty',\n    'wobbly',\n    'woeful',\n    'wonderful',\n    'wooden',\n    'woozy',\n    'wordy',\n    'worldly',\n    'worn',\n    'worried',\n    'worrisome',\n    'worse',\n    'worst',\n    'worthless',\n    'worthwhile',\n    'worthy',\n    'wrathful',\n    'wretched',\n    'writhing',\n    'wrong',\n    'wry',\n    'yawning',\n    'yearly',\n    'yellow',\n    'yellowish',\n    'young',\n    'youthful',\n    'yummy',\n    'zany',\n    'zealous',\n    'zesty',\n    'zigzag',\n    'rocky',\n  ];\n\n  var name2 = [\n    'people',\n    'history',\n    'way',\n    'art',\n    'world',\n    'information',\n    'map',\n    'family',\n    'government',\n    'health',\n    'system',\n    'computer',\n    'meat',\n    'year',\n    'thanks',\n    'music',\n    'person',\n    'reading',\n    'method',\n    'data',\n    'food',\n    'understanding',\n    'theory',\n    'law',\n    'bird',\n    'literature',\n    'problem',\n    'software',\n    'control',\n    'knowledge',\n    'power',\n    'ability',\n    'economics',\n    'love',\n    'internet',\n    'television',\n    'science',\n    'library',\n    'nature',\n    'fact',\n    'product',\n    'idea',\n    'temperature',\n    'investment',\n    'area',\n    'society',\n    'activity',\n    'story',\n    'industry',\n    'media',\n    'thing',\n    'oven',\n    'community',\n    'definition',\n    'safety',\n    'quality',\n    'development',\n    'language',\n    'management',\n    'player',\n    'variety',\n    'video',\n    'week',\n    'security',\n    'country',\n    'exam',\n    'movie',\n    'organization',\n    'equipment',\n    'physics',\n    'analysis',\n    'policy',\n    'series',\n    'thought',\n    'basis',\n    'boyfriend',\n    'direction',\n    'strategy',\n    'technology',\n    'army',\n    'camera',\n    'freedom',\n    'paper',\n    'environment',\n    'child',\n    'instance',\n    'month',\n    'truth',\n    'marketing',\n    'university',\n    'writing',\n    'article',\n    'department',\n    'difference',\n    'goal',\n    'news',\n    'audience',\n    'fishing',\n    'growth',\n    'income',\n    'marriage',\n    'user',\n    'combination',\n    'failure',\n    'meaning',\n    'medicine',\n    'philosophy',\n    'teacher',\n    'communication',\n    'night',\n    'chemistry',\n    'disease',\n    'disk',\n    'energy',\n    'nation',\n    'road',\n    'role',\n    'soup',\n    'advertising',\n    'location',\n    'success',\n    'addition',\n    'apartment',\n    'education',\n    'math',\n    'moment',\n    'painting',\n    'politics',\n    'attention',\n    'decision',\n    'event',\n    'property',\n    'shopping',\n    'student',\n    'wood',\n    'competition',\n    'distribution',\n    'entertainment',\n    'office',\n    'population',\n    'president',\n    'unit',\n    'category',\n    'cigarette',\n    'context',\n    'introduction',\n    'opportunity',\n    'performance',\n    'driver',\n    'flight',\n    'length',\n    'magazine',\n    'newspaper',\n    'relationship',\n    'teaching',\n    'cell',\n    'dealer',\n    'debate',\n    'finding',\n    'lake',\n    'member',\n    'message',\n    'phone',\n    'scene',\n    'appearance',\n    'association',\n    'concept',\n    'customer',\n    'death',\n    'discussion',\n    'housing',\n    'inflation',\n    'insurance',\n    'mood',\n    'woman',\n    'advice',\n    'blood',\n    'effort',\n    'expression',\n    'importance',\n    'opinion',\n    'payment',\n    'reality',\n    'responsibility',\n    'situation',\n    'skill',\n    'statement',\n    'wealth',\n    'application',\n    'city',\n    'county',\n    'depth',\n    'estate',\n    'foundation',\n    'grandmother',\n    'heart',\n    'perspective',\n    'photo',\n    'recipe',\n    'studio',\n    'topic',\n    'collection',\n    'depression',\n    'imagination',\n    'passion',\n    'percentage',\n    'resource',\n    'setting',\n    'ad',\n    'agency',\n    'college',\n    'connection',\n    'criticism',\n    'debt',\n    'description',\n    'memory',\n    'patience',\n    'secretary',\n    'solution',\n    'administration',\n    'aspect',\n    'attitude',\n    'director',\n    'personality',\n    'psychology',\n    'recommendation',\n    'response',\n    'selection',\n    'storage',\n    'version',\n    'alcohol',\n    'argument',\n    'complaint',\n    'contract',\n    'emphasis',\n    'highway',\n    'loss',\n    'membership',\n    'possession',\n    'preparation',\n    'steak',\n    'union',\n    'agreement',\n    'cancer',\n    'currency',\n    'employment',\n    'engineering',\n    'entry',\n    'interaction',\n    'limit',\n    'mixture',\n    'preference',\n    'region',\n    'republic',\n    'seat',\n    'tradition',\n    'virus',\n    'actor',\n    'classroom',\n    'delivery',\n    'device',\n    'difficulty',\n    'drama',\n    'election',\n    'engine',\n    'football',\n    'guidance',\n    'hotel',\n    'match',\n    'owner',\n    'priority',\n    'protection',\n    'suggestion',\n    'tension',\n    'variation',\n    'anxiety',\n    'atmosphere',\n    'awareness',\n    'bread',\n    'climate',\n    'comparison',\n    'confusion',\n    'construction',\n    'elevator',\n    'emotion',\n    'employee',\n    'employer',\n    'guest',\n    'height',\n    'leadership',\n    'mall',\n    'manager',\n    'operation',\n    'recording',\n    'respect',\n    'sample',\n    'transportation',\n    'boring',\n    'charity',\n    'cousin',\n    'disaster',\n    'editor',\n    'efficiency',\n    'excitement',\n    'extent',\n    'feedback',\n    'guitar',\n    'homework',\n    'leader',\n    'mom',\n    'outcome',\n    'permission',\n    'presentation',\n    'promotion',\n    'reflection',\n    'refrigerator',\n    'resolution',\n    'revenue',\n    'session',\n    'singer',\n    'tennis',\n    'basket',\n    'bonus',\n    'cabinet',\n    'childhood',\n    'church',\n    'clothes',\n    'coffee',\n    'dinner',\n    'drawing',\n    'hair',\n    'hearing',\n    'initiative',\n    'judgment',\n    'lab',\n    'measurement',\n    'mode',\n    'mud',\n    'orange',\n    'poetry',\n    'police',\n    'possibility',\n    'procedure',\n    'queen',\n    'ratio',\n    'relation',\n    'restaurant',\n    'satisfaction',\n    'sector',\n    'signature',\n    'significance',\n    'song',\n    'tooth',\n    'town',\n    'vehicle',\n    'volume',\n    'wife',\n    'accident',\n    'airport',\n    'appointment',\n    'arrival',\n    'assumption',\n    'baseball',\n    'chapter',\n    'committee',\n    'conversation',\n    'database',\n    'enthusiasm',\n    'error',\n    'explanation',\n    'farmer',\n    'gate',\n    'girl',\n    'hall',\n    'historian',\n    'hospital',\n    'injury',\n    'instruction',\n    'maintenance',\n    'manufacturer',\n    'meal',\n    'perception',\n    'pie',\n    'poem',\n    'presence',\n    'proposal',\n    'reception',\n    'replacement',\n    'revolution',\n    'river',\n    'son',\n    'speech',\n    'tea',\n    'village',\n    'warning',\n    'winner',\n    'worker',\n    'writer',\n    'assistance',\n    'breath',\n    'buyer',\n    'chest',\n    'chocolate',\n    'conclusion',\n    'contribution',\n    'cookie',\n    'courage',\n    'desk',\n    'drawer',\n    'establishment',\n    'examination',\n    'garbage',\n    'grocery',\n    'honey',\n    'impression',\n    'improvement',\n    'independence',\n    'insect',\n    'inspection',\n    'inspector',\n    'king',\n    'ladder',\n    'menu',\n    'penalty',\n    'piano',\n    'potato',\n    'profession',\n    'professor',\n    'quantity',\n    'reaction',\n    'requirement',\n    'salad',\n    'sister',\n    'supermarket',\n    'tongue',\n    'weakness',\n    'wedding',\n    'affair',\n    'ambition',\n    'analyst',\n    'apple',\n    'assignment',\n    'assistant',\n    'bathroom',\n    'bedroom',\n    'beer',\n    'birthday',\n    'celebration',\n    'championship',\n    'cheek',\n    'client',\n    'consequence',\n    'departure',\n    'diamond',\n    'dirt',\n    'ear',\n    'fortune',\n    'friendship',\n    'funeral',\n    'gene',\n    'girlfriend',\n    'hat',\n    'indication',\n    'intention',\n    'lady',\n    'midnight',\n    'negotiation',\n    'obligation',\n    'passenger',\n    'pizza',\n    'platform',\n    'poet',\n    'pollution',\n    'recognition',\n    'reputation',\n    'shirt',\n    'speaker',\n    'stranger',\n    'surgery',\n    'sympathy',\n    'tale',\n    'throat',\n    'trainer',\n    'uncle',\n    'youth',\n    'time',\n    'work',\n    'film',\n    'water',\n    'money',\n    'example',\n    'while',\n    'business',\n    'study',\n    'game',\n    'life',\n    'form',\n    'air',\n    'day',\n    'place',\n    'number',\n    'part',\n    'field',\n    'fish',\n    'back',\n    'process',\n    'heat',\n    'hand',\n    'experience',\n    'job',\n    'book',\n    'end',\n    'point',\n    'type',\n    'home',\n    'economy',\n    'value',\n    'body',\n    'market',\n    'guide',\n    'interest',\n    'state',\n    'radio',\n    'course',\n    'company',\n    'price',\n    'size',\n    'card',\n    'list',\n    'mind',\n    'trade',\n    'line',\n    'care',\n    'group',\n    'risk',\n    'word',\n    'fat',\n    'force',\n    'key',\n    'light',\n    'training',\n    'name',\n    'school',\n    'top',\n    'amount',\n    'level',\n    'order',\n    'practice',\n    'research',\n    'sense',\n    'service',\n    'piece',\n    'web',\n    'boss',\n    'sport',\n    'fun',\n    'house',\n    'page',\n    'term',\n    'test',\n    'answer',\n    'sound',\n    'focus',\n    'matter',\n    'kind',\n    'soil',\n    'board',\n    'oil',\n    'picture',\n    'access',\n    'garden',\n    'range',\n    'rate',\n    'reason',\n    'future',\n    'site',\n    'demand',\n    'exercise',\n    'image',\n    'case',\n    'cause',\n    'coast',\n    'action',\n    'age',\n    'bad',\n    'boat',\n    'record',\n    'result',\n    'section',\n    'building',\n    'mouse',\n    'cash',\n    'class',\n    'period',\n    'plan',\n    'store',\n    'tax',\n    'side',\n    'subject',\n    'space',\n    'rule',\n    'stock',\n    'weather',\n    'chance',\n    'figure',\n    'man',\n    'model',\n    'source',\n    'beginning',\n    'earth',\n    'program',\n    'chicken',\n    'design',\n    'feature',\n    'head',\n    'material',\n    'purpose',\n    'question',\n    'rock',\n    'salt',\n    'act',\n    'birth',\n    'car',\n    'dog',\n    'object',\n    'scale',\n    'sun',\n    'note',\n    'profit',\n    'rent',\n    'speed',\n    'style',\n    'war',\n    'bank',\n    'craft',\n    'half',\n    'inside',\n    'outside',\n    'standard',\n    'bus',\n    'exchange',\n    'eye',\n    'fire',\n    'position',\n    'pressure',\n    'stress',\n    'advantage',\n    'benefit',\n    'box',\n    'frame',\n    'issue',\n    'step',\n    'cycle',\n    'face',\n    'item',\n    'metal',\n    'paint',\n    'review',\n    'room',\n    'screen',\n    'structure',\n    'view',\n    'account',\n    'ball',\n    'discipline',\n    'medium',\n    'share',\n    'balance',\n    'bit',\n    'black',\n    'bottom',\n    'choice',\n    'gift',\n    'impact',\n    'machine',\n    'shape',\n    'tool',\n    'wind',\n    'address',\n    'average',\n    'career',\n    'culture',\n    'morning',\n    'pot',\n    'sign',\n    'table',\n    'task',\n    'condition',\n    'contact',\n    'credit',\n    'egg',\n    'hope',\n    'ice',\n    'network',\n    'north',\n    'square',\n    'attempt',\n    'date',\n    'effect',\n    'link',\n    'post',\n    'star',\n    'voice',\n    'capital',\n    'challenge',\n    'friend',\n    'self',\n    'shot',\n    'brush',\n    'couple',\n    'exit',\n    'front',\n    'function',\n    'lack',\n    'living',\n    'plant',\n    'plastic',\n    'spot',\n    'summer',\n    'taste',\n    'theme',\n    'track',\n    'wing',\n    'brain',\n    'button',\n    'click',\n    'desire',\n    'foot',\n    'gas',\n    'influence',\n    'notice',\n    'rain',\n    'wall',\n    'base',\n    'damage',\n    'distance',\n    'feeling',\n    'pair',\n    'savings',\n    'staff',\n    'sugar',\n    'target',\n    'text',\n    'animal',\n    'author',\n    'budget',\n    'discount',\n    'file',\n    'ground',\n    'lesson',\n    'minute',\n    'officer',\n    'phase',\n    'reference',\n    'register',\n    'sky',\n    'stage',\n    'stick',\n    'title',\n    'trouble',\n    'bowl',\n    'bridge',\n    'campaign',\n    'character',\n    'club',\n    'edge',\n    'evidence',\n    'fan',\n    'letter',\n    'lock',\n    'maximum',\n    'novel',\n    'option',\n    'pack',\n    'park',\n    'quarter',\n    'skin',\n    'sort',\n    'weight',\n    'baby',\n    'background',\n    'carry',\n    'dish',\n    'factor',\n    'fruit',\n    'glass',\n    'joint',\n    'master',\n    'muscle',\n    'red',\n    'strength',\n    'traffic',\n    'trip',\n    'vegetable',\n    'appeal',\n    'chart',\n    'gear',\n    'ideal',\n    'kitchen',\n    'land',\n    'log',\n    'mother',\n    'net',\n    'party',\n    'principle',\n    'relative',\n    'sale',\n    'season',\n    'signal',\n    'spirit',\n    'street',\n    'tree',\n    'wave',\n    'belt',\n    'bench',\n    'commission',\n    'copy',\n    'drop',\n    'minimum',\n    'path',\n    'progress',\n    'project',\n    'sea',\n    'south',\n    'status',\n    'stuff',\n    'ticket',\n    'tour',\n    'angle',\n    'blue',\n    'breakfast',\n    'confidence',\n    'daughter',\n    'degree',\n    'doctor',\n    'dot',\n    'dream',\n    'duty',\n    'essay',\n    'father',\n    'fee',\n    'finance',\n    'hour',\n    'juice',\n    'luck',\n    'milk',\n    'mouth',\n    'peace',\n    'pipe',\n    'stable',\n    'storm',\n    'substance',\n    'team',\n    'trick',\n    'afternoon',\n    'bat',\n    'beach',\n    'blank',\n    'catch',\n    'chain',\n    'consideration',\n    'cream',\n    'crew',\n    'detail',\n    'gold',\n    'interview',\n    'kid',\n    'mark',\n    'mission',\n    'pain',\n    'pleasure',\n    'score',\n    'screw',\n    'sex',\n    'shop',\n    'shower',\n    'suit',\n    'tone',\n    'window',\n    'agent',\n    'band',\n    'bath',\n    'block',\n    'bone',\n    'calendar',\n    'candidate',\n    'cap',\n    'coat',\n    'contest',\n    'corner',\n    'court',\n    'cup',\n    'district',\n    'door',\n    'east',\n    'finger',\n    'garage',\n    'guarantee',\n    'hole',\n    'hook',\n    'implement',\n    'layer',\n    'lecture',\n    'lie',\n    'manner',\n    'meeting',\n    'nose',\n    'parking',\n    'partner',\n    'profile',\n    'rice',\n    'routine',\n    'schedule',\n    'swimming',\n    'telephone',\n    'tip',\n    'winter',\n    'airline',\n    'bag',\n    'battle',\n    'bed',\n    'bill',\n    'bother',\n    'cake',\n    'code',\n    'curve',\n    'designer',\n    'dimension',\n    'dress',\n    'ease',\n    'emergency',\n    'evening',\n    'extension',\n    'farm',\n    'fight',\n    'gap',\n    'grade',\n    'holiday',\n    'horror',\n    'horse',\n    'host',\n    'husband',\n    'loan',\n    'mistake',\n    'mountain',\n    'nail',\n    'noise',\n    'occasion',\n    'package',\n    'patient',\n    'pause',\n    'phrase',\n    'proof',\n    'race',\n    'relief',\n    'sand',\n    'sentence',\n    'shoulder',\n    'smoke',\n    'stomach',\n    'string',\n    'tourist',\n    'towel',\n    'vacation',\n    'west',\n    'wheel',\n    'wine',\n    'arm',\n    'aside',\n    'associate',\n    'bet',\n    'blow',\n    'border',\n    'branch',\n    'breast',\n    'brother',\n    'buddy',\n    'bunch',\n    'chip',\n    'coach',\n    'cross',\n    'document',\n    'draft',\n    'dust',\n    'expert',\n    'floor',\n    'god',\n    'golf',\n    'habit',\n    'iron',\n    'judge',\n    'knife',\n    'landscape',\n    'league',\n    'mail',\n    'mess',\n    'native',\n    'opening',\n    'parent',\n    'pattern',\n    'pin',\n    'pool',\n    'pound',\n    'request',\n    'salary',\n    'shame',\n    'shelter',\n    'shoe',\n    'silver',\n    'tackle',\n    'tank',\n    'trust',\n    'assist',\n    'bake',\n    'bar',\n    'bell',\n    'bike',\n    'blame',\n    'boy',\n    'brick',\n    'chair',\n    'closet',\n    'clue',\n    'collar',\n    'comment',\n    'conference',\n    'devil',\n    'diet',\n    'fear',\n    'fuel',\n    'glove',\n    'jacket',\n    'lunch',\n    'monitor',\n    'mortgage',\n    'nurse',\n    'pace',\n    'panic',\n    'peak',\n    'plane',\n    'reward',\n    'row',\n    'sandwich',\n    'shock',\n    'spite',\n    'spray',\n    'surprise',\n    'till',\n    'transition',\n    'weekend',\n    'welcome',\n    'yard',\n    'alarm',\n    'bend',\n    'bicycle',\n    'bite',\n    'blind',\n    'bottle',\n    'cable',\n    'candle',\n    'clerk',\n    'cloud',\n    'concert',\n    'counter',\n    'flower',\n    'grandfather',\n    'harm',\n    'knee',\n    'lawyer',\n    'leather',\n    'load',\n    'mirror',\n    'neck',\n    'pension',\n    'plate',\n    'purple',\n    'ruin',\n    'ship',\n    'skirt',\n    'slice',\n    'snow',\n    'specialist',\n    'stroke',\n    'switch',\n    'trash',\n    'tune',\n    'zone',\n    'anger',\n    'award',\n    'bid',\n    'bitter',\n    'boot',\n    'bug',\n    'camp',\n    'candy',\n    'carpet',\n    'cat',\n    'champion',\n    'channel',\n    'clock',\n    'comfort',\n    'cow',\n    'crack',\n    'engineer',\n    'entrance',\n    'fault',\n    'grass',\n    'guy',\n    'hell',\n    'highlight',\n    'incident',\n    'island',\n    'joke',\n    'jury',\n    'leg',\n    'lip',\n    'mate',\n    'motor',\n    'nerve',\n    'passage',\n    'pen',\n    'pride',\n    'priest',\n    'prize',\n    'promise',\n    'resident',\n    'resort',\n    'ring',\n    'roof',\n    'rope',\n    'sail',\n    'scheme',\n    'script',\n    'sock',\n    'station',\n    'toe',\n    'tower',\n    'truck',\n    'witness',\n    'can',\n    'will',\n    'other',\n    'use',\n    'make',\n    'good',\n    'look',\n    'help',\n    'go',\n    'great',\n    'being',\n    'still',\n    'public',\n    'read',\n    'keep',\n    'start',\n    'give',\n    'human',\n    'local',\n    'general',\n    'specific',\n    'long',\n    'play',\n    'feel',\n    'high',\n    'put',\n    'common',\n    'set',\n    'change',\n    'simple',\n    'past',\n    'big',\n    'possible',\n    'particular',\n    'major',\n    'personal',\n    'current',\n    'national',\n    'cut',\n    'natural',\n    'physical',\n    'show',\n    'try',\n    'check',\n    'second',\n    'call',\n    'move',\n    'pay',\n    'let',\n    'increase',\n    'single',\n    'individual',\n    'turn',\n    'ask',\n    'buy',\n    'guard',\n    'hold',\n    'main',\n    'offer',\n    'potential',\n    'professional',\n    'international',\n    'travel',\n    'cook',\n    'alternative',\n    'special',\n    'working',\n    'whole',\n    'dance',\n    'excuse',\n    'cold',\n    'commercial',\n    'low',\n    'purchase',\n    'deal',\n    'primary',\n    'worth',\n    'fall',\n    'necessary',\n    'positive',\n    'produce',\n    'search',\n    'present',\n    'spend',\n    'talk',\n    'creative',\n    'tell',\n    'cost',\n    'drive',\n    'green',\n    'support',\n    'glad',\n    'remove',\n    'return',\n    'run',\n    'complex',\n    'due',\n    'effective',\n    'middle',\n    'regular',\n    'reserve',\n    'independent',\n    'leave',\n    'original',\n    'reach',\n    'rest',\n    'serve',\n    'watch',\n    'beautiful',\n    'charge',\n    'active',\n    'break',\n    'negative',\n    'safe',\n    'stay',\n    'visit',\n    'visual',\n    'affect',\n    'cover',\n    'report',\n    'rise',\n    'walk',\n    'white',\n    'junior',\n    'pick',\n    'unique',\n    'classic',\n    'final',\n    'lift',\n    'mix',\n    'private',\n    'stop',\n    'teach',\n    'western',\n    'concern',\n    'familiar',\n    'fly',\n    'official',\n    'broad',\n    'comfortable',\n    'gain',\n    'rich',\n    'save',\n    'stand',\n    'young',\n    'heavy',\n    'lead',\n    'listen',\n    'valuable',\n    'worry',\n    'handle',\n    'leading',\n    'meet',\n    'release',\n    'sell',\n    'finish',\n    'normal',\n    'press',\n    'ride',\n    'secret',\n    'spread',\n    'spring',\n    'tough',\n    'wait',\n    'brown',\n    'deep',\n    'display',\n    'flow',\n    'hit',\n    'objective',\n    'shoot',\n    'touch',\n    'cancel',\n    'chemical',\n    'cry',\n    'dump',\n    'extreme',\n    'push',\n    'conflict',\n    'eat',\n    'fill',\n    'formal',\n    'jump',\n    'kick',\n    'opposite',\n    'pass',\n    'pitch',\n    'remote',\n    'total',\n    'treat',\n    'vast',\n    'abuse',\n    'beat',\n    'burn',\n    'deposit',\n    'print',\n    'raise',\n    'sleep',\n    'somewhere',\n    'advance',\n    'consist',\n    'dark',\n    'double',\n    'draw',\n    'equal',\n    'fix',\n    'hire',\n    'internal',\n    'join',\n    'kill',\n    'sensitive',\n    'tap',\n    'win',\n    'attack',\n    'claim',\n    'constant',\n    'drag',\n    'drink',\n    'guess',\n    'minor',\n    'pull',\n    'raw',\n    'soft',\n    'solid',\n    'wear',\n    'weird',\n    'wonder',\n    'annual',\n    'count',\n    'dead',\n    'doubt',\n    'feed',\n    'forever',\n    'impress',\n    'repeat',\n    'round',\n    'sing',\n    'slide',\n    'strip',\n    'wish',\n    'combine',\n    'command',\n    'dig',\n    'divide',\n    'equivalent',\n    'hang',\n    'hunt',\n    'initial',\n    'march',\n    'mention',\n    'spiritual',\n    'survey',\n    'tie',\n    'adult',\n    'brief',\n    'crazy',\n    'escape',\n    'gather',\n    'hate',\n    'prior',\n    'repair',\n    'rough',\n    'sad',\n    'scratch',\n    'sick',\n    'strike',\n    'employ',\n    'external',\n    'hurt',\n    'illegal',\n    'laugh',\n    'lay',\n    'mobile',\n    'nasty',\n    'ordinary',\n    'respond',\n    'royal',\n    'senior',\n    'split',\n    'strain',\n    'struggle',\n    'swim',\n    'train',\n    'upper',\n    'wash',\n    'yellow',\n    'convert',\n    'crash',\n    'dependent',\n    'fold',\n    'funny',\n    'grab',\n    'hide',\n    'miss',\n    'permit',\n    'quote',\n    'recover',\n    'resolve',\n    'roll',\n    'sink',\n    'slip',\n    'spare',\n    'suspect',\n    'sweet',\n    'swing',\n    'twist',\n    'upstairs',\n    'usual',\n    'abroad',\n    'brave',\n    'calm',\n    'concentrate',\n    'estimate',\n    'grand',\n    'male',\n    'mine',\n    'prompt',\n    'quiet',\n    'refuse',\n    'regret',\n    'reveal',\n    'rush',\n    'shake',\n    'shift',\n    'shine',\n    'steal',\n    'suck',\n    'surround',\n    'bear',\n    'brilliant',\n    'dare',\n    'dear',\n    'delay',\n    'drunk',\n    'female',\n    'hurry',\n    'inevitable',\n    'invite',\n    'kiss',\n    'neat',\n    'pop',\n    'punch',\n    'quit',\n    'reply',\n    'representative',\n    'resist',\n    'rip',\n    'rub',\n    'silly',\n    'smile',\n    'spell',\n    'stretch',\n    'stupid',\n    'tear',\n    'temporary',\n    'tomorrow',\n    'wake',\n    'wrap',\n    'yesterday',\n    'Thomas',\n    'Tom',\n    'Lieuwe',\n  ];\n\n  var name =\n    capFirst(name1[getRandomInt(0, name1.length + 1)]) +\n    ' ' +\n    capFirst(name2[getRandomInt(0, name2.length + 1)]);\n  return name;\n}\n","import React, { useState } from 'react';\nimport './UserMenu.css';\nimport { Popup, Button } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\n\nexport const UserMenu = ({\n  user,\n  socket,\n  userToManage,\n  trigger,\n  displayName,\n  position,\n  disabled,\n}: {\n  user?: firebase.User;\n  socket: Socket;\n  userToManage: string;\n  trigger: any;\n  icon?: string;\n  displayName?: string;\n  position?: any;\n  disabled: boolean;\n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const handleOpen = () => setIsOpen(true);\n  const handleClose = () => setIsOpen(false);\n  return (\n    <Popup\n      className=\"userMenu\"\n      trigger={trigger}\n      on=\"click\"\n      open={isOpen}\n      onOpen={handleOpen}\n      onClose={handleClose}\n      position={position}\n      disabled={disabled}\n    >\n      <div className=\"userMenuHeader\">{displayName}</div>\n      <div className=\"userMenuContent\">\n        <Button\n          content=\"Kick\"\n          negative\n          icon=\"ban\"\n          onClick={async () => {\n            const token = await user?.getIdToken();\n            socket.emit('kickUser', {\n              userToBeKicked: userToManage,\n              uid: user?.uid,\n              token,\n            });\n            setIsOpen(false);\n          }}\n        />\n      </div>\n    </Popup>\n  );\n};\n","import React from 'react';\nimport { Button, Comment, Icon, Input } from 'semantic-ui-react';\nimport 'emoji-mart/css/emoji-mart.css';\nimport { EmojiData, Picker } from 'emoji-mart';\nimport onClickOutside from 'react-onclickoutside';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n} from '../../utils';\nimport { Separator } from '../App/App';\nimport { UserMenu } from '../UserMenu/UserMenu';\nimport { Socket } from 'socket.io-client';\nimport firebase from 'firebase/compat/app';\n\ninterface ChatProps {\n  chat: ChatMessage[];\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  socket: Socket;\n  scrollTimestamp: number;\n  className?: string;\n  getMediaDisplayName: Function;\n  hide?: boolean;\n  isChatDisabled?: boolean;\n  user: firebase.User | undefined;\n  owner: string | undefined;\n}\n\nexport class Chat extends React.Component<ChatProps> {\n  public state = { chatMsg: '', isNearBottom: true, isPickerOpen: false };\n  messagesRef = React.createRef<HTMLDivElement>();\n\n  componentDidMount() {\n    this.scrollToBottom();\n    this.messagesRef.current?.addEventListener('scroll', this.onScroll);\n  }\n\n  componentDidUpdate(prevProps: ChatProps) {\n    if (this.props.scrollTimestamp !== prevProps.scrollTimestamp) {\n      if (prevProps.scrollTimestamp === 0 || this.state.isNearBottom) {\n        this.scrollToBottom();\n      }\n    }\n    if (this.props.hide !== prevProps.hide) {\n      this.scrollToBottom();\n    }\n  }\n\n  updateChatMsg = (_e: any, data: { value: string }) => {\n    // console.log(e.target.selectionStart);\n    this.setState({ chatMsg: data.value });\n  };\n\n  sendChatMsg = () => {\n    if (!this.state.chatMsg) {\n      return;\n    }\n    if (this.chatTooLong()) {\n      return;\n    }\n    this.setState({ chatMsg: '' });\n    this.props.socket.emit('CMD:chat', this.state.chatMsg);\n  };\n\n  chatTooLong = () => {\n    return Boolean(this.state.chatMsg?.length > 10000);\n  };\n\n  onScroll = () => {\n    this.setState({ isNearBottom: this.isChatNearBottom() });\n  };\n\n  isChatNearBottom = () => {\n    return (\n      this.messagesRef.current &&\n      this.messagesRef.current.scrollHeight -\n        this.messagesRef.current.scrollTop -\n        this.messagesRef.current.offsetHeight <\n        100\n    );\n  };\n\n  scrollToBottom = () => {\n    if (this.messagesRef.current) {\n      this.messagesRef.current.scrollTop = this.messagesRef.current.scrollHeight;\n    }\n  };\n\n  formatMessage = (cmd: string, msg: string): React.ReactNode | string => {\n    if (cmd === 'host') {\n      return (\n        <React.Fragment>\n          {`changed the video to `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'playlistAdd') {\n      return (\n        <React.Fragment>\n          {`added to the playlist: `}\n          <span style={{ textTransform: 'initial' }}>\n            {this.props.getMediaDisplayName(msg)}\n          </span>\n        </React.Fragment>\n      );\n    } else if (cmd === 'seek') {\n      return `jumped to ${formatTimestamp(msg)}`;\n    } else if (cmd === 'play') {\n      return `started the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'pause') {\n      return `paused the video at ${formatTimestamp(msg)}`;\n    } else if (cmd === 'lock') {\n      return `locked the room`;\n    } else if (cmd === 'unlock') {\n      return 'unlocked the room';\n    } else if (cmd === 'vBrowserTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser shut down automatically.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    } else if (cmd === 'vBrowserAlmostTimeout') {\n      return (\n        <React.Fragment>\n          The VBrowser will shut down soon.\n          <br />\n          Subscribe for longer sessions.\n        </React.Fragment>\n      );\n    }\n    return cmd;\n  };\n\n  addEmoji = (emoji: EmojiData) => {\n    this.setState({ chatMsg: this.state.chatMsg + (emoji as any).native });\n  };\n\n  render() {\n    return (\n      <div\n        className={this.props.className}\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          flexDirection: 'column',\n          flexGrow: 1,\n          minHeight: 0,\n          marginTop: 0,\n          marginBottom: 0,\n          padding: '8px',\n        }}\n      >\n        <div\n          className=\"chatContainer\"\n          ref={this.messagesRef}\n          style={{ position: 'relative' }}\n        >\n          <Comment.Group>\n            {this.props.chat.map((msg) => (\n              <ChatMessage\n                key={msg.timestamp + msg.id}\n                message={msg}\n                pictureMap={this.props.pictureMap}\n                nameMap={this.props.nameMap}\n                formatMessage={this.formatMessage}\n                owner={this.props.owner}\n                user={this.props.user}\n                socket={this.props.socket}\n              />\n            ))}\n            {/* <div ref={this.messagesEndRef} /> */}\n          </Comment.Group>\n          {!this.state.isNearBottom && (\n            <Button\n              size=\"tiny\"\n              onClick={this.scrollToBottom}\n              style={{\n                position: 'sticky',\n                bottom: 0,\n                display: 'block',\n                margin: '0 auto',\n              }}\n            >\n              Jump to bottom\n            </Button>\n          )}\n        </div>\n        <Separator />\n        {this.state.isPickerOpen && (\n          <PickerMenu\n            addEmoji={this.addEmoji}\n            closeMenu={() => this.setState({ isPickerOpen: false })}\n          />\n        )}\n        <Input\n          inverted\n          fluid\n          onKeyPress={(e: any) => e.key === 'Enter' && this.sendChatMsg()}\n          onChange={this.updateChatMsg}\n          value={this.state.chatMsg}\n          error={this.chatTooLong()}\n          icon\n          disabled={this.props.isChatDisabled}\n          placeholder={\n            this.props.isChatDisabled\n              ? 'The chat was disabled by the room owner.'\n              : 'Enter a message...'\n          }\n        >\n          <input />\n          <Icon\n            // style={{ right: '40px' }}\n            onClick={() => this.setState({ isPickerOpen: true })}\n            name={'' as any}\n            inverted\n            circular\n            link\n            disabled={this.props.isChatDisabled}\n            style={{ opacity: 1 }}\n          >\n            <span role=\"img\" aria-label=\"Emoji\">\n              😀\n            </span>\n          </Icon>\n          {/* <Icon onClick={this.sendChatMsg} name=\"send\" inverted circular link /> */}\n        </Input>\n      </div>\n    );\n  }\n}\n\nconst ChatMessage = ({\n  message,\n  nameMap,\n  pictureMap,\n  formatMessage,\n  user,\n  socket,\n  owner,\n}: {\n  message: ChatMessage;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  formatMessage: (cmd: string, msg: string) => React.ReactNode;\n  user: firebase.User | undefined;\n  socket: Socket;\n  owner: string | undefined;\n}) => {\n  const { id, timestamp, cmd, msg, system } = message;\n  return (\n    <Comment>\n      {id ? (\n        <Comment.Avatar\n          src={\n            pictureMap[id] ||\n            getDefaultPicture(nameMap[id], getColorForStringHex(id))\n          }\n        />\n      ) : null}\n      <Comment.Content>\n        <UserMenu\n          displayName={nameMap[id] || id}\n          user={user}\n          socket={socket}\n          userToManage={id}\n          disabled={!Boolean(owner && owner === user?.uid)}\n          trigger={\n            <Comment.Author as=\"a\" className=\"light\">\n              {Boolean(system) && 'System'}\n              {nameMap[id] || id}\n            </Comment.Author>\n          }\n        />\n        <Comment.Metadata className=\"dark\">\n          <div>{new Date(timestamp).toLocaleTimeString()}</div>\n        </Comment.Metadata>\n        <Comment.Text className=\"light system\">\n          {cmd && formatMessage(cmd, msg)}\n        </Comment.Text>\n        <Comment.Text className=\"light\">{!cmd && msg}</Comment.Text>\n      </Comment.Content>\n    </Comment>\n  );\n};\n\nclass PickerMenuInner extends React.Component<{\n  addEmoji: (emoji: EmojiData) => void;\n  closeMenu: Function;\n}> {\n  handleClickOutside = () => {\n    this.props.closeMenu();\n  };\n  render() {\n    return (\n      <div style={{ position: 'absolute', bottom: '60px' }}>\n        <Picker\n          set=\"google\"\n          sheetSize={64}\n          theme=\"dark\"\n          showPreview={false}\n          showSkinTones={false}\n          onSelect={this.props.addEmoji}\n        />\n      </div>\n    );\n  }\n}\n\nconst PickerMenu = onClickOutside(PickerMenuInner);\n","import React from 'react';\nimport { Modal, Button, Form, Message } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nexport class LoginModal extends React.Component<{\n  closeLogin: Function;\n}> {\n  public state = { email: '', password: '', isCreateMode: false, error: '' };\n\n  resetPassword = async () => {\n    try {\n      await firebase.auth().sendPasswordResetEmail(this.state.email);\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailSignIn = async (email: string, password: string) => {\n    try {\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  createAccount = async (email: string, password: string) => {\n    try {\n      await firebase.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailLinkSignIn = async () => {\n    await firebase.auth().sendSignInLinkToEmail(this.state.email, {\n      url: window.location.href,\n      handleCodeInApp: true,\n    });\n  };\n\n  render() {\n    const { closeLogin } = this.props;\n    return (\n      <Modal open={true} onClose={closeLogin as any}>\n        <Modal.Header>\n          {this.state.isCreateMode ? 'Create an account' : 'Login'}\n        </Modal.Header>\n        <Modal.Content>\n          {this.state.error && (\n            <Message color=\"red\" header=\"Error\" content={this.state.error} />\n          )}\n          <Form>\n            <Form.Field>\n              <label>Email</label>\n              <input\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={(e) => this.setState({ password: e.target.value })}\n              />\n            </Form.Field>\n            {!this.state.isCreateMode && (\n              <div>\n                Don't have an account?{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={() => this.setState({ isCreateMode: true })}\n                >\n                  Create one.\n                </button>{' '}\n                Forgot your password? Enter your email and{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={this.resetPassword}\n                >\n                  reset it.\n                </button>\n              </div>\n            )}\n            {this.state.isCreateMode ? (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.createAccount(this.state.email, this.state.password)\n                }\n              >\n                Create\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.emailSignIn(this.state.email, this.state.password)\n                }\n              >\n                Login\n              </Button>\n            )}\n          </Form>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Header, Table, Button, Icon } from 'semantic-ui-react';\nimport { loadStripe } from '@stripe/stripe-js';\nimport { SignInButton } from '../TopBar/TopBar';\nimport firebase from 'firebase/compat/app';\n\n// Make sure to call `loadStripe` outside of a component’s render to avoid\n// recreating the `Stripe` object on every render.\nconst stripePromise = process.env.REACT_APP_STRIPE_PUBLIC_KEY\n  ? loadStripe(process.env.REACT_APP_STRIPE_PUBLIC_KEY as string)\n  : null;\n\nexport class SubscribeModal extends React.Component<{\n  closeSubscribe: Function;\n  user?: firebase.User;\n  isSubscriber: boolean;\n}> {\n  onSubscribe = async () => {\n    if (!stripePromise) {\n      console.warn('Stripe integration is not configured, cannot subscribe');\n      return;\n    }\n    const stripe = await stripePromise;\n    const result = await stripe?.redirectToCheckout({\n      lineItems: [\n        {\n          price:\n            process.env.NODE_ENV === 'development'\n              ? 'price_HNGtabCzD5qyfd'\n              : 'price_HNDBoPDI7yYRi9',\n          quantity: 1,\n        },\n      ] as any,\n      mode: 'subscription',\n      successUrl: window.location.href,\n      cancelUrl: window.location.href,\n      customerEmail: this.props.user?.email,\n      clientReferenceId: this.props.user?.uid,\n    } as any);\n    // If `redirectToCheckout` fails due to a browser or network\n    // error, display the localized error message to your customer\n    // using `error.message`.\n    if (result && result.error) {\n      console.error(result.error.message);\n    }\n  };\n  render() {\n    if (this.props.isSubscriber) {\n      this.props.closeSubscribe();\n      return null;\n    }\n    const { closeSubscribe } = this.props;\n    return (\n      <Modal open={true} onClose={closeSubscribe as any}>\n        <Modal.Header>Subscribe to WatchParty Plus</Modal.Header>\n        <Modal.Content image>\n          {/* <Image wrapped size='medium' src='https://react.semantic-ui.com/images/avatar/large/rachel.png' /> */}\n          <Modal.Description>\n            <div>\n              Subscriptions help us maintain the service and build new features!\n              Please consider supporting us if you're enjoying WatchParty.\n            </div>\n            <Header>Features</Header>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                  <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                {/* Priority support */}\n                <Table.Row>\n                  <Table.Cell>\n                    Basic (Synchronized watching, chat, screenshare)\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Access</Table.Cell>\n                  <Table.Cell>When capacity allows</Table.Cell>\n                  <Table.Cell>Anytime</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Resolution</Table.Cell>\n                  <Table.Cell>720p</Table.Cell>\n                  <Table.Cell>1080p</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                  <Table.Cell>Standard</Table.Cell>\n                  <Table.Cell>Extra</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>VBrowser Session Length</Table.Cell>\n                  <Table.Cell>3 hours</Table.Cell>\n                  <Table.Cell>24 hours</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Number of Permanent Rooms</Table.Cell>\n                  <Table.Cell>1</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity</Table.Cell>\n                  <Table.Cell>20</Table.Cell>\n                  <Table.Cell>100</Table.Cell>\n                </Table.Row> */}\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Discord Subscriber Role (on request)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Price</Table.Cell>\n                  <Table.Cell>$0 / month</Table.Cell>\n                  <Table.Cell>$5 / month</Table.Cell>\n                </Table.Row>\n              </Table.Body>\n            </Table>\n            <div style={{ textAlign: 'right' }}>\n              {/* if user isn't logged in, provide login prompt */}\n              {this.props.user && this.props.user.email ? (\n                <Button\n                  icon\n                  labelPosition=\"left\"\n                  color=\"blue\"\n                  size=\"large\"\n                  onClick={this.onSubscribe}\n                >\n                  <Icon name=\"cc stripe\" />\n                  Subscribe with Stripe\n                </Button>\n              ) : (\n                <div>\n                  Please sign in to subscribe: <SignInButton user={undefined} />\n                </div>\n              )}\n            </div>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useCallback, useState } from 'react';\nimport { Button, Icon, Popup } from 'semantic-ui-react';\nimport { serverPath } from '../../utils';\nimport { SubscribeModal } from '../Modal/SubscribeModal';\nimport firebase from 'firebase/compat/app';\n\nexport const SubscribeButton = ({\n  user,\n  isSubscriber,\n  isCustomer,\n}: {\n  user: firebase.User | undefined;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}) => {\n  const [isSubscribeModalOpen, setIsSubscribeModalOpen] = useState(false);\n  const onManage = useCallback(async () => {\n    const resp = await window.fetch(serverPath + '/manageSub', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid: user?.uid,\n        token: await user?.getIdToken(),\n        return_url: window.location.href,\n      }),\n    });\n    const session = await resp.json();\n    console.log(session);\n    window.location.assign(session.url);\n  }, [user]);\n  return (\n    <>\n      {isSubscribeModalOpen && (\n        <SubscribeModal\n          user={user}\n          isSubscriber={isSubscriber}\n          closeSubscribe={() => setIsSubscribeModalOpen(false)}\n        />\n      )}\n      {!isSubscriber && (\n        <Popup\n          content=\"Subscribe to help support us and enable additional features!\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => setIsSubscribeModalOpen(true)}\n            >\n              <Icon name=\"plus\" />\n              Subscribe\n            </Button>\n          }\n        />\n      )}\n      {isSubscriber && (\n        <Popup\n          content=\"Manage your subscription\"\n          trigger={\n            <Button\n              fluid\n              color=\"orange\"\n              className=\"toolButton\"\n              icon\n              labelPosition=\"left\"\n              onClick={onManage}\n            >\n              <Icon name=\"wrench\" />\n              Manage\n            </Button>\n          }\n        />\n      )}\n    </>\n  );\n};\n","import React from 'react';\nimport { Modal, Button, Icon, Image } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nexport class ProfileModal extends React.Component<{\n  close: Function;\n  user: firebase.User;\n  userImage: string | null;\n}> {\n  public state = { resetDisabled: false };\n\n  onSignOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  resetPassword = async () => {\n    try {\n      if (this.props.user.email) {\n        await firebase.auth().sendPasswordResetEmail(this.props.user.email);\n        this.setState({ resetDisabled: true });\n      }\n    } catch (e) {\n      console.warn(e);\n    }\n  };\n\n  render() {\n    const { close, userImage } = this.props;\n    return (\n      <Modal open={true} onClose={close as any}>\n        <Modal.Header>\n          <Image avatar src={userImage} />\n          {this.props.user.email}\n        </Modal.Header>\n        <Modal.Content>\n          <div\n            style={{\n              width: '300px',\n              display: 'flex',\n              alignItems: 'center',\n              flexDirection: 'column',\n              gap: '10px',\n            }}\n          >\n            <Button\n              icon\n              labelPosition=\"left\"\n              fluid\n              href=\"https://gravatar.com\"\n              target=\"_blank\"\n              color=\"blue\"\n            >\n              <Icon name=\"image\" />\n              Edit Gravatar\n            </Button>\n            <Button\n              disabled={this.state.resetDisabled}\n              icon\n              labelPosition=\"left\"\n              fluid\n              color=\"green\"\n              onClick={this.resetPassword}\n            >\n              <Icon name=\"key\" />\n              Reset Password\n            </Button>\n            <Button\n              icon\n              labelPosition=\"left\"\n              onClick={this.onSignOut}\n              color=\"red\"\n              fluid\n            >\n              <Icon name=\"sign out\" />\n              Sign out\n            </Button>\n          </div>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { serverPath, colorMappings, getUserImage } from '../../utils';\nimport { Icon, Popup, Button, Dropdown, Image } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\nimport { LoginModal } from '../Modal/LoginModal';\nimport axios from 'axios';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ProfileModal } from '../Modal/ProfileModal';\n\nexport class NewRoomButton extends React.Component<{\n  user: firebase.User | undefined;\n  size?: string;\n  openNewTab?: boolean;\n}> {\n  createRoom = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    const response = await window.fetch(serverPath + '/createRoom', {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/json',\n      },\n      body: JSON.stringify({\n        uid,\n        token,\n      }),\n    });\n    const data = await response.json();\n    const { name } = data;\n    if (this.props.openNewTab) {\n      window.open('/#' + name);\n    } else {\n      window.location.assign('/#' + name);\n    }\n  };\n  render() {\n    return (\n      <Popup\n        content=\"Create a new room with a random URL that you can share with friends\"\n        trigger={\n          <Button\n            color=\"blue\"\n            size={this.props.size as any}\n            icon\n            labelPosition=\"left\"\n            onClick={this.createRoom}\n            className=\"toolButton\"\n            fluid\n          >\n            <Icon name=\"certificate\" />\n            New Room\n          </Button>\n        }\n      />\n    );\n  }\n}\n\ntype SignInButtonProps = {\n  user: firebase.User | undefined;\n  fluid?: boolean;\n};\n\nexport class SignInButton extends React.Component<SignInButtonProps> {\n  public state = { isLoginOpen: false, isProfileOpen: false, userImage: null };\n\n  async componentDidUpdate(prevProps: SignInButtonProps) {\n    if (!prevProps.user && this.props.user) {\n      this.setState({ userImage: await getUserImage(this.props.user) });\n    }\n  }\n\n  facebookSignIn = async () => {\n    const provider = new firebase.auth.FacebookAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  googleSignIn = async () => {\n    const provider = new firebase.auth.GoogleAuthProvider();\n    await firebase.auth().signInWithPopup(provider);\n  };\n\n  signOut = () => {\n    firebase.auth().signOut();\n    window.location.reload();\n  };\n\n  render() {\n    if (this.props.user) {\n      return (\n        <div\n          style={{\n            margin: '4px',\n            width: '100px',\n            alignItems: 'center',\n            cursor: 'pointer',\n          }}\n        >\n          <Image\n            avatar\n            src={this.state.userImage}\n            onClick={() => this.setState({ isProfileOpen: true })}\n          />\n          {this.state.isProfileOpen && this.props.user && (\n            <ProfileModal\n              user={this.props.user}\n              userImage={this.state.userImage}\n              close={() => this.setState({ isProfileOpen: false })}\n            />\n          )}\n        </div>\n      );\n    }\n    return (\n      <React.Fragment>\n        {this.state.isLoginOpen && (\n          <LoginModal\n            closeLogin={() => this.setState({ isLoginOpen: false })}\n          />\n        )}\n        <Popup\n          basic\n          content=\"Sign in to set your name and picture, subscribe, or launch VBrowsers\"\n          trigger={\n            <Dropdown\n              style={{ height: '36px' }}\n              icon=\"sign in\"\n              labeled\n              className=\"icon\"\n              button\n              text=\"Sign in\"\n              fluid={this.props.fluid}\n            >\n              <Dropdown.Menu>\n                <Dropdown.Item onClick={this.facebookSignIn}>\n                  <Icon name=\"facebook\" />\n                  Facebook\n                </Dropdown.Item>\n                <Dropdown.Item onClick={this.googleSignIn}>\n                  <Icon name=\"google\" />\n                  Google\n                </Dropdown.Item>\n                <Dropdown.Item\n                  onClick={() => this.setState({ isLoginOpen: true })}\n                >\n                  <Icon name=\"mail\" />\n                  Email\n                </Dropdown.Item>\n              </Dropdown.Menu>\n            </Dropdown>\n          }\n        />\n      </React.Fragment>\n    );\n  }\n}\n\nexport class ListRoomsButton extends React.Component<{\n  user: firebase.User | undefined;\n}> {\n  public state = { rooms: [] as PersistentRoom[] };\n\n  componentDidMount() {\n    this.refreshRooms();\n  }\n\n  refreshRooms = async () => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      const response = await axios.get(\n        serverPath + `/listRooms?uid=${this.props.user?.uid}&token=${token}`\n      );\n      this.setState({ rooms: response.data });\n    }\n  };\n\n  deleteRoom = async (roomId: string) => {\n    if (this.props.user) {\n      const token = await this.props.user.getIdToken();\n      await axios.delete(\n        serverPath +\n          `/deleteRoom?uid=${this.props.user?.uid}&token=${token}&roomId=${roomId}`\n      );\n      this.setState({\n        rooms: this.state.rooms.filter((room) => room.roomId !== roomId),\n      });\n      this.refreshRooms();\n    }\n  };\n\n  render() {\n    return (\n      <Dropdown\n        style={{ height: '36px' }}\n        icon=\"group\"\n        labeled\n        className=\"icon\"\n        button\n        text=\"My Rooms\"\n        onClick={this.refreshRooms}\n        scrolling\n      >\n        <Dropdown.Menu>\n          {this.state.rooms.length === 0 && (\n            <Dropdown.Item disabled>You have no permanent rooms.</Dropdown.Item>\n          )}\n          {this.state.rooms.map((room: any) => {\n            return (\n              <Dropdown.Item\n                link\n                href={\n                  room.vanity\n                    ? '/r/' + room.vanity\n                    : '/' + room.roomId.replace('/', '#')\n                }\n                onClick={() => {\n                  if (!room.vanity) {\n                    setTimeout(() => window.location.reload(), 100);\n                  }\n                }}\n              >\n                <div style={{ display: 'flex', alignItems: 'center' }}>\n                  {room.vanity\n                    ? `/r/${room.vanity}`\n                    : room.roomId.replace('/', '#')}\n                  <div style={{ marginLeft: 'auto', paddingLeft: '20px' }}>\n                    <Button\n                      icon\n                      onClick={(e: React.MouseEvent) => {\n                        e.stopPropagation();\n                        e.nativeEvent.stopImmediatePropagation();\n                        this.deleteRoom(room.roomId);\n                      }}\n                      color=\"red\"\n                      size=\"mini\"\n                    >\n                      <Icon name=\"trash\" />\n                    </Button>\n                  </div>\n                </div>\n              </Dropdown.Item>\n            );\n          })}\n        </Dropdown.Menu>\n      </Dropdown>\n    );\n  }\n}\n\nexport class TopBar extends React.Component<{\n  user?: firebase.User;\n  hideNewRoom?: boolean;\n  hideSignin?: boolean;\n  hideMyRooms?: boolean;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}> {\n  render() {\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber ?? false}\n        isCustomer={this.props.isCustomer ?? false}\n      />\n    );\n    return (\n      <React.Fragment>\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            padding: '1em',\n            paddingBottom: '0px',\n          }}\n        >\n          <a href=\"/\" style={{ display: 'flex' }}>\n            <div\n              style={{\n                height: '48px',\n                width: '48px',\n                marginRight: '10px',\n                borderRadius: '50%',\n                position: 'relative',\n                backgroundColor: '#' + colorMappings.blue,\n              }}\n            >\n              <Icon\n                inverted\n                name=\"film\"\n                size=\"large\"\n                style={{\n                  position: 'absolute',\n                  top: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n              <Icon\n                inverted\n                name=\"group\"\n                size=\"large\"\n                color=\"green\"\n                style={{\n                  position: 'absolute',\n                  bottom: 8,\n                  width: '100%',\n                  margin: '0 auto',\n                }}\n              />\n            </div>\n            <div\n              style={{\n                display: 'flex',\n                alignItems: 'center',\n              }}\n            >\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#2185d0',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                }}\n              >\n                Watch\n              </div>\n              <div\n                style={{\n                  textTransform: 'uppercase',\n                  fontWeight: 700,\n                  color: '#21ba45',\n                  fontSize: '30px',\n                  lineHeight: '30px',\n                  marginLeft: 'auto',\n                }}\n              >\n                Party\n              </div>\n            </div>\n          </a>\n          <div\n            style={{\n              display: 'flex',\n              marginLeft: '10px',\n              alignItems: 'center',\n            }}\n          >\n            <a\n              href=\"https://discord.gg/3rYj5HV\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"Discord\"\n            >\n              <Icon name=\"discord\" size=\"big\" link />\n            </a>\n            <a\n              href=\"https://github.com/howardchung/watchparty\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n              className=\"footerIcon\"\n              title=\"GitHub\"\n            >\n              <Icon name=\"github\" size=\"big\" link />\n            </a>\n          </div>\n          <div\n            className=\"mobileStack\"\n            style={{\n              display: 'flex',\n              marginLeft: 'auto',\n              gap: '4px',\n            }}\n          >\n            {!this.props.hideNewRoom && (\n              <NewRoomButton user={this.props.user} openNewTab />\n            )}\n            {!this.props.hideMyRooms && this.props.user && (\n              <ListRoomsButton user={this.props.user} />\n            )}\n            {subscribeButton}\n            {!this.props.hideSignin && <SignInButton user={this.props.user} />}\n          </div>\n        </div>\n      </React.Fragment>\n    );\n  }\n}\n","export const OPCODE = {\n  MOVE: 0x01,\n  SCROLL: 0x02,\n  KEY_DOWN: 0x03,\n  KEY_UP: 0x04,\n} as const;\n","export const EVENT = {\n  // Internal Events\n  CONNECTING: 'CONNECTING',\n  CONNECTED: 'CONNECTED',\n  DISCONNECTED: 'DISCONNECTED',\n  TRACK: 'TRACK',\n  MESSAGE: 'MESSAGE',\n  DATA: 'DATA',\n\n  // Websocket Events\n  SYSTEM: {\n    DISCONNECT: 'system/disconnect',\n  },\n  SIGNAL: {\n    ANSWER: 'signal/answer',\n    PROVIDE: 'signal/provide',\n  },\n  MEMBER: {\n    LIST: 'member/list',\n    CONNECTED: 'member/connected',\n    DISCONNECTED: 'member/disconnected',\n  },\n  CONTROL: {\n    LOCKED: 'control/locked',\n    RELEASE: 'control/release',\n    REQUEST: 'control/request',\n    REQUESTING: 'control/requesting',\n    CLIPBOARD: 'control/clipboard',\n    GIVE: 'control/give',\n  },\n  CHAT: {\n    MESSAGE: 'chat/message',\n    EMOTE: 'chat/emote',\n  },\n  SCREEN: {\n    CONFIGURATIONS: 'screen/configurations',\n    RESOLUTION: 'screen/resolution',\n    SET: 'screen/set',\n  },\n  ADMIN: {\n    BAN: 'admin/ban',\n    KICK: 'admin/kick',\n    LOCK: 'admin/lock',\n    UNLOCK: 'admin/unlock',\n    MUTE: 'admin/mute',\n    UNMUTE: 'admin/unmute',\n    CONTROL: 'admin/control',\n    RELEASE: 'admin/release',\n    GIVE: 'admin/give',\n  },\n} as const;\n\nexport type Events = typeof EVENT;\n\nexport type WebSocketEvents =\n  | SystemEvents\n  | ControlEvents\n  | MemberEvents\n  | SignalEvents\n  | ChatEvents\n  | ScreenEvents\n  | AdminEvents\n  | 'ka';\n\nexport type ControlEvents =\n  | typeof EVENT.CONTROL.LOCKED\n  | typeof EVENT.CONTROL.RELEASE\n  | typeof EVENT.CONTROL.REQUEST\n  | typeof EVENT.CONTROL.GIVE\n  | typeof EVENT.CONTROL.CLIPBOARD;\n\nexport type SystemEvents = typeof EVENT.SYSTEM.DISCONNECT;\nexport type MemberEvents =\n  | typeof EVENT.MEMBER.LIST\n  | typeof EVENT.MEMBER.CONNECTED\n  | typeof EVENT.MEMBER.DISCONNECTED;\nexport type SignalEvents =\n  | typeof EVENT.SIGNAL.ANSWER\n  | typeof EVENT.SIGNAL.PROVIDE;\nexport type ChatEvents = typeof EVENT.CHAT.MESSAGE | typeof EVENT.CHAT.EMOTE;\nexport type ScreenEvents =\n  | typeof EVENT.SCREEN.CONFIGURATIONS\n  | typeof EVENT.SCREEN.RESOLUTION\n  | typeof EVENT.SCREEN.SET;\n\nexport type AdminEvents =\n  | typeof EVENT.ADMIN.BAN\n  | typeof EVENT.ADMIN.KICK\n  | typeof EVENT.ADMIN.LOCK\n  | typeof EVENT.ADMIN.UNLOCK\n  | typeof EVENT.ADMIN.MUTE\n  | typeof EVENT.ADMIN.UNMUTE\n  | typeof EVENT.ADMIN.CONTROL\n  | typeof EVENT.ADMIN.RELEASE\n  | typeof EVENT.ADMIN.GIVE;\n","import EventEmitter from 'eventemitter3';\n\nimport { iceServers } from '../../utils';\nimport { OPCODE } from './data';\nimport { EVENT, WebSocketEvents } from './events';\nimport {\n  SignalProvidePayload,\n  WebSocketMessages,\n  WebSocketPayloads,\n} from './messages';\n\nexport abstract class BaseClient extends EventEmitter<any> {\n  protected _ws?: WebSocket;\n  protected _peer?: RTCPeerConnection;\n  protected _channel?: RTCDataChannel;\n  protected _timeout?: NodeJS.Timeout;\n  protected _displayname?: string;\n  protected _state: RTCIceConnectionState = 'disconnected';\n  protected _id = '';\n\n  get id() {\n    return this._id;\n  }\n\n  get supported() {\n    return (\n      typeof RTCPeerConnection !== 'undefined' &&\n      typeof RTCPeerConnection.prototype.addTransceiver !== 'undefined'\n    );\n  }\n\n  get socketOpen() {\n    return (\n      typeof this._ws !== 'undefined' && this._ws.readyState === WebSocket.OPEN\n    );\n  }\n\n  get peerConnected() {\n    return (\n      typeof this._peer !== 'undefined' &&\n      ['connected', 'checking', 'completed'].includes(this._state)\n    );\n  }\n\n  get connected() {\n    return this.peerConnected && this.socketOpen;\n  }\n\n  public connect(url: string, password: string, displayname: string) {\n    if (this.socketOpen) {\n      this.emit('warn', `attempting to create websocket while connection open`);\n      return;\n    }\n\n    if (!this.supported) {\n      this.onDisconnected(\n        new Error('browser does not support webrtc (RTCPeerConnection missing)')\n      );\n      return;\n    }\n\n    if (displayname === '') {\n      throw new Error('Must add a displayname');\n    }\n\n    this._displayname = displayname;\n    this[EVENT.CONNECTING]();\n\n    try {\n      this._ws = new WebSocket(`${url}ws?password=${password}`);\n      this.emit('debug', `connecting to ${this._ws.url}`);\n      this._ws.onmessage = this.onMessage.bind(this);\n      this._ws.onerror = (event) => this.onError.bind(this);\n      this._ws.onclose = (event) =>\n        this.onDisconnected.bind(this, new Error('websocket closed'));\n      this._timeout = setTimeout(this.onTimeout.bind(this), 15000);\n    } catch (err: any) {\n      this.onDisconnected(err);\n    }\n  }\n\n  protected disconnect() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (this.socketOpen) {\n      try {\n        this._ws!.close();\n      } catch (err) {}\n      this._ws = undefined;\n    }\n\n    if (this.peerConnected) {\n      try {\n        this._peer!.close();\n      } catch (err) {}\n      this._peer = undefined;\n    }\n\n    this._state = 'disconnected';\n    this._displayname = undefined;\n    this._id = '';\n  }\n\n  public sendData(\n    event: 'wheel' | 'mousemove',\n    data: { x: number; y: number }\n  ): void;\n  public sendData(\n    event: 'mousedown' | 'mouseup' | 'keydown' | 'keyup',\n    data: { key: number }\n  ): void;\n  public sendData(event: string, data: any) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send data while disconnected`);\n      return;\n    }\n\n    let buffer: ArrayBuffer;\n    let payload: DataView;\n    switch (event) {\n      case 'mousemove':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.MOVE);\n        payload.setUint16(1, 4, true);\n        payload.setUint16(3, data.x, true);\n        payload.setUint16(5, data.y, true);\n        break;\n      case 'wheel':\n        buffer = new ArrayBuffer(7);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.SCROLL);\n        payload.setUint16(1, 4, true);\n        payload.setInt16(3, data.x, true);\n        payload.setInt16(5, data.y, true);\n        break;\n      case 'keydown':\n      case 'mousedown':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_DOWN);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      case 'keyup':\n      case 'mouseup':\n        buffer = new ArrayBuffer(5);\n        payload = new DataView(buffer);\n        payload.setUint8(0, OPCODE.KEY_UP);\n        payload.setUint16(1, 1, true);\n        payload.setUint16(3, data.key, true);\n        break;\n      default:\n        this.emit('warn', `unknown data event: ${event}`);\n    }\n\n    // @ts-ignore\n    if (typeof buffer !== 'undefined') {\n      this._channel!.send(buffer);\n    }\n  }\n\n  public sendMessage(event: WebSocketEvents, payload?: WebSocketPayloads) {\n    if (!this.connected) {\n      this.emit('warn', `attempting to send message while disconnected`);\n      return;\n    }\n    this.emit(\n      'debug',\n      `sending event '${event}' ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n    this._ws!.send(JSON.stringify({ event, ...payload }));\n  }\n\n  public createPeer(sdp: string, lite: boolean, servers: string[]) {\n    this.emit('debug', `creating peer`);\n    if (!this.socketOpen) {\n      this.emit(\n        'warn',\n        `attempting to create peer with no websocket: `,\n        this._ws ? `state: ${this._ws.readyState}` : 'no socket'\n      );\n      return;\n    }\n\n    if (this.peerConnected) {\n      this.emit('warn', `attempting to create peer while connected`);\n      return;\n    }\n\n    this._peer = new RTCPeerConnection();\n    if (lite !== true) {\n      this._peer = new RTCPeerConnection({\n        iceServers: servers ? [{ urls: servers }] : iceServers(),\n      });\n    }\n\n    this._peer.onconnectionstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer connection state changed`,\n        this._peer ? this._peer.connectionState : undefined\n      );\n    };\n\n    this._peer.onsignalingstatechange = (event) => {\n      this.emit(\n        'debug',\n        `peer signaling state changed`,\n        this._peer ? this._peer.signalingState : undefined\n      );\n    };\n\n    this._peer.oniceconnectionstatechange = (event) => {\n      this._state = this._peer!.iceConnectionState;\n\n      this.emit(\n        'debug',\n        `peer ice connection state changed: ${this._peer!.iceConnectionState}`\n      );\n\n      switch (this._state) {\n        case 'checking':\n          if (this._timeout) {\n            clearTimeout(this._timeout);\n          }\n          break;\n        case 'connected':\n          this.onConnected();\n          break;\n        case 'failed':\n          this.onDisconnected(new Error('peer failed'));\n          break;\n        case 'disconnected':\n          this.onDisconnected(new Error('peer disconnected'));\n          break;\n      }\n    };\n\n    this._peer.ontrack = this.onTrack.bind(this);\n    this._peer.addTransceiver('audio', { direction: 'recvonly' });\n    this._peer.addTransceiver('video', { direction: 'recvonly' });\n\n    this._channel = this._peer.createDataChannel('data');\n    this._channel.onerror = this.onError.bind(this);\n    this._channel.onmessage = this.onData.bind(this);\n    this._channel.onclose = this.onDisconnected.bind(\n      this,\n      new Error('peer data channel closed')\n    );\n\n    this._peer.setRemoteDescription({ type: 'offer', sdp });\n    this._peer\n      .createAnswer()\n      .then((d) => {\n        this._peer!.setLocalDescription(d);\n        this._ws!.send(\n          JSON.stringify({\n            event: EVENT.SIGNAL.ANSWER,\n            sdp: d.sdp,\n            displayname: this._displayname,\n          })\n        );\n      })\n      .catch((err) => this.emit('error', err));\n  }\n\n  private onMessage(e: MessageEvent) {\n    const { event, ...payload } = JSON.parse(e.data) as WebSocketMessages;\n\n    this.emit(\n      'debug',\n      `received websocket event ${event} ${payload ? `with payload: ` : ''}`,\n      payload\n    );\n\n    if (event === EVENT.SIGNAL.PROVIDE) {\n      const { sdp, lite, ice, id } = payload as SignalProvidePayload;\n      this._id = id;\n      this.createPeer(sdp, lite, ice);\n      return;\n    }\n\n    // @ts-ignore\n    if (typeof this[event] === 'function') {\n      // @ts-ignore\n      this[event](payload);\n    } else {\n      this[EVENT.MESSAGE](event, payload);\n    }\n  }\n\n  private onData(e: MessageEvent) {\n    this[EVENT.DATA](e.data);\n  }\n\n  private onTrack(event: RTCTrackEvent) {\n    this.emit(\n      'debug',\n      `received ${event.track.kind} track from peer: ${event.track.id}`,\n      event\n    );\n    const stream = event.streams[0];\n    if (!stream) {\n      this.emit(\n        'warn',\n        `no stream provided for track ${event.track.id}(${event.track.label})`\n      );\n      return;\n    }\n    this[EVENT.TRACK](event);\n  }\n\n  private onError(event: Event) {\n    this.emit('error', (event as ErrorEvent).error);\n  }\n\n  private onConnected() {\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n\n    if (!this.connected) {\n      this.emit('warn', `onConnected called while being disconnected`);\n      return;\n    }\n\n    this.emit('debug', `connected`);\n    this[EVENT.CONNECTED]();\n  }\n\n  private onTimeout() {\n    this.emit('debug', `connection timeout`);\n    if (this._timeout) {\n      clearTimeout(this._timeout);\n    }\n    this.onDisconnected(new Error('connection timeout'));\n  }\n\n  protected onDisconnected(reason?: Error) {\n    this.disconnect();\n    this.emit('debug', `disconnected:`, reason);\n    this[EVENT.DISCONNECTED](reason);\n  }\n\n  protected [EVENT.MESSAGE](event: string, payload: any) {\n    this.emit('warn', `unhandled websocket event '${event}':`, payload);\n  }\n\n  protected abstract [EVENT.CONNECTING](): void;\n  protected abstract [EVENT.CONNECTED](): void;\n  protected abstract [EVENT.DISCONNECTED](reason?: Error): void;\n  protected abstract [EVENT.TRACK](event: RTCTrackEvent): void;\n  protected abstract [EVENT.DATA](data: any): void;\n}\n","import React from 'react';\n\nimport { EVENT } from './events';\nimport { NekoClient } from '.';\n\n// import { EVENT } from './events';\n\nexport default class VBrowser extends React.Component<{\n  username: string;\n  password: string;\n  hostname: string;\n  controlling: boolean;\n  setLoadingFalse: Function;\n  resolution: string;\n  setResolution: Function;\n  doPlay: Function;\n}> {\n  // private observer = new ResizeObserver(this.onResize);\n  private focused = false;\n  private fullscreen = false;\n  private activeKeys: Set<number> = new Set();\n  private controlling = false;\n  private scroll = 1; // 1 to 10\n  private scroll_invert = true;\n  private width = 1280;\n  private height = 720;\n  private rate = 30;\n  private keepAliveInterval = 0;\n  // private _component = React.createRef<HTMLDivElement>();\n  private _container = React.createRef<HTMLDivElement>();\n  private _overlay = React.createRef<HTMLDivElement>();\n  // private _aspect = React.createRef<HTMLDivElement>();\n  // private _player = React.createRef<HTMLDivElement>();\n  private _video = React.createRef<HTMLVideoElement>();\n  // private _resolution = React.createRef<HTMLDivElement>();\n  private $client: NekoClient = new NekoClient();\n\n  componentDidMount() {\n    this.controlling = this.props.controlling;\n    this.keepAliveInterval = window.setInterval(\n      () => this.$client.sendMessage('ka'),\n      10000\n    );\n\n    this.$client.on(EVENT.CONNECTED, () => {\n      if (this.props.controlling) {\n        this.takeControl();\n      }\n    });\n    this.$client.on(EVENT.DISCONNECTED, () => {\n      this.$client.login(url, this.props.password, this.props.username);\n    });\n    this.$client.on(EVENT.SCREEN.RESOLUTION, (data) => {\n      this.width = data.width;\n      this.height = data.height;\n      this.rate = data.rate;\n      // Update our state with the resolution sent from server\n      this.props.setResolution(`${this.width}x${this.height}@${this.rate}`);\n    });\n    this.$client.on(EVENT.TRACK, (track: MediaStreamTrack, stream) => {\n      // console.log(track, streams);\n      const video = document.getElementById('leftVideo') as HTMLVideoElement;\n      video.src = '';\n      video.srcObject = stream;\n      // Manually play audio for iPhone Safari since this seems to create two separate streams\n      if (stream.getTracks().length === 1 && track.kind === 'audio') {\n        const audio = document.getElementById(\n          'iPhoneAudio'\n        ) as HTMLAudioElement;\n        audio.srcObject = new MediaStream([track]);\n        audio.play();\n      }\n      this.props.doPlay();\n    });\n    this.$client.on(EVENT.CONTROL.CLIPBOARD, this.onClipboardChanged);\n\n    if (process.env.NODE_ENV === 'development') {\n      this.$client.on('debug', (e, data) => console.log(e, data));\n    }\n\n    const url = 'wss://' + this.props.hostname + '/';\n    this.$client.login(url, this.props.password, this.props.username);\n\n    // this._container.current?.addEventListener('resize', this.onResize);\n    // this.onResize();\n\n    // document.addEventListener('fullscreenchange', () => {\n    //   this.onResize();\n    // });\n\n    document.addEventListener('focusin', this.onFocus.bind(this));\n    document.addEventListener('focusout', this.onBlur.bind(this));\n\n    document\n      .getElementById('leftOverlay')\n      ?.addEventListener('wheel', this.onWheel, { passive: false });\n  }\n\n  componentDidUpdate(prevProps: any) {\n    // console.log(this.props.controlling, prevProps.controlling);\n    this.controlling = this.props.controlling;\n    if (this.props.controlling && !prevProps.controlling) {\n      this.takeControl();\n    }\n    if (this.props.resolution !== prevProps.resolution) {\n      this.changeResolution(this.props.resolution);\n    }\n  }\n\n  componentWillUnmount() {\n    window.clearInterval(this.keepAliveInterval);\n    this.$client.removeAllListeners();\n    this.$client.logout();\n  }\n\n  takeControl = () => {\n    if (this.$client.connected) {\n      this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n    } else {\n      this.$client.once(EVENT.CONNECTED, () => {\n        this.$client.sendMessage(EVENT.ADMIN.CONTROL);\n      });\n    }\n  };\n\n  changeResolution = (resString: string) => {\n    const split = resString.split(/x|@/);\n    const width = Number(split[0]);\n    const height = Number(split[1]);\n    const rate = Number(split[2]);\n    this.$client.sendMessage(EVENT.SCREEN.SET, { width, height, rate });\n  };\n\n  onClipboardChanged(clipboard: string) {\n    if (\n      navigator.clipboard &&\n      typeof navigator.clipboard.writeText === 'function'\n    ) {\n      // Received clipboard contents from vbrowser\n      navigator.clipboard.writeText(clipboard);\n    }\n  }\n  onFocus = async () => {\n    if (\n      this.props.controlling &&\n      navigator.clipboard &&\n      typeof navigator.clipboard.readText === 'function'\n    ) {\n      const text = await navigator.clipboard.readText();\n      // console.log('[FOCUS]', text);\n      // send clipboard contents to vbrowser\n      this.$client.sendMessage(EVENT.CONTROL.CLIPBOARD, { text });\n    }\n  };\n\n  onBlur = () => {\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    this.activeKeys.forEach((key) => {\n      this.$client.sendData('keyup', { key });\n      this.activeKeys.delete(key);\n    });\n  };\n\n  onClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onContextMenu = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n  };\n\n  onMousePos = (e: MouseEvent | React.MouseEvent) => {\n    const { w, h } = { w: this.width, h: this.height };\n    const rect = this._overlay.current!.getBoundingClientRect();\n    this.$client.sendData('mousemove', {\n      x: Math.round((w / rect.width) * (e.clientX - rect.left)),\n      y: Math.round((h / rect.height) * (e.clientY - rect.top)),\n    });\n  };\n\n  onWheel = (e: WheelEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n\n    let x = e.deltaX;\n    let y = e.deltaY;\n\n    if (this.scroll_invert) {\n      x = x * -1;\n      y = y * -1;\n    }\n\n    x = Math.min(Math.max(x, -this.scroll), this.scroll);\n    y = Math.min(Math.max(y, -this.scroll), this.scroll);\n\n    this.$client.sendData('wheel', { x, y });\n  };\n\n  onMouseDown = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mousedown', { key: e.button });\n  };\n\n  onMouseUp = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n    this.$client.sendData('mouseup', { key: e.button });\n  };\n\n  onMouseMove = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this.onMousePos(e);\n  };\n\n  onMouseEnter = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.focus();\n    this.onFocus();\n    this.focused = true;\n  };\n\n  onMouseLeave = (e: React.MouseEvent) => {\n    if (!this.controlling) {\n      return;\n    }\n    this._overlay.current!.blur();\n    this.focused = false;\n  };\n\n  // frick you firefox\n  getCode = (e: React.KeyboardEvent): number => {\n    let key = e.keyCode;\n    if (key === 59 && (e.key === ';' || e.key === ':')) {\n      key = 186;\n    }\n\n    if (key === 61 && (e.key === '=' || e.key === '+')) {\n      key = 187;\n    }\n\n    if (key === 173 && (e.key === '-' || e.key === '_')) {\n      key = 189;\n    }\n\n    return key;\n  };\n\n  onKeyDown = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keydown', { key });\n    this.activeKeys.add(key);\n  };\n\n  onKeyUp = (e: React.KeyboardEvent) => {\n    e.stopPropagation();\n    e.preventDefault();\n    if (!this.focused || !this.controlling) {\n      return;\n    }\n\n    let key = this.getCode(e);\n    this.$client.sendData('keyup', { key });\n    this.activeKeys.delete(key);\n  };\n\n  onResize = () => {\n    // let height = 0;\n    // if (!this.fullscreen) {\n    //   const offsetWidth = this._component.current?.offsetWidth;\n    //   const offsetHeight = this._component.current?.offsetHeight;\n    //   this._player.current!.style.width = `${offsetWidth}px`;\n    //   this._player.current!.style.height = `${offsetHeight}px`;\n    //   height = offsetHeight as number;\n    // } else {\n    //   const offsetHeight = this._player.current?.offsetHeight;\n    //   height = offsetHeight as number;\n    // }\n    // this._container.current!.style.maxWidth = `${\n    //   (this.horizontal / this.vertical) * height\n    // }px`;\n    // this._aspect.current!.style.paddingBottom = `${\n    //   (this.vertical / this.horizontal) * 100\n    // }%`;\n  };\n\n  render() {\n    return (\n      <div\n        id=\"leftVideoParent\"\n        style={{\n          display: 'flex',\n          alignItems: 'center',\n          justifyContent: 'center',\n        }}\n      >\n        <div\n          ref={this._container}\n          style={{ width: '100%', height: 'fit-content', position: 'relative' }}\n        >\n          <video\n            playsInline\n            ref={this._video}\n            id=\"leftVideo\"\n            style={{ width: '100%' }}\n          />\n          <audio id=\"iPhoneAudio\" />\n          <div\n            ref={this._overlay}\n            id={'leftOverlay'}\n            tabIndex={0}\n            style={{\n              width: document.getElementById('leftVideo')?.clientWidth,\n              height: document.getElementById('leftVideo')?.clientHeight,\n              position: 'absolute',\n              top: 0,\n              bottom: 0,\n              // disable firefox scrollbars?\n              scrollbarWidth: 'none',\n            }}\n            onClick={this.onClick}\n            onContextMenu={this.onContextMenu}\n            // onWheel={this.onWheel}\n            onMouseMove={this.onMouseMove}\n            onMouseDown={this.onMouseDown}\n            onMouseUp={this.onMouseUp}\n            onMouseEnter={this.onMouseEnter}\n            onMouseLeave={this.onMouseLeave}\n            onKeyDown={this.onKeyDown}\n            onKeyUp={this.onKeyUp}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import EventEmitter from 'eventemitter3';\n\nimport { BaseClient } from './base';\n//import { Member } from './types';\nimport { EVENT } from './events';\nimport {\n  ControlClipboardPayload,\n  ControlPayload,\n  ControlTargetPayload,\n  DisconnectPayload,\n  ScreenConfigurationsPayload,\n  ScreenResolutionPayload,\n} from './messages';\n\nexport class NekoClient extends BaseClient implements EventEmitter<any> {\n  login(url: string, password: string, displayname: string) {\n    this.connect(url, password, displayname);\n  }\n\n  logout() {\n    this.disconnect();\n  }\n\n  /////////////////////////////\n  // Internal Events\n  /////////////////////////////\n  protected [EVENT.CONNECTING]() {}\n\n  protected [EVENT.CONNECTED]() {\n    this.emit(EVENT.CONNECTED);\n  }\n\n  protected [EVENT.DISCONNECTED](reason?: Error) {\n    console.warn(reason);\n    this.emit(EVENT.DISCONNECTED);\n  }\n\n  protected [EVENT.TRACK](event: RTCTrackEvent) {\n    const { track, streams } = event;\n    this.emit(EVENT.TRACK, track, streams[0]);\n  }\n\n  protected [EVENT.DATA](data: any) {\n    console.log('[DATA]', data);\n  }\n\n  /////////////////////////////\n  // System Events\n  /////////////////////////////\n  protected [EVENT.SYSTEM.DISCONNECT]({ message }: DisconnectPayload) {\n    this.onDisconnected(new Error(message));\n  }\n\n  /////////////////////////////\n  // Control Events\n  /////////////////////////////\n  protected [EVENT.CONTROL.LOCKED]({ id }: ControlPayload) {\n    //this.$accessor.remote.setHost(id);\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.RELEASE]({ id }: ControlPayload) {\n    //this.$accessor.remote.reset();\n    // const member = this.member(id);\n    // if (!member) {\n    //   return;\n    // }\n  }\n\n  protected [EVENT.CONTROL.GIVE]({ id, target }: ControlTargetPayload) {\n    // const member = this.member(target);\n    // if (!member) {\n    //   return;\n    // }\n    //this.$accessor.remote.setHost(member);\n  }\n\n  protected [EVENT.CONTROL.CLIPBOARD]({ text }: ControlClipboardPayload) {\n    this.emit(EVENT.CONTROL.CLIPBOARD, text);\n  }\n\n  /////////////////////////////\n  // Screen Events\n  /////////////////////////////\n  protected [EVENT.SCREEN.CONFIGURATIONS]({\n    configurations,\n  }: ScreenConfigurationsPayload) {\n    // console.log('[CONFIGURATIONS]', configurations);\n    //this.$accessor.video.setConfigurations(configurations);\n  }\n\n  protected [EVENT.SCREEN.RESOLUTION]({\n    id,\n    width,\n    height,\n    rate,\n  }: ScreenResolutionPayload) {\n    this.emit(EVENT.SCREEN.RESOLUTION, { width, height, rate });\n  }\n}\n\nexport { default as VBrowser } from './VBrowser';\n","import React from 'react';\nimport { Button, Icon } from 'semantic-ui-react';\nimport { Socket } from 'socket.io-client';\n\nimport {\n  formatTimestamp,\n  getColorForStringHex,\n  getDefaultPicture,\n  iceServers,\n} from '../../utils';\nimport { UserMenu } from '../UserMenu/UserMenu';\nimport firebase from 'firebase/compat/app';\n\ninterface VideoChatProps {\n  socket: Socket;\n  participants: User[];\n  pictureMap: StringDict;\n  nameMap: StringDict;\n  tsMap: NumberDict;\n  rosterUpdateTS: Number;\n  hide?: boolean;\n  owner: string | undefined;\n  user: firebase.User | undefined;\n}\n\nexport class VideoChat extends React.Component<VideoChatProps> {\n  ourStream?: MediaStream;\n  videoRefs: any = {};\n  videoPCs: PCDict = {};\n  socket = this.props.socket;\n\n  componentDidMount() {\n    this.socket.on('signal', this.handleSignal);\n  }\n\n  componentWillUnmount() {\n    this.socket.off('signal', this.handleSignal);\n  }\n\n  componentDidUpdate(prevProps: VideoChatProps) {\n    if (this.props.rosterUpdateTS !== prevProps.rosterUpdateTS) {\n      this.updateWebRTC();\n    }\n  }\n\n  handleSignal = async (data: any) => {\n    // Handle messages received from signaling server\n    const msg = data.msg;\n    const from = data.from;\n    const pc = this.videoPCs[from];\n    console.log('recv', from, data);\n    if (msg.ice !== undefined) {\n      pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n    } else if (msg.sdp && msg.sdp.type === 'offer') {\n      // console.log('offer');\n      await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      const answer = await pc.createAnswer();\n      await pc.setLocalDescription(answer);\n      this.sendSignal(from, { sdp: pc.localDescription });\n    } else if (msg.sdp && msg.sdp.type === 'answer') {\n      pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n    }\n  };\n\n  setupWebRTC = async () => {\n    // Set up our own video\n    // Create default stream\n    let black = ({ width = 640, height = 480 } = {}) => {\n      let canvas: any = Object.assign(document.createElement('canvas'), {\n        width,\n        height,\n      });\n      canvas.getContext('2d')?.fillRect(0, 0, width, height);\n      let stream = canvas.captureStream();\n      return Object.assign(stream.getVideoTracks()[0], { enabled: false });\n    };\n    let stream = new MediaStream([black()]);\n\n    try {\n      stream = await navigator?.mediaDevices.getUserMedia({\n        audio: true,\n        video: true,\n      });\n    } catch (e) {\n      console.warn(e);\n      try {\n        console.log('attempt audio only stream');\n        stream = await navigator?.mediaDevices?.getUserMedia({\n          audio: true,\n          video: false,\n        });\n      } catch (e) {\n        console.warn(e);\n      }\n    }\n    this.ourStream = stream;\n    // alert server we've joined video chat\n    this.socket.emit('CMD:joinVideo');\n  };\n\n  stopWebRTC = () => {\n    this.ourStream &&\n      this.ourStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.ourStream = undefined;\n    Object.keys(this.videoPCs).forEach((key) => {\n      this.videoPCs[key].close();\n      delete this.videoPCs[key];\n    });\n    this.socket.emit('CMD:leaveVideo');\n  };\n\n  toggleVideoWebRTC = () => {\n    if (this.ourStream && this.ourStream.getVideoTracks()[0]) {\n      this.ourStream.getVideoTracks()[0].enabled = !this.ourStream.getVideoTracks()[0]\n        ?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getVideoWebRTC = () => {\n    return this.ourStream && this.ourStream.getVideoTracks()[0]?.enabled;\n  };\n\n  toggleAudioWebRTC = () => {\n    if (this.ourStream && this.ourStream.getAudioTracks()[0]) {\n      this.ourStream.getAudioTracks()[0].enabled = !this.ourStream.getAudioTracks()[0]\n        ?.enabled;\n    }\n    this.forceUpdate();\n  };\n\n  getAudioWebRTC = () => {\n    return (\n      this.ourStream &&\n      this.ourStream.getAudioTracks()[0] &&\n      this.ourStream.getAudioTracks()[0].enabled\n    );\n  };\n\n  updateWebRTC = () => {\n    if (!this.ourStream) {\n      // We haven't started video chat, exit\n      return;\n    }\n    this.props.participants.forEach((user) => {\n      const id = user.id;\n      if (!user.isVideoChat && this.videoPCs[id]) {\n        // User isn't in video chat but we have a connection, close it\n        this.videoPCs[id].close();\n        delete this.videoPCs[id];\n      }\n      if (!user.isVideoChat || this.videoPCs[id]) {\n        // User isn't in video chat, or we already have a connection to them\n        return;\n      }\n      if (id === this.socket.id) {\n        this.videoPCs[id] = new RTCPeerConnection();\n        this.videoRefs[id].srcObject = this.ourStream;\n      } else {\n        const pc = new RTCPeerConnection({ iceServers: iceServers() });\n        this.videoPCs[id] = pc;\n        // Add our own video as outgoing stream\n        this.ourStream?.getTracks().forEach((track) => {\n          if (this.ourStream) {\n            pc.addTrack(track, this.ourStream);\n          }\n        });\n        pc.onicecandidate = (event) => {\n          // We generated an ICE candidate, send it to peer\n          if (event.candidate) {\n            this.sendSignal(id, { ice: event.candidate });\n          }\n        };\n        pc.ontrack = (event: RTCTrackEvent) => {\n          // Mount the stream from peer\n          // console.log(stream);\n          this.videoRefs[id].srcObject = event.streams[0];\n        };\n        // For each pair, have the lexicographically smaller ID be the offerer\n        const isOfferer = this.socket.id < id;\n        if (isOfferer) {\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignal(id, { sdp: pc.localDescription });\n          };\n        }\n      }\n    });\n  };\n\n  sendSignal = async (to: string, data: any) => {\n    console.log('send', to, data);\n    this.socket.emit('signal', { to, msg: data });\n  };\n\n  render() {\n    const {\n      participants,\n      pictureMap,\n      nameMap,\n      tsMap,\n      socket,\n      owner,\n      user,\n    } = this.props;\n    const videoChatContentStyle = {\n      height: participants.length < 3 ? 220 : 110,\n      borderRadius: '4px',\n      objectFit: 'contain',\n    };\n    return (\n      <div\n        style={{\n          display: this.props.hide ? 'none' : 'flex',\n          width: '100%',\n          flexDirection: 'column',\n          overflow: 'auto',\n        }}\n      >\n        {!this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n              marginTop: '8px',\n            }}\n          >\n            <Button\n              fluid\n              title=\"Join Video Chat\"\n              color={'purple'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.setupWebRTC}\n            >\n              <Icon name=\"video\" />\n              {`Join Video Chat`}\n            </Button>\n          </div>\n        )}\n        {this.ourStream && (\n          <div\n            style={{\n              display: 'flex',\n              flexWrap: 'wrap',\n            }}\n          >\n            <Button\n              fluid\n              color={'red'}\n              size=\"medium\"\n              icon\n              labelPosition=\"left\"\n              onClick={this.stopWebRTC}\n            >\n              <Icon name=\"external\" />\n              {`Leave Video Chat`}\n            </Button>\n            <div\n              style={{\n                display: 'flex',\n                justifyContent: 'center',\n                marginTop: '8px',\n                width: '100%',\n              }}\n            >\n              <Button\n                color={this.getVideoWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleVideoWebRTC}\n              >\n                <Icon name=\"video\" />\n                {this.getVideoWebRTC() ? 'On' : 'Off'}\n              </Button>\n              <Button\n                color={this.getAudioWebRTC() ? 'green' : 'red'}\n                fluid\n                size=\"medium\"\n                icon\n                labelPosition=\"left\"\n                onClick={this.toggleAudioWebRTC}\n              >\n                <Icon\n                  name={\n                    this.getAudioWebRTC() ? 'microphone' : 'microphone slash'\n                  }\n                />\n                {this.getAudioWebRTC() ? 'On' : 'Off'}\n              </Button>\n            </div>\n          </div>\n        )}\n        <div\n          style={{\n            display: 'flex',\n            flexWrap: 'wrap',\n            justifyContent: 'center',\n            marginTop: '8px',\n          }}\n        >\n          {participants.map((p) => {\n            return (\n              <div key={p.id}>\n                <div\n                  style={{\n                    position: 'relative',\n                    //marginLeft: '4px',\n                  }}\n                >\n                  <div>\n                    <UserMenu\n                      displayName={nameMap[p.id] || p.id}\n                      user={user}\n                      disabled={!Boolean(owner && owner === user?.uid)}\n                      position={'left center'}\n                      socket={socket}\n                      userToManage={p.id}\n                      trigger={\n                        <Icon\n                          name=\"ellipsis vertical\"\n                          size=\"large\"\n                          style={{\n                            position: 'absolute',\n                            right: -7,\n                            top: 5,\n                            cursor: 'pointer',\n                            opacity: 0.75,\n                            visibility: Boolean(owner && owner === user?.uid)\n                              ? 'visible'\n                              : 'hidden',\n                          }}\n                        />\n                      }\n                    />\n                    {this.ourStream && p.isVideoChat ? (\n                      <video\n                        ref={(el) => {\n                          this.videoRefs[p.id] = el;\n                        }}\n                        style={{\n                          ...(videoChatContentStyle as any),\n                          // mirror the video if it's our stream. this style mimics Zoom where your\n                          // video is mirrored only for you)\n                          transform: `scaleX(${\n                            p.id === socket.id ? '-1' : '1'\n                          })`,\n                        }}\n                        autoPlay\n                        muted={p.id === socket.id}\n                        data-id={p.id}\n                      />\n                    ) : (\n                      <img\n                        style={videoChatContentStyle as any}\n                        src={\n                          pictureMap[p.id] ||\n                          getDefaultPicture(\n                            nameMap[p.id],\n                            getColorForStringHex(p.id)\n                          )\n                        }\n                        alt=\"\"\n                      />\n                    )}\n                    <div\n                      style={{\n                        position: 'absolute',\n                        bottom: '4px',\n                        left: '0px',\n                        width: '100%',\n                        backgroundColor: 'rgba(0,0,0,0)',\n                        color: 'white',\n                        borderRadius: '4px',\n                        fontSize: '10px',\n                        fontWeight: 700,\n                        display: 'flex',\n                      }}\n                    >\n                      <div\n                        title={nameMap[p.id] || p.id}\n                        style={{\n                          width: '80px',\n                          backdropFilter: 'brightness(80%)',\n                          padding: '4px',\n                          textOverflow: 'ellipsis',\n                          whiteSpace: 'nowrap',\n                          overflow: 'hidden',\n                          display: 'inline-block',\n                        }}\n                      >\n                        {p.isVideoChat && <Icon size=\"small\" name=\"video\" />}\n                        {nameMap[p.id] || p.id}\n                      </div>\n                      <div\n                        style={{\n                          backdropFilter: 'brightness(60%)',\n                          padding: '4px',\n                          flexGrow: 1,\n                          display: 'flex',\n                          justifyContent: 'center',\n                        }}\n                      >\n                        {formatTimestamp(tsMap[p.id] || 0)}\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Button, Form, Header, Icon, Modal, TextArea } from 'semantic-ui-react';\n\nexport const SettingsModal = ({ trigger }: any) => (\n  <Modal trigger={trigger} basic closeIcon size=\"small\">\n    <Header icon=\"setting\" content=\"Settings\" />\n    <Modal.Content>\n      <Form>\n        <TextArea rows={10} id=\"settings_textarea\">\n          {window.localStorage.getItem('watchparty-setting') ||\n            JSON.stringify(getDefaultSettings(), null, 2)}\n        </TextArea>\n      </Form>\n    </Modal.Content>\n    <Modal.Actions>\n      <Button\n        color=\"green\"\n        inverted\n        onClick={() => {\n          const newSetting = (document.getElementById(\n            'settings_textarea'\n          ) as HTMLTextAreaElement)!.value;\n          try {\n            validateSettingsString(newSetting);\n            updateSettings(newSetting);\n            window.location.reload();\n          } catch (e) {\n            alert(e);\n          }\n        }}\n      >\n        <Icon name=\"checkmark\" />\n        Save\n      </Button>\n    </Modal.Actions>\n  </Modal>\n);\n\nexport function getDefaultSettings(): Settings {\n  return {};\n}\n\nexport function getCurrentSettings(): Settings {\n  const setting = window.localStorage.getItem('watchparty-setting');\n  try {\n    let settings = validateSettingsString(setting);\n    if (!settings) {\n      return {};\n    }\n    return settings;\n  } catch (e) {\n    console.warn(e);\n    return getDefaultSettings();\n  }\n}\n\n/**\n * Validate a setting string. Return a parsed setting object if valid, otherwise throw exception\n */\nexport function validateSettingsString(\n  setting: string | null\n): Settings | null {\n  // Don't have a setting or invalid value\n  let settingObject: Settings = JSON.parse(setting as any);\n  if (!setting) {\n    return {};\n  }\n  if (setting[0] !== '{') {\n    throw new Error('failed to parse settings, using defaults');\n  }\n  return settingObject;\n}\n\nexport function updateSettings(newSetting: string) {\n  window.localStorage.setItem('watchparty-setting', newSetting);\n}\n","import React from 'react';\nimport { Modal, Loader, List } from 'semantic-ui-react';\n\nexport const MultiStreamModal = ({\n  streams,\n  setMedia,\n  resetMultiSelect,\n}: {\n  streams: any[];\n  setMedia: Function;\n  resetMultiSelect: Function;\n}) => (\n  <Modal inverted basic open closeIcon onClose={resetMultiSelect as any}>\n    <Modal.Header>Select a file</Modal.Header>\n    <Modal.Content>\n      {streams.length === 0 && <Loader />}\n      {streams && (\n        <List inverted>\n          {streams.map((file: any) => (\n            <List.Item>\n              <List.Icon name=\"file\" />\n              <List.Content>\n                <List.Header\n                  as=\"a\"\n                  onClick={() => {\n                    setMedia(null, { value: file.url });\n                    resetMultiSelect();\n                  }}\n                >\n                  {file.name}\n                </List.Header>\n                <List.Description>\n                  {file.length.toLocaleString()} bytes\n                </List.Description>\n              </List.Content>\n            </List.Item>\n          ))}\n        </List>\n      )}\n    </Modal.Content>\n  </Modal>\n);\n","export const examples = [\n  'https://upload.wikimedia.org/wikipedia/commons/a/a5/Spring_-_Blender_Open_Movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/8/88/Big_Buck_Bunny_alt.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/7/75/Sintel_movie_720x306.ogv',\n  'https://upload.wikimedia.org/wikipedia/commons/c/cb/Tears_of_Steel_1080p.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/3/36/Cosmos_Laundromat_-_First_Cycle_-_Official_Blender_Foundation_release.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a2/Elephants_Dream_%282006%29.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/a/a9/HERO_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/0/02/Glass_Half_-_Blender_Open_Movie-full_movie.webm',\n  'https://upload.wikimedia.org/wikipedia/commons/d/d0/Caminandes-_Llama_Drama_-_Short_Movie.ogv',\n].map((url) => ({\n  url,\n  type: 'file',\n  name: url,\n  duration: 0,\n}));\n","import React from 'react';\nimport { Button, ButtonGroup, DropdownProps, Icon } from 'semantic-ui-react';\nimport { decodeEntities, formatTimestamp } from '../../utils';\n\nimport classes from './ChatVideoCard.module.css';\n\nconst ChatVideoCard: React.FC<{\n  video: PlaylistVideo;\n  index: number;\n  controls?: boolean;\n  onPlay?: (index: number) => void;\n  onRemove?: (index: number) => void;\n  onPlayNext?: (index: number) => void;\n  onSetMedia?: (e: any, data: DropdownProps) => void;\n  onPlaylistAdd?: (e: any, data: DropdownProps) => void;\n  isYoutube?: boolean;\n  disabled?: boolean;\n}> = (props) => {\n  const {\n    video,\n    index,\n    controls,\n    onPlay,\n    onPlayNext,\n    onRemove,\n    onSetMedia,\n    disabled,\n    onPlaylistAdd,\n    isYoutube,\n  } = props;\n\n  const handlePlayClick = React.useCallback(\n    (e) => {\n      if (onPlay) {\n        onPlay(index);\n      }\n    },\n    [onPlay, index]\n  );\n\n  const handlePlayNextClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onPlayNext) {\n        onPlayNext(index);\n      }\n    },\n    [onPlayNext, index]\n  );\n\n  const handleRemoveClick = React.useCallback(\n    (e) => {\n      e.stopPropagation();\n      e.nativeEvent.stopImmediatePropagation();\n      if (onRemove) {\n        onRemove(index);\n      }\n    },\n    [onRemove, index]\n  );\n\n  const Element = 'div';\n\n  return (\n    <Element\n      title={video.name}\n      className={classes.Card}\n      onClick={\n        onSetMedia\n          ? (e) => {\n              onSetMedia(e, { value: video.url });\n            }\n          : undefined\n      }\n    >\n      <div className={classes.Wrapper}>\n        <div className={classes.ThumbnailWrapper}>\n          {!!video.duration && (\n            <div className={classes.DurationLabel}>\n              {formatTimestamp(video.duration)}\n            </div>\n          )}\n          {!!video.img && (\n            <img\n              className={classes.Thumbnail}\n              src={video.img}\n              alt={video.name}\n            />\n          )}\n        </div>\n        <Icon\n          color={isYoutube ? 'red' : 'black'}\n          size=\"large\"\n          name={isYoutube ? 'youtube' : 'linkify'}\n        />\n        <div className={classes.Content}>\n          <div className={classes.Title}>{decodeEntities(video.name)}</div>\n          <div className={classes.ChannelName}>{video.channel}</div>\n        </div>\n        {onPlaylistAdd && (\n          <div className={classes.Controls}>\n            <div style={{ marginLeft: 'auto' }}>\n              <Button\n                className=\"playlistAddButton\"\n                onClick={(e) => {\n                  e.stopPropagation();\n                  e.nativeEvent.stopImmediatePropagation();\n                  onPlaylistAdd(e, { value: video.url });\n                }}\n              >\n                Add To Playlist\n              </Button>\n            </div>\n          </div>\n        )}\n        {controls && (\n          <div className={classes.Controls}>\n            <ButtonGroup size=\"mini\">\n              <Button\n                icon\n                color=\"green\"\n                title=\"Play now\"\n                onClick={handlePlayClick}\n                disabled={disabled}\n              >\n                <Icon name=\"play\" />\n              </Button>\n              <Button\n                icon\n                color=\"black\"\n                title=\"Play next\"\n                onClick={handlePlayNextClick}\n                disabled={disabled}\n              >\n                <Icon name=\"arrow up\" />\n              </Button>\n              <Button\n                icon\n                color=\"red\"\n                title=\"Remove\"\n                onClick={handleRemoveClick}\n                disabled={disabled}\n              >\n                <Icon name=\"trash\" />\n              </Button>\n            </ButtonGroup>\n          </div>\n        )}\n      </div>\n    </Element>\n  );\n};\n\nexport default ChatVideoCard;\n","import React from 'react';\nimport { DropdownProps, Menu, Input, Icon, Dropdown } from 'semantic-ui-react';\nimport { debounce, getYouTubeResults } from '../../utils';\nimport { examples } from '../../utils/examples';\nimport ChatVideoCard from '../Playlist/ChatVideoCard';\n\ninterface ComboBoxProps {\n  setMedia: (e: any, data: DropdownProps) => void;\n  playlistAdd: (e: any, data: DropdownProps) => void;\n  playlistMove: (index: number, toIndex: number) => void;\n  playlistDelete: (index: number) => void;\n  currentMedia: string;\n  getMediaDisplayName: Function;\n  launchMultiSelect: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n  playlist: PlaylistVideo[];\n}\n\nexport class ComboBox extends React.Component<ComboBoxProps> {\n  state = {\n    inputMedia: undefined as string | undefined,\n    results: undefined,\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n  };\n  debounced: any = null;\n\n  setMediaAndClose = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ inputMedia: undefined, results: undefined }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          const query: string = this.state.inputMedia || '';\n          let timestamp = Number(new Date());\n          let results: JSX.Element[] | undefined = undefined;\n          if (query === '' || (query && query.startsWith('http'))) {\n            let items = examples;\n            if (query) {\n              items = [\n                {\n                  name: query,\n                  type: 'file',\n                  url: query,\n                  duration: 0,\n                },\n              ];\n            }\n            results = items.map((result: SearchResult, index: number) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                />\n              </Menu.Item>\n            ));\n          } else {\n            const data = await getYouTubeResults(query);\n            results = data.map((result, index) => (\n              <Menu.Item\n                key={result.url}\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, { value: result.url })\n                }\n              >\n                <ChatVideoCard\n                  video={result}\n                  index={index}\n                  onPlaylistAdd={this.props.playlistAdd}\n                  isYoutube\n                />\n              </Menu.Item>\n            ));\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  render() {\n    const { currentMedia, getMediaDisplayName } = this.props;\n    const { results } = this.state;\n    return (\n      <div style={{ position: 'relative' }}>\n        <div style={{ display: 'flex', gap: '4px' }}>\n          <Input\n            style={{ flexGrow: 1 }}\n            inverted\n            fluid\n            focus\n            disabled={this.props.disabled}\n            onChange={this.doSearch}\n            onFocus={(e: any) => {\n              e.persist();\n              this.setState(\n                {\n                  inputMedia: getMediaDisplayName(currentMedia),\n                },\n                () => {\n                  if (\n                    !this.state.inputMedia ||\n                    (this.state.inputMedia &&\n                      this.state.inputMedia.startsWith('http'))\n                  ) {\n                    this.doSearch(e);\n                  }\n                }\n              );\n              setTimeout(() => e.target.select(), 100);\n            }}\n            onBlur={() => {\n              setTimeout(\n                () =>\n                  this.setState({ inputMedia: undefined, results: undefined }),\n                100\n              );\n            }}\n            onKeyPress={(e: any) => {\n              if (e.key === 'Enter') {\n                this.setMediaAndClose(e, {\n                  value: this.state.inputMedia,\n                });\n              }\n            }}\n            icon={\n              <Icon\n                onClick={(e: any) =>\n                  this.setMediaAndClose(e, {\n                    value: this.state.inputMedia,\n                  })\n                }\n                name=\"arrow right\"\n                link\n                circular\n                //bordered\n              />\n            }\n            loading={this.state.loading}\n            label={'Now Watching:'}\n            placeholder=\"Enter video file URL, YouTube link, or YouTube search term\"\n            value={\n              this.state.inputMedia !== undefined\n                ? this.state.inputMedia\n                : getMediaDisplayName(currentMedia)\n            }\n          />\n          <Dropdown\n            icon=\"list\"\n            labeled\n            className=\"icon\"\n            button\n            text={`Playlist (${this.props.playlist.length})`}\n            scrolling\n          >\n            <Dropdown.Menu direction=\"left\">\n              {this.props.playlist.length === 0 && (\n                <Dropdown.Item disabled>\n                  There are no items in the playlist.\n                </Dropdown.Item>\n              )}\n              {this.props.playlist.map((item: PlaylistVideo, index: number) => {\n                return (\n                  <Dropdown.Item>\n                    <div style={{ maxWidth: '500px' }}>\n                      <ChatVideoCard\n                        video={item}\n                        index={index}\n                        controls\n                        onPlay={(index) => {\n                          this.props.setMedia(null, {\n                            value: this.props.playlist[index]?.url,\n                          });\n                          this.props.playlistDelete(index);\n                        }}\n                        onPlayNext={(index) => {\n                          this.props.playlistMove(index, 0);\n                        }}\n                        onRemove={(index) => {\n                          this.props.playlistDelete(index);\n                        }}\n                        disabled={this.props.disabled}\n                        isYoutube={Boolean(item.img)}\n                      />\n                    </div>\n                  </Dropdown.Item>\n                );\n              })}\n            </Dropdown.Menu>\n          </Dropdown>\n        </div>\n        {Boolean(results) && this.state.inputMedia !== undefined && (\n          <Menu\n            fluid\n            vertical\n            style={{\n              position: 'absolute',\n              top: '22px',\n              maxHeight: '250px',\n              overflow: 'scroll',\n              zIndex: 1001,\n            }}\n          >\n            {results}\n          </Menu>\n        )}\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Menu, Icon, Label, Button } from 'semantic-ui-react';\nimport { decodeEntities } from '../../utils';\n\nexport const YouTubeSearchResult = (\n  props: SearchResult & { setMedia: Function; playlistAdd: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex', alignItems: 'center', gap: '8px' }}>\n        <img style={{ height: '50px' }} src={result.img} alt={result.name} />\n        <Icon color=\"red\" size=\"large\" name=\"youtube\" />\n        <div>{decodeEntities(result.name)}</div>\n        <div style={{ marginLeft: 'auto' }}>\n          <Button\n            onClick={(e) => {\n              e.stopPropagation();\n              e.nativeEvent.stopImmediatePropagation();\n              props.playlistAdd(e, { value: result.url });\n            }}\n          >\n            Add To Playlist\n          </Button>\n        </div>\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport const MediaPathSearchResult = (\n  props: SearchResult & { setMedia: Function }\n) => {\n  const result = props;\n  const setMedia = props.setMedia;\n  return (\n    <Menu.Item\n      onClick={(e) => {\n        setMedia(e, { value: result.url });\n      }}\n    >\n      <div style={{ display: 'flex' }}>\n        <Icon name=\"file\" />\n        {result.name}\n      </div>\n    </Menu.Item>\n  );\n};\n\nexport class StreamPathSearchResult extends React.Component<\n  SearchResult & {\n    setMedia: Function;\n    launchMultiSelect: Function;\n    streamPath: string;\n  }\n> {\n  render() {\n    const result = this.props;\n    const setMedia = this.props.setMedia;\n    return (\n      <React.Fragment>\n        <Menu.Item\n          onClick={async (e) => {\n            this.props.launchMultiSelect([]);\n            let response = await window.fetch(\n              this.props.streamPath +\n                '/data?torrent=' +\n                encodeURIComponent(result.magnet!)\n            );\n            let metadata = await response.json();\n            // console.log(metadata);\n            if (\n              metadata.files.filter(\n                (file: any) => file.length > 10 * 1024 * 1024\n              ).length > 1\n            ) {\n              // Multiple large files, present user selection\n              const multiStreamSelection = metadata.files.map(\n                (file: any, i: number) => ({\n                  ...file,\n                  url:\n                    this.props.streamPath +\n                    '/stream?torrent=' +\n                    encodeURIComponent(result.magnet!) +\n                    '&fileIndex=' +\n                    i,\n                })\n              );\n              multiStreamSelection.sort((a: any, b: any) =>\n                a.name.localeCompare(b.name)\n              );\n              this.props.launchMultiSelect(multiStreamSelection);\n            } else {\n              this.props.launchMultiSelect(undefined);\n              setMedia(e, {\n                value:\n                  this.props.streamPath +\n                  '/stream?torrent=' +\n                  encodeURIComponent(result.magnet!),\n              });\n            }\n          }}\n        >\n          <Label\n            circular\n            empty\n            color={Number(result.seeders) ? 'green' : 'red'}\n          />\n          <Icon name=\"film\" />\n          {result.name +\n            ' - ' +\n            result.size +\n            ' - ' +\n            result.seeders +\n            ' peers'}\n        </Menu.Item>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport {\n  debounce,\n  getYouTubeResults,\n  getMediaPathResults,\n  getStreamPathResults,\n} from '../../utils';\nimport { DropdownProps, Dropdown } from 'semantic-ui-react';\nimport {\n  YouTubeSearchResult,\n  MediaPathSearchResult,\n  StreamPathSearchResult,\n} from '../SearchResult/SearchResult';\n\ninterface SearchComponentProps {\n  setMedia: Function;\n  playlistAdd: Function;\n  type?: 'youtube' | 'media' | 'stream';\n  launchMultiSelect?: Function;\n  mediaPath: string | undefined;\n  streamPath: string | undefined;\n  disabled?: boolean;\n}\n\nexport class SearchComponent extends React.Component<SearchComponentProps> {\n  state = {\n    results: [] as SearchResult[],\n    resetDropdown: Number(new Date()),\n    loading: false,\n    lastResultTimestamp: Number(new Date()),\n    inputMedia: undefined,\n  };\n  debounced: any = null;\n\n  doSearch = async (e: any) => {\n    e.persist();\n    this.setState({ inputMedia: e.target.value }, () => {\n      if (!this.debounced) {\n        this.debounced = debounce(async () => {\n          this.setState({ loading: true });\n          let query = this.state.inputMedia || '';\n          let results: SearchResult[] = [];\n          let timestamp = Number(new Date());\n          if (this.props.type === 'youtube') {\n            results = await getYouTubeResults(query);\n          } else if (this.props.type === 'media' && this.props.mediaPath) {\n            results = await getMediaPathResults(this.props.mediaPath, query);\n          } else if (this.props.type === 'stream' && this.props.streamPath) {\n            results = await getStreamPathResults(this.props.streamPath, query);\n          }\n          if (timestamp > this.state.lastResultTimestamp) {\n            this.setState({\n              loading: false,\n              results,\n              lastResultTimestamp: timestamp,\n            });\n          }\n        }, 500);\n      }\n      this.debounced();\n    });\n  };\n\n  setMedia = (e: any, data: DropdownProps) => {\n    window.setTimeout(\n      () => this.setState({ resetDropdown: Number(new Date()) }),\n      300\n    );\n    this.props.setMedia(e, data);\n  };\n\n  render() {\n    const setMedia = this.setMedia;\n    let placeholder = 'Search streams';\n    let icon = 'film';\n    if (this.props.type === 'youtube') {\n      placeholder = 'Search YouTube';\n      icon = 'youtube';\n    } else if (this.props.type === 'media') {\n      placeholder = this.props.mediaPath || '';\n      icon = 'file';\n    }\n    if (this.state.loading) {\n      icon = 'loading circle notch';\n    }\n    return (\n      <React.Fragment>\n        <Dropdown\n          key={this.state.resetDropdown}\n          fluid\n          style={{ height: '36px' }}\n          button\n          icon={icon}\n          className=\"icon\"\n          labeled\n          disabled={this.props.disabled}\n          search={(() => {}) as any}\n          text={placeholder}\n          onSearchChange={this.doSearch}\n          onFocus={async (e) => {\n            if (this.props.type === 'media' && this.props.mediaPath) {\n              this.doSearch(e);\n            }\n          }}\n          scrolling\n          // onBlur={() => this.setState({ results: this.state.watchOptions })}\n          //searchQuery={this.state.query}\n          //loading={this.state.loading}\n        >\n          {Boolean(this.state.results.length) ? (\n            <Dropdown.Menu>\n              {this.state.results.map((result: SearchResult) => {\n                if (this.props.type === 'youtube') {\n                  return (\n                    <YouTubeSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                      playlistAdd={this.props.playlistAdd}\n                    />\n                  );\n                } else if (this.props.type === 'media') {\n                  return (\n                    <MediaPathSearchResult\n                      key={result.url}\n                      {...result}\n                      setMedia={setMedia}\n                    />\n                  );\n                }\n                return (\n                  <StreamPathSearchResult\n                    key={result.url}\n                    {...result}\n                    setMedia={setMedia}\n                    launchMultiSelect={this.props.launchMultiSelect as Function}\n                    streamPath={this.props.streamPath || ''}\n                  />\n                );\n              })}\n            </Dropdown.Menu>\n          ) : null}\n        </Dropdown>\n      </React.Fragment>\n    );\n  }\n}\n","import React from 'react';\nimport { Icon, Progress, Label, Popup } from 'semantic-ui-react';\nimport { Slider } from 'react-semantic-ui-range';\nimport { formatTimestamp } from '../../utils';\n\ninterface ControlsProps {\n  duration: number;\n  togglePlay: Function;\n  onSeek: Function;\n  fullScreen: Function;\n  toggleMute: Function;\n  toggleSubtitle: Function;\n  jumpToLeader: Function;\n  paused: boolean;\n  muted: boolean;\n  subtitled: boolean;\n  currentTime: number;\n  getVolume: Function;\n  setVolume: Function;\n  disabled?: boolean;\n  leaderTime?: number;\n  isPauseDisabled?: boolean;\n}\n\n// TODO a lot of this state is currently tied to the per-second tsMap update, which is leading to some UI lag\n// e.g. cc, mute, timestamp\n// play/pause seems to work better since it triggers a server emit\n// Should probably have local state tracking CC/mute/time etc.\nexport class Controls extends React.Component<ControlsProps> {\n  state = {\n    showTimestamp: false,\n    currTimestamp: 0,\n    posTimestamp: 0,\n  };\n\n  onMouseOver = () => {\n    // console.log('mouseover');\n    this.setState({ showTimestamp: true });\n  };\n\n  onMouseOut = () => {\n    // console.log('mouseout');\n    this.setState({ showTimestamp: false });\n  };\n\n  onMouseMove = (e: any) => {\n    const rect = e.target.getBoundingClientRect();\n    const x = e.clientX - rect.left;\n    const max = rect.width;\n    const pct = x / max;\n    // console.log(x, max);\n    const target = pct * this.props.duration;\n    // console.log(pct);\n    if (pct >= 0) {\n      this.setState({ currTimestamp: target, posTimestamp: pct });\n    }\n  };\n\n  render() {\n    const {\n      togglePlay,\n      onSeek,\n      fullScreen,\n      toggleMute,\n      toggleSubtitle,\n      jumpToLeader,\n      paused,\n      muted,\n      subtitled,\n      currentTime,\n      duration,\n      leaderTime,\n      isPauseDisabled,\n      disabled,\n    } = this.props;\n    const isBehind = leaderTime && leaderTime - currentTime > 5;\n    return (\n      <div className=\"controls\">\n        <Icon\n          size=\"large\"\n          onClick={togglePlay}\n          className=\"control action\"\n          disabled={disabled || isPauseDisabled}\n          name={paused ? 'play' : 'pause'}\n        />\n        <Popup\n          content={\n            (isBehind ? \"We've detected that your stream is behind. \" : '') +\n            'Click to sync to leader.'\n          }\n          trigger={\n            <Icon\n              size=\"large\"\n              onClick={jumpToLeader}\n              className={`control action ${isBehind ? 'glowing' : ''}`}\n              name={'angle double right'}\n            />\n          }\n        />\n        <div className=\"control\">{formatTimestamp(currentTime)}</div>\n        <Progress\n          size=\"tiny\"\n          color=\"blue\"\n          onClick={\n            duration < Infinity && !this.props.disabled ? onSeek : undefined\n          }\n          onMouseOver={this.onMouseOver}\n          onMouseOut={this.onMouseOut}\n          onMouseMove={this.onMouseMove}\n          className=\"control action\"\n          inverted\n          style={{\n            flexGrow: 1,\n            marginTop: 0,\n            marginBottom: 0,\n            position: 'relative',\n            minWidth: '50px',\n          }}\n          value={currentTime}\n          total={duration}\n        >\n          {duration < Infinity && this.state.showTimestamp && (\n            <div\n              style={{\n                position: 'absolute',\n                bottom: '0px',\n                left: `calc(${this.state.posTimestamp * 100 + '% - 27px'})`,\n                pointerEvents: 'none',\n              }}\n            >\n              <Label basic color=\"blue\" pointing=\"below\">\n                <div style={{ width: '34px' }}>\n                  {formatTimestamp(this.state.currTimestamp)}\n                </div>\n              </Label>\n            </div>\n          )}\n        </Progress>\n        <div className=\"control\">{formatTimestamp(duration)}</div>\n        <Icon\n          size=\"large\"\n          onClick={toggleSubtitle}\n          className=\"control action\"\n          name={subtitled ? 'closed captioning' : 'closed captioning outline'}\n          title=\"Captions\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(false)}\n          className=\"control action\"\n          style={{ transform: 'rotate(90deg)' }}\n          name=\"window maximize outline\"\n          title=\"Theater Mode\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={() => fullScreen(true)}\n          className=\"control action\"\n          name=\"expand\"\n          title=\"Fullscreen\"\n        />\n        <Icon\n          size=\"large\"\n          onClick={toggleMute}\n          className=\"control action\"\n          name={muted ? 'volume off' : 'volume up'}\n          title=\"Mute\"\n        />\n        <div style={{ width: '100px', marginRight: '10px' }}>\n          <Slider\n            value={this.props.getVolume()}\n            color=\"blue\"\n            settings={{\n              min: 0,\n              max: 1,\n              step: 0.01,\n              onChange: (value: number) => {\n                this.props.setVolume(value);\n              },\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button, Table, Message } from 'semantic-ui-react';\nimport {\n  GoogleReCaptchaProvider,\n  withGoogleReCaptcha,\n} from 'react-google-recaptcha-v3';\nimport { SignInButton } from '../TopBar/TopBar';\nimport { serverPath } from '../../utils';\nimport firebase from 'firebase/compat/app';\n\nexport class VBrowserModal extends React.Component<{\n  closeModal: Function;\n  startVBrowser: Function;\n  isSubscriber: Boolean;\n  subscribeButton: JSX.Element;\n  user?: firebase.User;\n}> {\n  state = { isVMPoolFull: false };\n  async componentDidMount() {\n    const resp = await fetch(serverPath + '/metadata');\n    const metadata = await resp.json();\n    // TODO temporary check the default pool\n    if (metadata.isVMPoolFull?.US) {\n      this.setState({ isVMPoolFull: true });\n    }\n  }\n  render() {\n    const { closeModal, startVBrowser } = this.props;\n    const LaunchButton = withGoogleReCaptcha(\n      ({ googleReCaptchaProps, large }: any) => (\n        <Button\n          size=\"large\"\n          color={large ? 'orange' : undefined}\n          onClick={async () => {\n            const rcToken = await (googleReCaptchaProps as any).executeRecaptcha(\n              'launchVBrowser'\n            );\n            startVBrowser(rcToken, { size: large ? 'large' : '' });\n            closeModal();\n          }}\n        >\n          {large ? 'Launch VBrowser+' : 'Continue with Free'}\n        </Button>\n      )\n    );\n    const vmPoolFullMessage = (\n      <Message\n        size=\"small\"\n        color=\"red\"\n        icon=\"hourglass two\"\n        style={{ width: '380px' }}\n        header=\"No Free VBrowsers Available\"\n        content={\n          <div>\n            <div>All of the free VBrowsers are currently being used.</div>\n            <div>\n              Please consider subscribing for anytime access to faster\n              VBrowsers, or try again later.\n            </div>\n          </div>\n        }\n      />\n    );\n    return (\n      <GoogleReCaptchaProvider\n        reCaptchaKey={process.env.REACT_APP_RECAPTCHA_SITE_KEY as string}\n        useRecaptchaNet\n      >\n        <Modal open={true} onClose={closeModal as any}>\n          <Modal.Header>Launch a VBrowser</Modal.Header>\n          <Modal.Content image>\n            <Modal.Description>\n              <div>\n                You're about to launch a virtual browser to share in this room.\n              </div>\n              <Table definition unstackable striped celled>\n                <Table.Header>\n                  <Table.Row>\n                    <Table.HeaderCell />\n                    <Table.HeaderCell>WatchParty Free</Table.HeaderCell>\n                    <Table.HeaderCell>WatchParty Plus</Table.HeaderCell>\n                  </Table.Row>\n                </Table.Header>\n\n                <Table.Body>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Resolution</Table.Cell>\n                    <Table.Cell>720p</Table.Cell>\n                    <Table.Cell>1080p</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser CPU/RAM</Table.Cell>\n                    <Table.Cell>Standard</Table.Cell>\n                    <Table.Cell>Extra</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell>VBrowser Session Length</Table.Cell>\n                    <Table.Cell>3 hours</Table.Cell>\n                    <Table.Cell>24 hours</Table.Cell>\n                  </Table.Row>\n                  <Table.Row>\n                    <Table.Cell></Table.Cell>\n                    <Table.Cell>\n                      {this.props.user ? (\n                        this.state.isVMPoolFull ? (\n                          vmPoolFullMessage\n                        ) : (\n                          <LaunchButton />\n                        )\n                      ) : (\n                        <SignInButton fluid user={this.props.user} />\n                      )}\n                    </Table.Cell>\n                    <Table.Cell>\n                      {this.props.isSubscriber ? (\n                        <LaunchButton large />\n                      ) : (\n                        this.props.subscribeButton\n                      )}\n                    </Table.Cell>\n                  </Table.Row>\n                </Table.Body>\n              </Table>\n            </Modal.Description>\n          </Modal.Content>\n        </Modal>\n      </GoogleReCaptchaProvider>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Table, Icon } from 'semantic-ui-react';\n\nexport class PermanentRoomModal extends React.Component<{\n  closeModal: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any} closeIcon>\n        <Modal.Header>Permanent Rooms</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>\n              Registered users have the ability to make their rooms permanent.\n              Subscribed users can create multiple permanent rooms.\n            </div>\n            <Table definition unstackable striped celled>\n              <Table.Header>\n                <Table.Row>\n                  <Table.HeaderCell />\n                  <Table.HeaderCell>Temporary</Table.HeaderCell>\n                  <Table.HeaderCell>Permanent</Table.HeaderCell>\n                </Table.Row>\n              </Table.Header>\n\n              <Table.Body>\n                <Table.Row>\n                  <Table.Cell>Expiry</Table.Cell>\n                  <Table.Cell>After 24 hours of inactivity</Table.Cell>\n                  <Table.Cell>Never</Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Room Passwords</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Disable Chat</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Kick Users</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                <Table.Row>\n                  <Table.Cell>Custom Room URLs (subscribers)</Table.Cell>\n                  <Table.Cell></Table.Cell>\n                  <Table.Cell>\n                    <Icon name=\"check\" />\n                  </Table.Cell>\n                </Table.Row>\n                {/* <Table.Row>\n                  <Table.Cell>Max Room Capacity (subscribers)</Table.Cell>\n                    <Table.Cell>20</Table.Cell>\n                    <Table.Cell>100</Table.Cell>\n                  </Table.Row> */}\n              </Table.Body>\n            </Table>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React, { useState, useCallback } from 'react';\nimport {\n  Icon,\n  Divider,\n  Radio,\n  CheckboxProps,\n  Message,\n  Input,\n  Button,\n  Label,\n} from 'semantic-ui-react';\n// import { SignInButton } from '../TopBar/TopBar';\nimport { getCurrentSettings, updateSettings } from './LocalSettings';\nimport axios from 'axios';\nimport { serverPath } from '../../utils';\nimport { PermanentRoomModal } from '../Modal/PermanentRoomModal';\nimport firebase from 'firebase/compat/app';\nimport { Socket } from 'socket.io-client';\n\ninterface SettingsTabProps {\n  hide: boolean;\n  user: firebase.User | undefined;\n  roomLock: string;\n  setRoomLock: Function;\n  socket: Socket;\n  isSubscriber: boolean;\n  roomId: string;\n  owner: string | undefined;\n  setOwner: Function;\n  vanity: string | undefined;\n  setVanity: Function;\n  roomLink: string;\n  password: string | undefined;\n  setPassword: Function;\n  isChatDisabled: boolean;\n  setIsChatDisabled: Function;\n  clearChat: Function;\n}\n\nexport const SettingsTab = ({\n  hide,\n  user,\n  roomLock,\n  setRoomLock,\n  socket,\n  isSubscriber,\n  owner,\n  vanity,\n  setVanity,\n  roomLink,\n  password,\n  setPassword,\n  isChatDisabled,\n  setIsChatDisabled,\n  clearChat,\n}: SettingsTabProps) => {\n  const [updateTS, setUpdateTS] = useState(0);\n  const [permModalOpen, setPermModalOpen] = useState(false);\n  const [validVanity, setValidVanity] = useState(true);\n  const [validVanityLoading, setValidVanityLoading] = useState(false);\n  const [adminSettingsChanged, setAdminSettingsChanged] = useState(false);\n\n  const setRoomState = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomState', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const setRoomOwner = useCallback(\n    async (data: any) => {\n      const token = await user?.getIdToken();\n      socket.emit('CMD:setRoomOwner', {\n        uid: user?.uid,\n        token,\n        ...data,\n      });\n    },\n    [socket, user]\n  );\n  const checkValidVanity = useCallback(\n    async (input: string) => {\n      if (!input) {\n        setValidVanity(true);\n        return;\n      }\n      setValidVanity(false);\n      setValidVanityLoading(true);\n      const response = await axios.get(serverPath + '/resolveRoom/' + input);\n      const data = response.data;\n      setValidVanityLoading(false);\n      if (\n        data &&\n        data.vanity &&\n        data.vanity !== roomLink.split('/').slice(-1)[0]\n      ) {\n        // Already exists and doesn't match current room\n        setValidVanity(false);\n      } else {\n        setValidVanity(true);\n      }\n    },\n    [setValidVanity, roomLink]\n  );\n  const lockDisabled =\n    !Boolean(user) || Boolean(roomLock && roomLock !== user?.uid);\n  const permanentDisabled =\n    !Boolean(user) || Boolean(owner && owner !== user?.uid);\n\n  return (\n    <div\n      style={{\n        display: hide ? 'none' : 'block',\n        color: 'white',\n        overflow: 'scroll',\n        padding: '8px',\n      }}\n    >\n      {permModalOpen && (\n        <PermanentRoomModal\n          closeModal={() => setPermModalOpen(false)}\n        ></PermanentRoomModal>\n      )}\n      <div className=\"sectionHeader\">Room Settings</div>\n      {!user && (\n        <Message color=\"yellow\" size=\"tiny\">\n          You need to be signed in to change these settings.\n        </Message>\n      )}\n      <SettingRow\n        icon={roomLock ? 'lock' : 'lock open'}\n        name={`Lock Room`}\n        description=\"Only the person who locked the room can control the video.\"\n        checked={Boolean(roomLock)}\n        disabled={lockDisabled}\n        onChange={(_e, data) => setRoomLock(data.checked)}\n      />\n      {\n        <SettingRow\n          icon={'clock'}\n          name={`Make Room Permanent`}\n          description={\n            'Prevent this room from expiring. This also unlocks additional room features.'\n          }\n          helpIcon={\n            <Icon\n              name=\"help circle\"\n              onClick={() => setPermModalOpen(true)}\n              style={{ cursor: 'pointer' }}\n            ></Icon>\n          }\n          checked={Boolean(owner)}\n          disabled={permanentDisabled}\n          onChange={(_e, data) => setRoomOwner({ undo: !data.checked })}\n        />\n      }\n      {owner && owner === user?.uid && (\n        <div className=\"sectionHeader\">Admin Settings</div>\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'key'}\n          name={`Set Room Password`}\n          description=\"Users must know this password in order to join the room.\"\n          content={\n            <Input\n              value={password}\n              size=\"mini\"\n              onChange={(e) => {\n                setAdminSettingsChanged(true);\n                setPassword(e.target.value);\n              }}\n              fluid\n            />\n          }\n          disabled={false}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i cursor'}\n          name={`Disable Chat`}\n          description=\"Prevent users from sending messages in chat.\"\n          checked={Boolean(isChatDisabled)}\n          disabled={false}\n          onChange={(_e, data) => {\n            setAdminSettingsChanged(true);\n            setIsChatDisabled(Boolean(data.checked));\n          }}\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'i delete'}\n          name={`Clear Chat`}\n          description=\"Delete all existing chat messages\"\n          disabled={false}\n          content={\n            <Button\n              color=\"red\"\n              icon\n              labelPosition=\"left\"\n              onClick={() => clearChat()}\n            >\n              <Icon name=\"delete\" />\n              Delete Messages\n            </Button>\n          }\n        />\n      )}\n      {owner && owner === user?.uid && (\n        <SettingRow\n          icon={'linkify'}\n          name={`Set Custom Room URL`}\n          description=\"Set a custom URL for this room. Inappropriate names may be revoked.\"\n          checked={Boolean(roomLock)}\n          disabled={!isSubscriber}\n          subOnly={true}\n          content={\n            <React.Fragment>\n              <Input\n                value={vanity}\n                disabled={!isSubscriber}\n                onChange={(e) => {\n                  setAdminSettingsChanged(true);\n                  checkValidVanity(e.target.value);\n                  setVanity(e.target.value);\n                }}\n                label={<Label>{`${window.location.origin}/r/`}</Label>}\n                loading={validVanityLoading}\n                fluid\n                size=\"mini\"\n                icon\n                action={\n                  validVanity ? (\n                    <Icon name=\"checkmark\" color=\"green\" />\n                  ) : (\n                    <Icon name=\"close\" color=\"red\" />\n                  )\n                }\n              ></Input>\n            </React.Fragment>\n          }\n        />\n      )}\n      <p />\n      {owner && owner === user?.uid && (\n        <Button\n          primary\n          disabled={!validVanity || !adminSettingsChanged}\n          labelPosition=\"left\"\n          icon\n          fluid\n          onClick={() => {\n            setRoomState({\n              vanity: vanity,\n              password: password,\n              isChatDisabled: isChatDisabled,\n            });\n            setAdminSettingsChanged(false);\n          }}\n        >\n          <Icon name=\"save\" />\n          Save Admin Settings\n        </Button>\n      )}\n      {/* MEDIA_PATH */}\n      <div className=\"sectionHeader\">Local Settings</div>\n      <SettingRow\n        updateTS={updateTS}\n        icon=\"bell\"\n        name=\"Disable chat notification sound\"\n        description=\"Don't play a sound when a chat message is sent while you're on another tab\"\n        checked={Boolean(getCurrentSettings().disableChatSound)}\n        disabled={false}\n        onChange={(_e, data) => {\n          updateSettings(\n            JSON.stringify({\n              ...getCurrentSettings(),\n              disableChatSound: data.checked,\n            })\n          );\n          setUpdateTS(Number(new Date()));\n        }}\n      />\n    </div>\n  );\n};\n\nconst SettingRow = ({\n  icon,\n  name,\n  description,\n  checked,\n  disabled,\n  onChange,\n  content,\n  subOnly,\n  helpIcon,\n}: {\n  icon: string;\n  name: string;\n  description?: React.ReactNode;\n  checked?: boolean;\n  disabled: boolean;\n  updateTS?: number;\n  onChange?: (e: React.FormEvent, data: CheckboxProps) => void;\n  content?: React.ReactNode;\n  subOnly?: boolean;\n  helpIcon?: React.ReactNode;\n}) => {\n  return (\n    <React.Fragment>\n      <Divider inverted horizontal />\n      <div>\n        <div style={{ display: 'flex' }}>\n          <Icon size=\"large\" name={icon as any} />\n          <div>\n            {name} {helpIcon}\n            {subOnly ? (\n              <Label size=\"mini\" color=\"orange\">\n                Subscriber only\n              </Label>\n            ) : null}\n          </div>\n          {!content && (\n            <Radio\n              style={{ marginLeft: 'auto' }}\n              toggle\n              checked={checked}\n              disabled={disabled}\n              onChange={onChange}\n            />\n          )}\n        </div>\n        <div className=\"smallText\" style={{ marginBottom: '8px' }}>\n          {description}\n        </div>\n        {content}\n      </div>\n    </React.Fragment>\n  );\n};\n","import React from 'react';\nimport { Modal, Header, Button, Icon } from 'semantic-ui-react';\n\nexport const ErrorModal = ({ error }: { error: string }) => {\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        {error}\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Button\n          primary\n          size=\"huge\"\n          onClick={() => {\n            window.location.href = '/';\n          }}\n          icon\n          labelPosition=\"left\"\n        >\n          <Icon name=\"home\" />\n          Go to home page\n        </Button>\n      </div>\n    </Modal>\n  );\n};\n","import React, { useCallback } from 'react';\nimport { Modal, Header, Input, Icon } from 'semantic-ui-react';\n\nexport const PasswordModal = ({\n  savedPasswords,\n  roomId,\n}: {\n  savedPasswords: StringDict;\n  roomId: string;\n}) => {\n  const setPassword = useCallback(() => {\n    window.localStorage.setItem(\n      'watchparty-passwords',\n      JSON.stringify({\n        ...savedPasswords,\n        [roomId]: (document.getElementById('roomPassword') as HTMLInputElement)\n          ?.value,\n      })\n    );\n    window.location.reload();\n  }, [savedPasswords, roomId]);\n  return (\n    <Modal inverted basic open>\n      <Header as=\"h1\" style={{ textAlign: 'center' }}>\n        This room requires a password.\n      </Header>\n      <div style={{ display: 'flex', justifyContent: 'center' }}>\n        <Input\n          id=\"roomPassword\"\n          type=\"password\"\n          size=\"large\"\n          onKeyPress={(e: any) => e.key === 'Enter' && setPassword()}\n          icon={\n            <Icon onClick={setPassword} name=\"key\" inverted circular link />\n          }\n        />\n      </div>\n    </Modal>\n  );\n};\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class ScreenShareModal extends React.Component<{\n  closeModal: Function;\n  startScreenShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share Your Screen</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share your screen.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To share audio, you need to check the \"Share audio\" checkbox in\n                the screen selection dialog.\n              </li>\n              <li>\n                Audio sharing is only supported if sharing your entire screen or\n                a browser tab, not an application.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startScreenShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Screenshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import React from 'react';\nimport { Modal, Button } from 'semantic-ui-react';\n\nexport class FileShareModal extends React.Component<{\n  closeModal: Function;\n  startFileShare: Function;\n}> {\n  render() {\n    const { closeModal } = this.props;\n    return (\n      <Modal open={true} onClose={closeModal as any}>\n        <Modal.Header>Share A File</Modal.Header>\n        <Modal.Content image>\n          <Modal.Description>\n            <div>You're about to share a file from your device.</div>\n            <ul>\n              <li>This feature is only supported on Chrome and Edge.</li>\n              <li>\n                To test whether the file can be shared, you can try opening it\n                locally with your browser to see if it will play properly.\n              </li>\n              <li>\n                Certain codecs, such as HEVC, AC3, and H265 will not play in\n                Chrome (they may work in Edge)\n              </li>\n              <li>\n                There is a Chrome issue where the sharer needs to{' '}\n                <a\n                  target=\"_blank\"\n                  rel=\"noreferrer\"\n                  href=\"https://www.howtogeek.com/412738/how-to-turn-hardware-acceleration-on-and-off-in-chrome/\"\n                >\n                  disable hardware acceleration\n                </a>{' '}\n                in order for others to receive video.\n              </li>\n            </ul>\n            <Button\n              onClick={() => {\n                this.props.startFileShare();\n                this.props.closeModal();\n              }}\n            >\n              Start Fileshare\n            </Button>\n          </Modal.Description>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n","import './App.css';\n\nimport querystring from 'querystring';\nimport axios from 'axios';\nimport magnet from 'magnet-uri';\nimport React from 'react';\nimport {\n  Button,\n  Dimmer,\n  Dropdown,\n  DropdownProps,\n  Grid,\n  Icon,\n  Input,\n  Loader,\n  Message,\n  Popup,\n  Progress,\n  Menu,\n  Modal,\n} from 'semantic-ui-react';\nimport io, { Socket } from 'socket.io-client';\nimport { default as toWebVTT } from 'srt-webvtt';\nimport {\n  formatSpeed,\n  getMediaType,\n  iceServers,\n  isMobile,\n  serverPath,\n  testAutoplay,\n  openFileSelector,\n  getAndSaveClientId,\n  calculateMedian,\n  getUserImage,\n} from '../../utils';\nimport { generateName } from '../../utils/generateName';\nimport { Chat } from '../Chat';\nimport { TopBar } from '../TopBar';\nimport { VBrowser } from '../VBrowser';\nimport { VideoChat } from '../VideoChat';\nimport { getCurrentSettings } from '../Settings';\nimport { MultiStreamModal } from '../Modal/MultiStreamModal';\nimport { ComboBox } from '../ComboBox/ComboBox';\nimport { SearchComponent } from '../SearchComponent/SearchComponent';\nimport { Controls } from '../Controls/Controls';\nimport { VBrowserModal } from '../Modal/VBrowserModal';\nimport { SettingsTab } from '../Settings/SettingsTab';\nimport { ErrorModal } from '../Modal/ErrorModal';\nimport { PasswordModal } from '../Modal/PasswordModal';\nimport { SubscribeButton } from '../SubscribeButton/SubscribeButton';\nimport { ScreenShareModal } from '../Modal/ScreenShareModal';\nimport { FileShareModal } from '../Modal/FileShareModal';\nimport firebase from 'firebase/compat/app';\n\ndeclare global {\n  interface Window {\n    onYouTubeIframeAPIReady: any;\n    YT: any;\n    FB: any;\n    fbAsyncInit: Function;\n    Hls: any;\n  }\n}\n\ninterface AppProps {\n  vanity?: string;\n  user?: firebase.User;\n  isSubscriber: boolean;\n  isCustomer: boolean;\n}\n\ninterface AppState {\n  state: 'init' | 'starting' | 'connected';\n  currentMedia: string;\n  currentSubtitle: string;\n  currentMediaPaused: boolean;\n  participants: User[];\n  rosterUpdateTS: Number;\n  chat: ChatMessage[];\n  playlist: PlaylistVideo[];\n  tsMap: NumberDict;\n  nameMap: StringDict;\n  pictureMap: StringDict;\n  myName: string;\n  myPicture: string;\n  loading: boolean;\n  scrollTimestamp: number;\n  fullScreen: boolean;\n  controlsTimestamp: number;\n  watchOptions: SearchResult[];\n  isScreenSharing: boolean;\n  isScreenSharingFile: boolean;\n  isVBrowser: boolean;\n  isYouTubeReady: boolean;\n  isAutoPlayable: boolean;\n  downloaded: number;\n  total: number;\n  speed: number;\n  connections: number;\n  multiStreamSelection?: any[];\n  error: string;\n  isErrorAuth: boolean;\n  settings: Settings;\n  vBrowserResolution: string;\n  isVBrowserLarge: boolean;\n  nonPlayableMedia: boolean;\n  currentTab: string;\n  isSubscribeModalOpen: boolean;\n  isVBrowserModalOpen: boolean;\n  isScreenShareModalOpen: boolean;\n  isFileShareModalOpen: boolean;\n  roomLock: string;\n  controller?: string;\n  savedPasswords: StringDict;\n  roomId: string;\n  errorMessage: string;\n  successMessage: string;\n  isChatDisabled: boolean;\n  showRightBar: boolean;\n  owner: string | undefined;\n  vanity: string | undefined;\n  password: string | undefined;\n  roomLink: string;\n}\n\nexport default class App extends React.Component<AppProps, AppState> {\n  state: AppState = {\n    state: 'starting',\n    currentMedia: '',\n    currentMediaPaused: false,\n    currentSubtitle: '',\n    participants: [],\n    rosterUpdateTS: Number(new Date()),\n    chat: [],\n    playlist: [],\n    tsMap: {},\n    nameMap: {},\n    pictureMap: {},\n    myName: '',\n    myPicture: '',\n    loading: true,\n    scrollTimestamp: 0,\n    fullScreen: false,\n    controlsTimestamp: 0,\n    watchOptions: [],\n    isScreenSharing: false,\n    isScreenSharingFile: false,\n    isVBrowser: false,\n    isYouTubeReady: false,\n    isAutoPlayable: true,\n    downloaded: 0,\n    total: 0,\n    speed: 0,\n    connections: 0,\n    multiStreamSelection: undefined,\n    error: '',\n    isErrorAuth: false,\n    settings: {},\n    vBrowserResolution: '1280x720@30',\n    isVBrowserLarge: false,\n    nonPlayableMedia: false,\n    currentTab:\n      (querystring.parse(window.location.search.substring(1)).tab as string) ||\n      'chat',\n    isSubscribeModalOpen: false,\n    isVBrowserModalOpen: false,\n    isScreenShareModalOpen: false,\n    isFileShareModalOpen: false,\n    roomLock: '',\n    controller: '',\n    roomId: '',\n    savedPasswords: {},\n    errorMessage: '',\n    successMessage: '',\n    isChatDisabled: false,\n    showRightBar: true,\n    owner: undefined,\n    vanity: undefined,\n    password: undefined,\n    roomLink: '',\n  };\n  socket: Socket = null as any;\n  watchPartyYTPlayer: any = null;\n  ytDebounce = true;\n  screenShareStream?: MediaStream;\n  screenHostPC: PCDict = {};\n  screenSharePC?: RTCPeerConnection;\n  progressUpdater?: number;\n  heartbeat: number | undefined = undefined;\n\n  async componentDidMount() {\n    document.onfullscreenchange = this.onFullScreenChange;\n    document.onkeydown = this.onKeydown;\n\n    // Send heartbeat to the server\n    this.heartbeat = window.setInterval(() => {\n      window.fetch(serverPath + '/ping');\n    }, 10 * 60 * 1000);\n\n    const canAutoplay = await testAutoplay();\n    this.setState({ isAutoPlayable: canAutoplay });\n    this.loadSettings();\n    this.loadYouTube();\n    this.init();\n  }\n\n  getRoomLink = (vanity: string) => {\n    if (vanity) {\n      return `${window.location.origin}/r/${vanity}`;\n    }\n    return `${window.location.origin}${this.state.roomId.replace('/', '#')}`;\n  };\n\n  handleRoomState = (data: any) => {\n    this.setOwner(data.owner);\n    this.setVanity(data.vanity);\n    this.setPassword(data.password);\n    this.setRoomLink(this.getRoomLink(data.vanity));\n    this.setIsChatDisabled(data.isChatDisabled);\n    window.history.replaceState('', '', this.getRoomLink(data.vanity));\n  };\n\n  componentWillUnmount() {\n    document.removeEventListener('fullscreenchange', this.onFullScreenChange);\n    document.removeEventListener('keydown', this.onKeydown);\n    window.clearInterval(this.heartbeat);\n  }\n\n  componentDidUpdate(prevProps: AppProps) {\n    if (this.props.user && !prevProps.user) {\n      this.loadSignInData();\n    }\n  }\n\n  loadSettings = async () => {\n    // Load settings from localstorage and remote\n    const customSettingsData = await fetch(serverPath + '/settings');\n    const customSettings = await customSettingsData.json();\n    let settings = { ...getCurrentSettings(), ...customSettings };\n    this.setState({ settings });\n  };\n\n  loadSignInData = async () => {\n    const user = this.props.user;\n    if (user && this.socket) {\n      // NOTE: firebase auth doesn't provide the actual first name data that individual providers (G/FB) do\n      // It's accessible at the time the user logs in but not afterward\n      // If we want accurate surname/given name we'll need to save that somewhere\n      const firstName = user.displayName?.split(' ')[0];\n      if (firstName) {\n        this.updateName(null, { value: firstName });\n      }\n      const userImage = await getUserImage(user);\n      if (userImage) {\n        this.updatePicture(userImage);\n      }\n      this.updateUid(user);\n    }\n  };\n\n  loadYouTube = () => {\n    // This code loads the IFrame Player API code asynchronously.\n    const tag = document.createElement('script');\n    tag.src = 'https://www.youtube.com/iframe_api';\n    document.body.append(tag);\n    window.onYouTubeIframeAPIReady = () => {\n      // Note: this fails silently if the element is not available\n      const ytPlayer = new window.YT.Player('leftYt', {\n        events: {\n          onReady: () => {\n            this.watchPartyYTPlayer = ytPlayer;\n            this.setState({ isYouTubeReady: true, loading: false });\n            // We might have failed to play YT originally, ask for the current video again\n            if (this.isYouTube()) {\n              this.socket.emit('CMD:askHost');\n            }\n          },\n          onStateChange: (e: any) => {\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.CUED\n            ) {\n              this.setState({ loading: false });\n            }\n            if (\n              getMediaType(this.state.currentMedia) === 'youtube' &&\n              e.data === window.YT?.PlayerState?.ENDED\n            ) {\n              this.onVideoEnded();\n            }\n            // console.log(this.ytDebounce, e.data, this.watchPartyYTPlayer?.getVideoUrl());\n            if (\n              this.ytDebounce &&\n              ((e.data === window.YT?.PlayerState?.PLAYING &&\n                this.state.currentMediaPaused) ||\n                (e.data === window.YT?.PlayerState?.PAUSED &&\n                  !this.state.currentMediaPaused))\n            ) {\n              this.ytDebounce = false;\n              if (e.data === window.YT?.PlayerState?.PLAYING) {\n                this.socket.emit('CMD:play');\n                this.doPlay();\n              } else {\n                this.socket.emit('CMD:pause');\n                this.doPause();\n              }\n              window.setTimeout(() => (this.ytDebounce = true), 500);\n            }\n          },\n        },\n      });\n    };\n  };\n\n  setOwner = (owner: string) => {\n    this.setState({ owner });\n  };\n  setVanity = (vanity: string | undefined) => {\n    this.setState({ vanity });\n  };\n  setPassword = (password: string | undefined) => {\n    this.setState({ password });\n  };\n  setRoomLink = (roomLink: string) => {\n    this.setState({ roomLink });\n  };\n\n  init = async () => {\n    // Load room ID from url\n    let roomId = '/default';\n    let query = window.location.hash.substring(1);\n    if (query) {\n      roomId = '/' + query;\n    }\n    // if a vanity name, resolve the url to a room id\n    if (this.props.vanity) {\n      try {\n        const response = await axios.get(\n          serverPath + '/resolveRoom/' + this.props.vanity\n        );\n        if (response.data.roomId) {\n          roomId = response.data.roomId;\n        } else {\n          throw new Error('failed to resolve room name');\n        }\n      } catch (e) {\n        console.error(e);\n        this.setState({ error: \"There's no room with this name.\" });\n        return;\n      }\n    }\n    this.setState({ roomId }, () => {\n      this.join(roomId);\n    });\n  };\n\n  join = async (roomId: string) => {\n    let password = '';\n    try {\n      const savedPasswordsString = window.localStorage.getItem(\n        'watchparty-passwords'\n      );\n      const savedPasswords = JSON.parse(savedPasswordsString || '{}');\n      this.setState({ savedPasswords });\n      password = savedPasswords[roomId] || '';\n    } catch (e) {\n      console.warn('[ALERT] Could not parse saved passwords');\n    }\n    let shard = '';\n    if (/^\\d/.test(roomId.slice(1))) {\n      // Rooms assigned to shards start with a number\n      shard = /^\\d+/.exec(roomId.slice(1))?.[0] ?? '';\n    }\n    const socket = io(serverPath + roomId, {\n      transports: ['websocket'],\n      query: {\n        clientId: getAndSaveClientId(),\n        password,\n        shard,\n      },\n    });\n    this.socket = socket;\n    socket.on('connect', async () => {\n      this.setState({ state: 'connected' });\n      // Load username from localstorage\n      let userName = window.localStorage.getItem('watchparty-username');\n      this.updateName(null, { value: userName || generateName() });\n      this.loadSignInData();\n    });\n    socket.on('error', (err: any) => {\n      console.error(err);\n      if (err === 'Invalid namespace') {\n        this.setState({ error: \"There's no room with this name.\" });\n      } else if (err === 'not authorized') {\n        this.setState({ isErrorAuth: true });\n      } else if (err === 'room full') {\n        this.setState({ error: 'This room is full.' });\n      } else {\n        this.setState({ error: 'An error occurred.' });\n      }\n    });\n    socket.on('errorMessage', (err: string) => {\n      this.setState({ errorMessage: err });\n      setTimeout(() => {\n        this.setState({ errorMessage: '' });\n      }, 3000);\n    });\n    socket.on('successMessage', (success: string) => {\n      this.setState({ successMessage: success });\n      setTimeout(() => {\n        this.setState({ successMessage: '' });\n      }, 3000);\n    });\n    socket.on('kicked', () => {\n      window.location.assign('/');\n    });\n    socket.on('REC:play', () => {\n      this.doPlay();\n    });\n    socket.on('REC:pause', () => {\n      this.doPause();\n    });\n    socket.on('REC:seek', (data: any) => {\n      this.doSeek(data);\n    });\n    socket.on('REC:subtitle', (data: string) => {\n      this.setState(\n        { currentSubtitle: serverPath + '/subtitle/' + data },\n        () => {\n          if (!this.isSubtitled()) {\n            this.toggleSubtitle();\n          }\n        }\n      );\n    });\n    socket.on('REC:changeController', (data: string) => {\n      this.setState({ controller: data });\n    });\n    socket.on('REC:host', async (data: HostState) => {\n      let currentMedia = data.video || '';\n      if (this.isScreenShare() && !currentMedia.startsWith('screenshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isFileShare() && !currentMedia.startsWith('fileshare://')) {\n        this.stopScreenShare();\n      }\n      if (this.isScreenShare() && currentMedia.startsWith('screenshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isFileShare() && currentMedia.startsWith('fileshare://')) {\n        // Ignore, it's probably a reconnection\n        return;\n      }\n      if (this.isVBrowser() && !currentMedia.startsWith('vbrowser://')) {\n        this.stopVBrowser();\n      }\n      this.setState(\n        {\n          currentMedia,\n          currentMediaPaused: data.paused,\n          currentSubtitle: Boolean(data.subtitle)\n            ? serverPath + '/subtitle/' + data.subtitle\n            : '',\n          loading: Boolean(data.video),\n          nonPlayableMedia: false,\n          isVBrowserLarge: data.isVBrowserLarge,\n          vBrowserResolution: data.isVBrowserLarge\n            ? '1920x1080@30'\n            : '1280x720@30',\n          controller: data.controller,\n        },\n        () => {\n          if (\n            this.state.isScreenSharingFile ||\n            (this.isVBrowser() && this.getVBrowserHost())\n          ) {\n            console.log(\n              'skipping REC:host video since fileshare is using leftVideo or this is a vbrowser'\n            );\n            this.setLoadingFalse();\n            return;\n          }\n          // Stop all players\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          leftVideo?.pause();\n          this.watchPartyYTPlayer?.stopVideo();\n\n          if (this.isYouTube() && !this.watchPartyYTPlayer) {\n            console.log(\n              'YT player not ready, onReady callback will retry when it is'\n            );\n          } else if (this.isVBrowser()) {\n            console.log(\n              'not playing video as this is a vbrowser:// placeholder'\n            );\n          } else {\n            // Start this video\n            this.doSrc(data.video, data.videoTS);\n            if (!data.paused) {\n              this.doPlay();\n            }\n            if (data.subtitle) {\n              if (!this.isSubtitled()) {\n                this.toggleSubtitle();\n              }\n            }\n            // One time, when we're ready to play\n            leftVideo?.addEventListener(\n              'canplay',\n              () => {\n                this.setLoadingFalse();\n                this.jumpToLeader();\n              },\n              { once: true }\n            );\n\n            // Progress updater\n            window.clearInterval(this.progressUpdater);\n            this.setState({ downloaded: 0, total: 0, speed: 0 });\n            if (currentMedia.includes('/stream?torrent=magnet')) {\n              this.progressUpdater = window.setInterval(async () => {\n                const response = await window.fetch(\n                  currentMedia.replace('/stream', '/progress')\n                );\n                const data = await response.json();\n                this.setState({\n                  downloaded: data.downloaded,\n                  total: data.total,\n                  speed: data.speed,\n                  connections: data.connections,\n                });\n              }, 1000);\n            }\n          }\n        }\n      );\n    });\n    socket.on('REC:chat', (data: ChatMessage) => {\n      if (\n        !getCurrentSettings().disableChatSound &&\n        document.visibilityState &&\n        document.visibilityState !== 'visible'\n      ) {\n        new Audio('/clearly.mp3').play();\n      }\n      this.state.chat.push(data);\n      this.setState({\n        chat: this.state.chat,\n        scrollTimestamp: Number(new Date()),\n      });\n    });\n    socket.on('REC:tsMap', (data: NumberDict) => {\n      this.setState({ tsMap: data });\n      this.syncSubtitle();\n    });\n    socket.on('REC:nameMap', (data: StringDict) => {\n      this.setState({ nameMap: data });\n    });\n    socket.on('REC:pictureMap', (data: StringDict) => {\n      this.setState({ pictureMap: data });\n    });\n    socket.on('REC:lock', (data: string) => {\n      this.setState({ roomLock: data });\n    });\n    socket.on('roster', (data: User[]) => {\n      this.setState(\n        { participants: data, rosterUpdateTS: Number(new Date()) },\n        () => {\n          this.updateScreenShare();\n        }\n      );\n    });\n    socket.on('chatinit', (data: ChatMessage[]) => {\n      this.setState({ chat: data, scrollTimestamp: Number(new Date()) });\n    });\n    socket.on('playlist', (data: PlaylistVideo[]) => {\n      this.setState({ playlist: data });\n    });\n    socket.on('signalSS', async (data: any) => {\n      // Handle messages received from signaling server\n      const msg = data.msg;\n      const from = data.from;\n      // Determine whether the message came from the sharer or the sharee\n      const pc = (data.sharer\n        ? this.screenSharePC\n        : this.screenHostPC[from]) as RTCPeerConnection;\n      if (msg.ice !== undefined) {\n        pc.addIceCandidate(new RTCIceCandidate(msg.ice));\n      } else if (msg.sdp && msg.sdp.type === 'offer') {\n        // console.log('offer');\n        // TODO Currently ios/Safari cannot handle this property, so remove it from the offer\n        const _sdp = msg.sdp.sdp\n          .split('\\n')\n          .filter((line: string) => {\n            return line.trim() !== 'a=extmap-allow-mixed';\n          })\n          .join('\\n');\n        msg.sdp.sdp = _sdp;\n        await pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n        const answer = await pc.createAnswer();\n        answer.sdp = answer.sdp?.replace(\n          'useinbandfec=1',\n          'useinbandfec=1; stereo=1; maxaveragebitrate=510000'\n        );\n        await pc.setLocalDescription(answer);\n        this.sendSignalSS(from, { sdp: pc.localDescription }, !data.sharer);\n      } else if (msg.sdp && msg.sdp.type === 'answer') {\n        pc.setRemoteDescription(new RTCSessionDescription(msg.sdp));\n      }\n    });\n    socket.on('REC:getRoomState', this.handleRoomState);\n    window.setInterval(() => {\n      if (this.state.currentMedia) {\n        this.socket.emit('CMD:ts', this.getCurrentTime());\n      }\n    }, 1000);\n  };\n\n  setupFileShare = async () => {\n    const files = await openFileSelector();\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    leftVideo.srcObject = null;\n    leftVideo.src = URL.createObjectURL(file);\n    leftVideo.play();\n    //@ts-ignore\n    const stream = leftVideo.captureStream ? leftVideo.captureStream() : {};\n    // Can render video to a canvas to resize it, reduce size\n    stream.onaddtrack = () => {\n      console.log(stream, stream.getVideoTracks(), stream.getAudioTracks());\n      if (\n        !this.screenShareStream &&\n        stream.getVideoTracks().length &&\n        stream.getAudioTracks().length\n      ) {\n        stream.getVideoTracks()[0].onended = this.stopScreenShare;\n        this.screenShareStream = stream;\n        this.socket.emit('CMD:joinScreenShare', { file: true });\n        this.setState({ isScreenSharing: true, isScreenSharingFile: true });\n        stream.onaddtrack = undefined;\n      }\n    };\n  };\n\n  setupScreenShare = async () => {\n    //@ts-ignore\n    if (navigator.mediaDevices.getDisplayMedia) {\n      const stream = await navigator.mediaDevices.getDisplayMedia({\n        //@ts-ignore\n        video: { height: 720, logicalSurface: true },\n        audio: {\n          autoGainControl: false,\n          channelCount: 2,\n          echoCancellation: false,\n          latency: 0,\n          noiseSuppression: false,\n          sampleRate: 48000,\n          sampleSize: 16,\n        },\n      });\n      stream.getVideoTracks()[0].onended = this.stopScreenShare;\n      this.screenShareStream = stream;\n      this.socket.emit('CMD:joinScreenShare');\n      this.setState({ isScreenSharing: true });\n    }\n  };\n\n  stopScreenShare = async () => {\n    this.screenShareStream &&\n      this.screenShareStream.getTracks().forEach((track) => {\n        track.stop();\n      });\n    this.screenShareStream = undefined;\n    if (this.screenSharePC) {\n      this.screenSharePC.close();\n      this.screenSharePC = undefined;\n    }\n    Object.values(this.screenHostPC).forEach((pc) => {\n      pc.close();\n    });\n    this.screenHostPC = {};\n    if (this.state.isScreenSharing) {\n      this.socket.emit('CMD:leaveScreenShare');\n    }\n    this.setState({ isScreenSharing: false, isScreenSharingFile: false });\n  };\n\n  updateScreenShare = async () => {\n    if (!this.isScreenShare() && !this.isFileShare()) {\n      return;\n    }\n    // TODO teardown for those who leave\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (sharer && sharer.id === this.socket.id) {\n      // We're the sharer, create a connection to each other member\n      this.state.participants.forEach((user) => {\n        const id = user.id;\n        if (id === this.socket.id && this.state.isScreenSharingFile) {\n          // Don't set up a connection to ourselves if sharing file\n          return;\n        }\n        if (!this.screenHostPC[id]) {\n          // Set up the RTCPeerConnection for sharing media to each member\n          const pc = new RTCPeerConnection({ iceServers: iceServers() });\n          this.screenHostPC[id] = pc;\n          this.screenShareStream?.getTracks().forEach((track) => {\n            if (this.screenShareStream != null) {\n              pc.addTrack(track, this.screenShareStream);\n            }\n          });\n          pc.onicecandidate = (event) => {\n            // We generated an ICE candidate, send it to peer\n            if (event.candidate) {\n              this.sendSignalSS(id, { ice: event.candidate }, true);\n            }\n          };\n          pc.onnegotiationneeded = async () => {\n            // Start connection for peer's video\n            const offer = await pc.createOffer();\n            await pc.setLocalDescription(offer);\n            this.sendSignalSS(id, { sdp: pc.localDescription }, true);\n          };\n        }\n      });\n    }\n    // We're a watcher, establish connection to sharer\n    // If screensharing, sharer also does this\n    // If filesharing, sharer does not do this since we use leftVideo\n    if (sharer && !this.screenSharePC && !this.state.isScreenSharingFile) {\n      const pc = new RTCPeerConnection({ iceServers: iceServers() });\n      this.screenSharePC = pc;\n      pc.onicecandidate = (event) => {\n        // We generated an ICE candidate, send it to peer\n        if (event.candidate) {\n          this.sendSignalSS(sharer.id, { ice: event.candidate });\n        }\n      };\n      pc.ontrack = (event: RTCTrackEvent) => {\n        // Mount the stream from peer\n        // console.log(stream);\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        if (leftVideo) {\n          leftVideo.src = '';\n          leftVideo.srcObject = event.streams[0];\n          this.doPlay();\n        }\n      };\n    }\n  };\n\n  startVBrowser = async (rcToken: string, options: { size: string }) => {\n    // user.uid is the public user identifier\n    // user.getIdToken() is the secret access token we can send to the server to prove identity\n    const user = this.props.user;\n    const uid = user?.uid;\n    const token = await user?.getIdToken();\n    this.socket.emit('CMD:startVBrowser', { options, uid, token, rcToken });\n  };\n\n  stopVBrowser = async () => {\n    this.socket.emit('CMD:stopVBrowser');\n  };\n\n  changeController = async (_e: any, data: DropdownProps) => {\n    // console.log(data);\n    this.socket.emit('CMD:changeController', data.value);\n  };\n\n  setSubtitle = async () => {\n    const files = await openFileSelector('.srt');\n    if (!files) {\n      return;\n    }\n    const file = files[0];\n    const reader = new FileReader();\n    reader.addEventListener('load', (event) => {\n      const subData = event.target?.result;\n      this.socket.emit('CMD:subtitle', subData);\n    });\n    reader.readAsText(file);\n  };\n\n  sendSignalSS = async (to: string, data: any, sharer?: boolean) => {\n    // console.log('sendSS', to, data);\n    this.socket.emit('signalSS', { to, msg: data, sharer });\n  };\n\n  isYouTube = () => {\n    return getMediaType(this.state.currentMedia) === 'youtube';\n  };\n\n  isVideo = () => {\n    return getMediaType(this.state.currentMedia) === 'video';\n  };\n\n  isScreenShare = () => {\n    return this.state.currentMedia.startsWith('screenshare://');\n  };\n\n  isFileShare = () => {\n    return this.state.currentMedia.startsWith('fileshare://');\n  };\n\n  isVBrowser = () => {\n    return this.state.currentMedia.startsWith('vbrowser://');\n  };\n\n  isHttp = () => {\n    return this.state.currentMedia.startsWith('http');\n  };\n\n  getVBrowserPass = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[0];\n  };\n\n  getVBrowserHost = () => {\n    return this.state.currentMedia.replace('vbrowser://', '').split('@')[1];\n  };\n\n  getCurrentTime = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.currentTime;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getCurrentTime();\n    }\n  };\n\n  getDuration = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.duration;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.getDuration();\n    }\n    return 0;\n  };\n\n  isPauseDisabled = () => {\n    return this.isScreenShare() || this.isVBrowser();\n  };\n\n  isPaused = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.paused || leftVideo.ended;\n    }\n    if (this.isYouTube()) {\n      return (\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.PAUSED ||\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState?.ENDED\n      );\n    }\n    return false;\n  };\n\n  isMuted = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo?.muted;\n    }\n    if (this.isYouTube()) {\n      return this.watchPartyYTPlayer?.isMuted();\n    }\n    return false;\n  };\n\n  isSubtitled = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return (\n        leftVideo.textTracks[0] && leftVideo.textTracks[0].mode === 'showing'\n      );\n    }\n    if (this.isYouTube()) {\n      try {\n        const current = this.watchPartyYTPlayer?.getOption('captions', 'track');\n        return Boolean(current && current.languageCode);\n      } catch (e) {\n        console.warn(e);\n        return false;\n      }\n    }\n    return false;\n  };\n\n  jumpToLeader = () => {\n    // Jump to the leader's position\n    const maxTS = this.getLeaderTime();\n    if (maxTS > 0) {\n      console.log('jump to leader at ', maxTS);\n      this.doSeek(maxTS);\n    }\n  };\n\n  doSrc = async (src: string, time: number) => {\n    console.log('doSrc', src, time);\n    if (this.isScreenShare() || this.isFileShare() || this.isVBrowser()) {\n      // No-op as we'll set video when WebRTC completes\n      return;\n    }\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.srcObject = null;\n        leftVideo.src = src;\n        leftVideo.currentTime = time;\n        // Clear subtitles\n        leftVideo.innerHTML = '';\n      }\n    }\n    if (this.isYouTube()) {\n      let url = new window.URL(src);\n      // Standard link https://www.youtube.com/watch?v=ID\n      let videoId = querystring.parse(url.search.substring(1))['v'];\n      // Link shortener https://youtu.be/ID\n      let altVideoId = src.split('/').slice(-1)[0];\n      this.watchPartyYTPlayer?.cueVideoById(videoId || altVideoId, time);\n    }\n  };\n\n  doPlay = async () => {\n    const canAutoplay = this.state.isAutoPlayable || (await testAutoplay());\n    this.setState(\n      { currentMediaPaused: false, isAutoPlayable: canAutoplay },\n      async () => {\n        if (this.isVideo()) {\n          const leftVideo = document.getElementById(\n            'leftVideo'\n          ) as HTMLMediaElement;\n          //check for HLS\n          let lv = leftVideo?.src.split('.');\n          if (\n            lv[lv.length - 1] === 'm3u8' &&\n            !leftVideo?.canPlayType('application/vnd.apple.mpegurl')\n          ) {\n            let hls = new window.Hls();\n            hls.loadSource(leftVideo.src);\n            hls.attachMedia(leftVideo);\n          }\n          try {\n            if (this.state.isAutoPlayable) {\n              this.setMute(false);\n            } else {\n              this.setMute(true);\n            }\n            await leftVideo?.play();\n          } catch (e: any) {\n            console.warn(e);\n            if (e.name === 'NotSupportedError') {\n              this.setState({ loading: false, nonPlayableMedia: true });\n            }\n          }\n        }\n        if (this.isYouTube()) {\n          setTimeout(() => {\n            console.log('play yt');\n            this.watchPartyYTPlayer?.playVideo();\n          },\n          100);\n        }\n      }\n    );\n  };\n\n  doPause = () => {\n    this.setState({ currentMediaPaused: true }, async () => {\n      if (this.isVideo()) {\n        const leftVideo = document.getElementById(\n          'leftVideo'\n        ) as HTMLMediaElement;\n        leftVideo.pause();\n      }\n      if (this.isYouTube()) {\n        console.log('pause');\n        this.watchPartyYTPlayer?.pauseVideo();\n      }\n    });\n  };\n\n  doSeek = (time: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.currentTime = time;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.seekTo(time, true);\n    }\n  };\n\n  togglePlay = () => {\n    if (this.isPauseDisabled()) {\n      return;\n    }\n    let shouldPlay = true;\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      shouldPlay = leftVideo.paused || leftVideo.ended;\n    } else if (this.isYouTube()) {\n      shouldPlay =\n        this.watchPartyYTPlayer?.getPlayerState() ===\n          window.YT?.PlayerState.PAUSED ||\n        this.getCurrentTime() === this.getDuration();\n    }\n    if (shouldPlay) {\n      this.socket.emit('CMD:play');\n      this.doPlay();\n    } else {\n      this.socket.emit('CMD:pause');\n      this.doPause();\n    }\n  };\n\n  onSeek = (e: any, time: number) => {\n    let target = time;\n    if (e) {\n      const rect = e.target.getBoundingClientRect();\n      const x = e.clientX - rect.left;\n      const max = rect.width;\n      target = (x / max) * this.getDuration();\n    }\n    target = Math.max(target, 0);\n    this.doSeek(target);\n    this.socket.emit('CMD:seek', target);\n  };\n\n  onFullScreenChange = () => {\n    this.setState({ fullScreen: Boolean(document.fullscreenElement) });\n  };\n\n  onKeydown = (e: any) => {\n    if (!document.activeElement || document.activeElement.tagName === 'BODY') {\n      if (e.key === ' ') {\n        e.preventDefault();\n        this.togglePlay();\n      } else if (e.key === 'ArrowRight') {\n        this.onSeek(null, this.getCurrentTime() + 10);\n      } else if (e.key === 'ArrowLeft') {\n        this.onSeek(null, this.getCurrentTime() - 10);\n      } else if (e.key === 'c') {\n        this.toggleSubtitle();\n      } else if (e.key === 't') {\n        this.fullScreen(false);\n      } else if (e.key === 'f') {\n        this.fullScreen(true);\n      } else if (e.key === 'm') {\n        this.toggleMute();\n      }\n    }\n  };\n\n  fullScreen = async (bVideoOnly: boolean) => {\n    let container = document.getElementById(\n      'fullScreenContainer'\n    ) as HTMLElement;\n    if (bVideoOnly || isMobile()) {\n      if (this.isVBrowser() && !isMobile()) {\n        // Can't really control the VBrowser on mobile anyway, so just fullscreen the video\n        // https://github.com/howardchung/watchparty/issues/208\n        container = document.getElementById('leftVideoParent') as HTMLElement;\n      } else {\n        container = document.getElementById(\n          this.isYouTube() ? 'leftYt' : 'leftVideo'\n        ) as HTMLElement;\n      }\n    }\n    if (\n      !container.requestFullscreen &&\n      (container as any).webkitEnterFullScreen\n    ) {\n      // e.g. iPhone doesn't allow requestFullscreen\n      (container as any).webkitEnterFullscreen();\n      return;\n    }\n    if (!document.fullscreenElement) {\n      await container.requestFullscreen();\n      return;\n    }\n    const bChangeElements = document.fullscreenElement !== container;\n    await document.exitFullscreen();\n    if (bChangeElements) {\n      await container.requestFullscreen();\n    }\n  };\n\n  toggleMute = () => {\n    this.setMute(!this.isMuted());\n  };\n\n  setMute = (muted: boolean) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (leftVideo) {\n        leftVideo.muted = muted;\n      }\n      const audio = document.getElementById('iPhoneAudio') as HTMLAudioElement;\n      if (audio) {\n        audio.muted = muted;\n      }\n    }\n    if (this.isYouTube()) {\n      if (muted) {\n        this.watchPartyYTPlayer?.mute();\n      } else {\n        this.watchPartyYTPlayer?.unMute();\n      }\n    }\n  };\n\n  setVolume = (volume: number) => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      leftVideo.volume = volume;\n    }\n    if (this.isYouTube()) {\n      this.watchPartyYTPlayer?.setVolume(volume * 100);\n    }\n  };\n\n  getVolume = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      return leftVideo.volume;\n    }\n    if (this.isYouTube()) {\n      const volume = this.watchPartyYTPlayer?.getVolume();\n      return volume / 100;\n    }\n  };\n\n  loadSubtitles = async () => {\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    // Clear subtitles\n    leftVideo.innerHTML = '';\n    let subtitleSrc = '';\n    const src = this.state.currentMedia;\n    if (this.state.currentSubtitle) {\n      subtitleSrc = this.state.currentSubtitle;\n    } else if (src.includes('/stream?torrent=magnet')) {\n      subtitleSrc = src.replace('/stream', '/subtitles2');\n    } else if (src.startsWith('http')) {\n      const subtitlePath = src.slice(0, src.lastIndexOf('/') + 1);\n      // Expect subtitle name to be file name + .srt\n      subtitleSrc =\n        subtitlePath + 'subtitles/' + this.getFileName(src) + '.srt';\n    }\n    if (subtitleSrc) {\n      const response = await window.fetch(subtitleSrc);\n      const buffer = await response.arrayBuffer();\n      const url = await toWebVTT(new Blob([buffer]));\n      const track = document.createElement('track');\n      track.kind = 'captions';\n      track.label = 'English';\n      track.srclang = 'en';\n      track.src = url;\n      leftVideo.appendChild(track);\n      leftVideo.textTracks[0].mode = 'showing';\n    }\n  };\n\n  syncSubtitle = () => {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    if (!sharer || sharer.id === this.socket.id) {\n      return;\n    }\n    // When sharing, our timestamp doesn't match the subtitles so adjust them\n    // For each cue, subtract the videoTS of the sharer, then add our own\n    const leftVideo = document.getElementById('leftVideo') as HTMLMediaElement;\n    const track = leftVideo?.textTracks[0];\n    let offset = leftVideo.currentTime - this.state.tsMap[sharer.id];\n    if (track && track.cues && offset) {\n      for (let i = 0; i < track.cues.length; i++) {\n        let cue = track?.cues?.[i];\n        if (!cue) {\n          continue;\n        }\n        // console.log(cue.text, offset, (cue as any).origStart, (cue as any).origEnd);\n        if (!(cue as any).origStart) {\n          (cue as any).origStart = cue.startTime;\n          (cue as any).origEnd = cue.endTime;\n        }\n        cue.startTime = (cue as any).origStart + offset;\n        cue.endTime = (cue as any).origEnd + offset;\n      }\n    }\n  };\n\n  toggleSubtitle = () => {\n    if (this.isVideo()) {\n      const leftVideo = document.getElementById(\n        'leftVideo'\n      ) as HTMLMediaElement;\n      if (this.isSubtitled()) {\n        leftVideo.innerHTML = '';\n      } else {\n        this.loadSubtitles();\n      }\n    }\n    if (this.isYouTube()) {\n      const isSubtitled = this.isSubtitled();\n      // console.log(isSubtitled);\n      if (isSubtitled) {\n        // BUG this doesn't actually set the value so subtitles can't be toggled off\n        this.watchPartyYTPlayer?.setOption('captions', 'track', {});\n      } else {\n        this.watchPartyYTPlayer?.setOption('captions', 'reload', true);\n        const tracks = this.watchPartyYTPlayer?.getOption(\n          'captions',\n          'tracklist'\n        );\n        this.watchPartyYTPlayer?.setOption('captions', 'track', tracks?.[0]);\n      }\n    }\n  };\n\n  setMedia = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:host', data.value);\n  };\n\n  playlistAdd = (_e: any, data: DropdownProps) => {\n    this.socket.emit('CMD:playlistAdd', data.value);\n  };\n\n  playlistMove = (index: number, toIndex: number) => {\n    this.socket.emit('CMD:playlistMove', { index, toIndex });\n  };\n\n  playlistDelete = (index: number) => {\n    this.socket.emit('CMD:playlistDelete', index);\n  };\n\n  launchMultiSelect = (data: any) => {\n    this.setState({ multiStreamSelection: data });\n  };\n\n  resetMultiSelect = () => {\n    this.setState({ multiStreamSelection: undefined });\n  };\n\n  updateName = (_e: any, data: { value: string }) => {\n    this.setState({ myName: data.value });\n    this.socket.emit('CMD:name', data.value);\n    window.localStorage.setItem('watchparty-username', data.value);\n  };\n\n  updatePicture = (url: string) => {\n    this.setState({ myPicture: url });\n    this.socket.emit('CMD:picture', url);\n  };\n\n  updateUid = async (user: firebase.User) => {\n    const uid = user.uid;\n    const token = await user.getIdToken();\n    this.socket.emit('CMD:uid', { uid, token });\n  };\n\n  getMediaDisplayName = (input: string) => {\n    if (!input) {\n      return '';\n    }\n    // Show the whole URL for youtube\n    if (getMediaType(input) === 'youtube') {\n      return input;\n    }\n    if (input.startsWith('screenshare://')) {\n      let id = input.slice('screenshare://'.length);\n      return this.state.nameMap[id] + \"'s screen\";\n    }\n    if (input.startsWith('fileshare://')) {\n      let id = input.slice('fileshare://'.length);\n      return this.state.nameMap[id] + \"'s file\";\n    }\n    if (input.startsWith('vbrowser://')) {\n      return 'Virtual Browser' + (this.state.isVBrowserLarge ? '+' : '');\n    }\n    if (input.includes('/stream?torrent=magnet')) {\n      const search = new URL(input).search;\n      const magnetUrl = querystring.parse(search.substring(1))\n        .torrent as string;\n      const magnetParsed = magnet.decode(magnetUrl);\n      return magnetParsed.name;\n    }\n    // Get the filename out of the URL\n    return input;\n  };\n\n  getFileName = (input: string) => {\n    return input.split('/').slice(-1)[0];\n  };\n\n  setLoadingFalse = () => {\n    this.setState({ loading: false });\n  };\n\n  setRoomLock = async (locked: boolean) => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:lock', { uid, token, locked });\n  };\n\n  haveLock = () => {\n    if (!this.state.roomLock) {\n      return true;\n    }\n    return this.props.user?.uid === this.state.roomLock;\n  };\n\n  setIsChatDisabled = (val: boolean) => this.setState({ isChatDisabled: val });\n\n  clearChat = async () => {\n    const uid = this.props.user?.uid;\n    const token = await this.props.user?.getIdToken();\n    this.socket.emit('CMD:clearchat', { uid, token });\n  };\n\n  getLeaderTime = () => {\n    return calculateMedian(Object.values(this.state.tsMap));\n  };\n\n  onVideoEnded = () => {\n    this.socket.emit('CMD:playlistNext', this.state.currentMedia);\n    // Play next\n    if (this.state.currentMedia?.includes('/stream?torrent=magnet')) {\n      const url = new URL(this.state.currentMedia);\n      const fileIndex = url.searchParams.get('fileIndex');\n      if (fileIndex != null) {\n        url.searchParams.set('fileIndex', (Number(fileIndex) + 1).toString());\n        this.setMedia(null, { value: url.toString() });\n      }\n    }\n  };\n\n  render() {\n    const sharer = this.state.participants.find((p) => p.isScreenShare);\n    const controls = (\n      <Controls\n        key={this.state.controlsTimestamp}\n        togglePlay={this.togglePlay}\n        onSeek={this.onSeek}\n        fullScreen={this.fullScreen}\n        toggleMute={this.toggleMute}\n        toggleSubtitle={this.toggleSubtitle}\n        setVolume={this.setVolume}\n        getVolume={this.getVolume}\n        jumpToLeader={this.jumpToLeader}\n        paused={this.isPaused()}\n        muted={this.isMuted()}\n        subtitled={this.isSubtitled()}\n        currentTime={this.getCurrentTime()}\n        duration={this.getDuration()}\n        disabled={!this.haveLock()}\n        leaderTime={this.isHttp() ? this.getLeaderTime() : undefined}\n        isPauseDisabled={this.isPauseDisabled()}\n      />\n    );\n    const subscribeButton = (\n      <SubscribeButton\n        user={this.props.user}\n        isSubscriber={this.props.isSubscriber}\n        isCustomer={this.props.isCustomer}\n      />\n    );\n    const displayRightContent =\n      this.state.showRightBar || this.state.fullScreen;\n    const rightBar = (\n      <Grid.Column\n        width={displayRightContent ? 4 : 1}\n        style={{ display: 'flex', flexDirection: 'column' }}\n        className={`${\n          this.state.fullScreen\n            ? 'fullHeightColumnFullscreen'\n            : 'fullHeightColumn'\n        }`}\n      >\n        <Input\n          inverted\n          fluid\n          label={'My name is:'}\n          value={this.state.myName}\n          onChange={this.updateName}\n          style={{ visibility: displayRightContent ? '' : 'hidden' }}\n          icon={\n            <Icon\n              onClick={() => this.updateName(null, { value: generateName() })}\n              name=\"refresh\"\n              inverted\n              circular\n              link\n            />\n          }\n        />\n        {\n          <Menu\n            inverted\n            widths={3}\n            style={{\n              marginTop: '4px',\n              marginBottom: '4px',\n              visibility: displayRightContent ? '' : 'hidden',\n            }}\n          >\n            <Menu.Item\n              name=\"chat\"\n              active={this.state.currentTab === 'chat'}\n              onClick={() => this.setState({ currentTab: 'chat' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"conversation\" /> */}\n              Chat\n            </Menu.Item>\n            <Menu.Item\n              name=\"people\"\n              active={this.state.currentTab === 'people'}\n              onClick={() => this.setState({ currentTab: 'people' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"group\" /> */}\n              People ({this.state.participants.length})\n            </Menu.Item>\n            <Menu.Item\n              name=\"settings\"\n              active={this.state.currentTab === 'settings'}\n              onClick={() => this.setState({ currentTab: 'settings' })}\n              as=\"a\"\n            >\n              {/* <Icon name=\"setting\" /> */}\n              Settings\n            </Menu.Item>\n          </Menu>\n        }\n        <Chat\n          chat={this.state.chat}\n          nameMap={this.state.nameMap}\n          pictureMap={this.state.pictureMap}\n          socket={this.socket}\n          scrollTimestamp={this.state.scrollTimestamp}\n          getMediaDisplayName={this.getMediaDisplayName}\n          hide={this.state.currentTab !== 'chat' || !displayRightContent}\n          isChatDisabled={this.state.isChatDisabled}\n          owner={this.state.owner}\n          user={this.props.user}\n        />\n        {this.state.state === 'connected' && (\n          <VideoChat\n            socket={this.socket}\n            participants={this.state.participants}\n            nameMap={this.state.nameMap}\n            pictureMap={this.state.pictureMap}\n            tsMap={this.state.tsMap}\n            rosterUpdateTS={this.state.rosterUpdateTS}\n            hide={this.state.currentTab !== 'people' || !displayRightContent}\n            owner={this.state.owner}\n            user={this.props.user}\n          />\n        )}\n        <SettingsTab\n          hide={this.state.currentTab !== 'settings' || !displayRightContent}\n          user={this.props.user}\n          roomLock={this.state.roomLock}\n          setRoomLock={this.setRoomLock}\n          socket={this.socket}\n          isSubscriber={this.props.isSubscriber}\n          roomId={this.state.roomId}\n          isChatDisabled={this.state.isChatDisabled}\n          setIsChatDisabled={this.setIsChatDisabled}\n          owner={this.state.owner}\n          setOwner={this.setOwner}\n          vanity={this.state.vanity}\n          setVanity={this.setVanity}\n          roomLink={this.state.roomLink}\n          password={this.state.password}\n          setPassword={this.setPassword}\n          clearChat={this.clearChat}\n        />\n      </Grid.Column>\n    );\n    return (\n      <React.Fragment>\n        {!this.state.isAutoPlayable && (\n          <Modal inverted basic open>\n            <div style={{ display: 'flex', justifyContent: 'center' }}>\n              <Button\n                primary\n                size=\"large\"\n                onClick={() => {\n                  this.setState({ isAutoPlayable: true });\n                  this.setMute(false);\n                }}\n                icon\n                labelPosition=\"left\"\n              >\n                <Icon name=\"volume up\" />\n                Click to unmute\n              </Button>\n            </div>\n          </Modal>\n        )}\n        {this.state.multiStreamSelection && (\n          <MultiStreamModal\n            streams={this.state.multiStreamSelection}\n            setMedia={this.setMedia}\n            resetMultiSelect={this.resetMultiSelect}\n          />\n        )}\n        {this.state.isVBrowserModalOpen && (\n          <VBrowserModal\n            isSubscriber={this.props.isSubscriber}\n            subscribeButton={subscribeButton}\n            closeModal={() => this.setState({ isVBrowserModalOpen: false })}\n            startVBrowser={this.startVBrowser}\n            user={this.props.user}\n          />\n        )}\n        {this.state.isScreenShareModalOpen && (\n          <ScreenShareModal\n            closeModal={() => this.setState({ isScreenShareModalOpen: false })}\n            startScreenShare={this.setupScreenShare}\n          />\n        )}\n        {this.state.isFileShareModalOpen && (\n          <FileShareModal\n            closeModal={() => this.setState({ isFileShareModalOpen: false })}\n            startFileShare={this.setupFileShare}\n          />\n        )}\n        {this.state.error && <ErrorModal error={this.state.error} />}\n        {this.state.isErrorAuth && (\n          <PasswordModal\n            savedPasswords={this.state.savedPasswords}\n            roomId={this.state.roomId}\n          />\n        )}\n        {this.state.errorMessage && (\n          <Message\n            negative\n            header=\"Error\"\n            content={this.state.errorMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        {this.state.successMessage && (\n          <Message\n            positive\n            header=\"Success\"\n            content={this.state.successMessage}\n            style={{\n              position: 'fixed',\n              bottom: '10px',\n              right: '10px',\n              zIndex: 1000,\n            }}\n          ></Message>\n        )}\n        <TopBar\n          user={this.props.user}\n          isCustomer={this.props.isCustomer}\n          isSubscriber={this.props.isSubscriber}\n        />\n        {\n          <Grid stackable celled=\"internally\">\n            <Grid.Row>\n              <Grid.Column\n                width={this.state.showRightBar ? 12 : 15}\n                className=\"fullHeightColumn\"\n              >\n                <div\n                  style={{\n                    display: 'flex',\n                    flexDirection: 'column',\n                    height: '100%',\n                  }}\n                >\n                  <ComboBox\n                    setMedia={this.setMedia}\n                    playlistAdd={this.playlistAdd}\n                    playlistDelete={this.playlistDelete}\n                    playlistMove={this.playlistMove}\n                    currentMedia={this.state.currentMedia}\n                    getMediaDisplayName={this.getMediaDisplayName}\n                    launchMultiSelect={this.launchMultiSelect}\n                    streamPath={this.state.settings.streamPath}\n                    mediaPath={this.state.settings.mediaPath}\n                    disabled={!this.haveLock()}\n                    playlist={this.state.playlist}\n                  />\n                  <Separator />\n                  <div\n                    className=\"mobileStack\"\n                    style={{ display: 'flex', gap: '4px' }}\n                  >\n                    {this.screenShareStream && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        onClick={this.stopScreenShare}\n                        disabled={sharer?.id !== this.socket?.id}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop Share\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content={`Share a tab or an application. Make sure to check \"Share audio\" for best results.`}\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color={'instagram'}\n                            onClick={() => {\n                              this.setState({ isScreenShareModalOpen: true });\n                            }}\n                          >\n                            <Icon name={'slideshare'} />\n                            Screenshare\n                          </Button>\n                        }\n                      />\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Launch a shared virtual browser\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            color=\"green\"\n                            onClick={() => {\n                              this.setState({ isVBrowserModalOpen: true });\n                            }}\n                          >\n                            <Icon name=\"desktop\" />\n                            VBrowser\n                          </Button>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Popup\n                        content=\"Choose the person controlling the VBrowser\"\n                        trigger={\n                          <Dropdown\n                            icon=\"keyboard\"\n                            labeled\n                            className=\"icon\"\n                            style={{ height: '36px' }}\n                            button\n                            value={this.state.controller}\n                            placeholder=\"No controller\"\n                            clearable\n                            onChange={this.changeController}\n                            selection\n                            disabled={!this.haveLock()}\n                            options={this.state.participants.map((p) => ({\n                              text: this.state.nameMap[p.id] || p.id,\n                              value: p.id,\n                            }))}\n                          ></Dropdown>\n                        }\n                      />\n                    )}\n                    {this.isVBrowser() && (\n                      <Dropdown\n                        icon=\"desktop\"\n                        labeled\n                        className=\"icon\"\n                        style={{ height: '36px' }}\n                        button\n                        disabled={!this.haveLock()}\n                        value={this.state.vBrowserResolution}\n                        onChange={(_e, data) =>\n                          this.setState({\n                            vBrowserResolution: data.value as string,\n                          })\n                        }\n                        selection\n                        options={[\n                          {\n                            text: '1080p (WatchParty Plus)',\n                            value: '1920x1080@30',\n                            disabled: !this.state.isVBrowserLarge,\n                          },\n                          {\n                            text: '720p',\n                            value: '1280x720@30',\n                          },\n                          {\n                            text: '576p',\n                            value: '1024x576@60',\n                          },\n                          {\n                            text: '486p',\n                            value: '864x486@60',\n                          },\n                          {\n                            text: '360p',\n                            value: '640x360@60',\n                          },\n                        ]}\n                      ></Dropdown>\n                    )}\n                    {this.isVBrowser() && (\n                      <Button\n                        fluid\n                        className=\"toolButton\"\n                        icon\n                        labelPosition=\"left\"\n                        color=\"red\"\n                        disabled={!this.haveLock()}\n                        onClick={this.stopVBrowser}\n                      >\n                        <Icon name=\"cancel\" />\n                        Stop VBrowser\n                      </Button>\n                    )}\n                    {!this.screenShareStream && !sharer && !this.isVBrowser() && (\n                      <Popup\n                        content=\"Stream your own video file\"\n                        trigger={\n                          <Button\n                            fluid\n                            className=\"toolButton\"\n                            disabled={!this.haveLock()}\n                            icon\n                            labelPosition=\"left\"\n                            onClick={() => {\n                              this.setState({ isFileShareModalOpen: true });\n                            }}\n                          >\n                            <Icon name=\"file\" />\n                            File\n                          </Button>\n                        }\n                      />\n                    )}\n                    {false && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'youtube'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.mediaPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'media'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {Boolean(this.state.settings.streamPath) && (\n                      <SearchComponent\n                        setMedia={this.setMedia}\n                        playlistAdd={this.playlistAdd}\n                        type={'stream'}\n                        streamPath={this.state.settings.streamPath}\n                        mediaPath={this.state.settings.mediaPath}\n                        launchMultiSelect={this.launchMultiSelect}\n                        disabled={!this.haveLock()}\n                      />\n                    )}\n                    {this.state.currentMedia &&\n                      !this.isScreenShare() &&\n                      !this.isVBrowser() &&\n                      !this.isYouTube() && (\n                        <Popup\n                          content=\"Upload a .srt subtitle file for this video\"\n                          trigger={\n                            <Button\n                              fluid\n                              color=\"violet\"\n                              className=\"toolButton\"\n                              icon\n                              labelPosition=\"left\"\n                              onClick={this.setSubtitle}\n                              disabled={!this.haveLock()}\n                            >\n                              <Icon name=\"closed captioning\" />\n                              Subtitle\n                            </Button>\n                          }\n                        />\n                      )}\n                  </div>\n                  <Separator />\n                  <div\n                    id=\"fullScreenContainer\"\n                    className={\n                      this.state.fullScreen ? 'fullScreenContainer' : ''\n                    }\n                    style={{ flexGrow: 1 }}\n                  >\n                    <div id=\"playerContainer\">\n                      {(this.state.loading ||\n                        !this.state.currentMedia ||\n                        this.state.nonPlayableMedia) && (\n                        <div\n                          id=\"loader\"\n                          className=\"videoContent\"\n                          style={{\n                            display: 'flex',\n                            alignItems: 'center',\n                            justifyContent: 'center',\n                          }}\n                        >\n                          {this.state.loading && (\n                            <Dimmer active>\n                              <Loader>\n                                {this.isVBrowser()\n                                  ? 'Launching virtual browser. This can take up to a minute.'\n                                  : ''}\n                              </Loader>\n                            </Dimmer>\n                          )}\n                          {!this.state.loading && !this.state.currentMedia && (\n                            <Message\n                              color=\"yellow\"\n                              icon=\"hand point up\"\n                              header=\"You're not watching anything!\"\n                              content=\"Pick something to watch above.\"\n                            />\n                          )}\n                          {!this.state.loading &&\n                            this.state.nonPlayableMedia && (\n                              <Message\n                                color=\"red\"\n                                icon=\"frown\"\n                                header=\"It doesn't look like this is a media file!\"\n                                content=\"Maybe you meant to launch a VBrowser if you're trying to visit a web page?\"\n                              />\n                            )}\n                        </div>\n                      )}\n                      <iframe\n                        style={{\n                          display:\n                            this.isYouTube() && !this.state.loading\n                              ? 'block'\n                              : 'none',\n                        }}\n                        title=\"YouTube\"\n                        id=\"leftYt\"\n                        className=\"videoContent\"\n                        allowFullScreen\n                        frameBorder=\"0\"\n                        allow=\"autoplay\"\n                        src=\"https://www.youtube.com/embed/?enablejsapi=1&controls=0&rel=0\"\n                      />\n                      {this.isVBrowser() &&\n                      this.getVBrowserPass() &&\n                      this.getVBrowserHost() ? (\n                        <VBrowser\n                          username={this.socket.id}\n                          password={this.getVBrowserPass()}\n                          hostname={this.getVBrowserHost()}\n                          controlling={this.state.controller === this.socket.id}\n                          setLoadingFalse={this.setLoadingFalse}\n                          resolution={this.state.vBrowserResolution}\n                          doPlay={this.doPlay}\n                          setResolution={(data: string) =>\n                            this.setState({ vBrowserResolution: data })\n                          }\n                        />\n                      ) : (\n                        <video\n                          style={{\n                            display:\n                              (this.isVideo() && !this.state.loading) ||\n                              this.state.fullScreen\n                                ? 'block'\n                                : 'none',\n                            width: '100%',\n                          }}\n                          id=\"leftVideo\"\n                          onEnded={this.onVideoEnded}\n                          playsInline\n                        ></video>\n                      )}\n                      {this.state.fullScreen && this.state.currentMedia && (\n                        <div className=\"controlsContainer\">{controls}</div>\n                      )}\n                    </div>\n                    {this.state.fullScreen && (\n                      <div className=\"fullScreenChat\">{rightBar}</div>\n                    )}\n                  </div>\n                  {this.state.currentMedia && controls}\n                  {Boolean(this.state.total) && (\n                    <div>\n                      <Progress\n                        size=\"tiny\"\n                        color=\"green\"\n                        inverted\n                        value={this.state.downloaded}\n                        total={this.state.total}\n                        // indicating\n                        label={\n                          Math.min(\n                            (this.state.downloaded / this.state.total) * 100,\n                            100\n                          ).toFixed(2) +\n                          '% - ' +\n                          formatSpeed(this.state.speed) +\n                          ' - ' +\n                          this.state.connections +\n                          ' connections'\n                        }\n                      ></Progress>\n                    </div>\n                  )}\n                </div>\n                <Button\n                  style={{\n                    position: 'absolute',\n                    top: '50%',\n                    right: 'calc(0% - 18px)',\n                    zIndex: 900,\n                  }}\n                  circular\n                  size=\"mini\"\n                  icon={this.state.showRightBar ? 'angle right' : 'angle left'}\n                  onClick={() =>\n                    this.setState({ showRightBar: !this.state.showRightBar })\n                  }\n                />\n              </Grid.Column>\n              {rightBar}\n            </Grid.Row>\n          </Grid>\n        }\n      </React.Fragment>\n    );\n  }\n}\n\nexport const Separator = () => <div style={{ height: '4px', flexShrink: 0 }} />;\n","import React from 'react';\nimport { Divider, Header, Icon, Step } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\n\nimport { NewRoomButton } from '../TopBar';\nimport styles from './Home.module.css';\n\nexport const Home = ({ user }: { user: firebase.User | undefined }) => {\n  return (\n    <div>\n      <div className={styles.container}>\n        <Hero\n          heroText={'Watch videos in-sync with friends far away.'}\n          subText={'No registration or download required.'}\n          action={\n            <div style={{ marginTop: '8px', width: '160px' }}>\n              <NewRoomButton user={user} />\n            </div>\n          }\n          image={'/screenshot4.png'}\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"film\" />\n            Multiple ways to watch\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"slideshare\"\n            title={`Screensharing`}\n            text=\"Share a browser tab or an application.\"\n          />\n          <Feature\n            icon=\"desktop\"\n            title={`VBrowser`}\n            text=\"Launch a virtual browser in the cloud that all room members can view and control. No need to worry about slow upload speeds!\"\n          />\n          <Feature\n            icon=\"file\"\n            title={`File`}\n            text=\"Upload and stream your own file.\"\n          />\n          <Feature\n            icon=\"linkify\"\n            title={`URL`}\n            text=\"Paste in a URL for everyone to watch from.\"\n          />\n          <Feature\n            icon=\"youtube\"\n            title={`YouTube`}\n            text=\"Watch videos in-sync from YouTube.\"\n          />\n        </div>\n        <Hero\n          heroText={'React to moments together.'}\n          subText={\"Find moments of shared joy even when you're apart.\"}\n          image={'/screenshot18.png'}\n          color=\"green\"\n        />\n        <Divider horizontal>\n          <Header inverted as=\"h4\">\n            <Icon name=\"cogs\" />\n            Features\n          </Header>\n        </Divider>\n        <div className={styles.featureSection}>\n          <Feature\n            icon=\"sync\"\n            title=\"Synchronized\"\n            text=\"Starts, stops, and seeks are synchronized to everyone, so take those restroom and snack breaks without worrying about falling behind.\"\n          />\n          <Feature\n            icon=\"conversation\"\n            title=\"Chat\"\n            text=\"Chat with others in your room. Memes and inside jokes encouraged.\"\n          />\n          <Feature\n            icon=\"video\"\n            title=\"Video chat\"\n            text=\"Jump into video chat if there's something that you just can't express with text.\"\n          />\n        </div>\n        <Hero\n          heroText={'Theater mode.'}\n          subText={\n            'Bring video and chat front-and-center for minimal distractions.'\n          }\n          image={'/screenshot14.png'}\n        />\n        <Divider horizontal />\n        <div\n          style={{\n            padding: '30px',\n            display: 'flex',\n            flexDirection: 'column',\n            alignItems: 'center',\n          }}\n        >\n          <div className={styles.heroText}>Get started!</div>\n          <div className={styles.featureSection}>\n            <Step.Group style={{ margin: '8px' }}>\n              <Step>\n                <Icon name=\"certificate\" />\n                <Step.Content>\n                  <Step.Title>1.</Step.Title>\n                  <Step.Description>Make a room</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"group\" />\n                <Step.Content>\n                  <Step.Title>2.</Step.Title>\n                  <Step.Description>Share link with friends</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"film\" />\n                <Step.Content>\n                  <Step.Title>3.</Step.Title>\n                  <Step.Description>Pick something to watch</Step.Description>\n                </Step.Content>\n              </Step>\n\n              <Step>\n                <Icon name=\"thumbs up outline\" />\n                <Step.Content>\n                  <Step.Title>4.</Step.Title>\n                  <Step.Description>Success!</Step.Description>\n                </Step.Content>\n              </Step>\n            </Step.Group>\n          </div>\n          <div style={{ width: '160px' }}>\n            <NewRoomButton user={user} />\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nconst Feature = ({\n  icon,\n  text,\n  title,\n}: {\n  icon: string;\n  text: string;\n  title: string;\n}) => {\n  return (\n    <div\n      style={{\n        display: 'flex',\n        flex: '1 1 0px',\n        flexDirection: 'column',\n        alignItems: 'center',\n        padding: '10px',\n        minWidth: '180px',\n      }}\n    >\n      <Icon fitted size=\"huge\" name={icon as any} />\n      <h4 className={styles.featureTitle}>{title}</h4>\n      <div className={styles.featureText}>{text}</div>\n    </div>\n  );\n};\n\nconst Hero = ({\n  heroText,\n  subText,\n  action,\n  image,\n  color,\n}: {\n  heroText?: string;\n  subText?: string;\n  action?: React.ReactNode;\n  image?: string;\n  color?: string;\n}) => {\n  return (\n    <div className={`${styles.hero} ${color === 'green' ? styles.green : ''}`}>\n      <div className={styles.heroInner}>\n        <div style={{ padding: '30px', flex: '1 1 0' }}>\n          <div className={styles.heroText}>{heroText}</div>\n          <div className={styles.subText}>{subText}</div>\n          {action}\n        </div>\n        <div\n          style={{\n            flex: '1 1 0',\n          }}\n        >\n          <img\n            alt=\"hero\"\n            style={{ width: '100%', borderRadius: '10px' }}\n            src={image}\n          />\n        </div>\n      </div>\n    </div>\n  );\n};\n","import React from 'react';\nimport ReactMarkdown from 'react-markdown';\n\nconst mdStyle = { color: 'white', margin: '50px', maxWidth: '800px' };\n\nexport const Privacy = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nPrivacy Policy\n====\n\nRooms\n----\n- By default, rooms are temporary and expire after one day of inactivity.\n- Users have the option of making a room permanent, which can be undone at any time.\n- We do not keep logs of the content that users watch.\n\nPersonal Information\n----\n- You are not required to register to use the service, but you have the option to sign in with an email or authentication provider, which will be used to display your name and picture in the rooms you join.\n- If you provide this information, we may use it to contact you regarding your use of the service, or to link your account to a subscription.\n- We do not sell personal information to third parties.\n- You have the right to request deletion of your user data, in accordance with various laws governing data protection. Please contact support@watchparty.me to request user data deletion.\n- Payment information is handled by providers such as Stripe. We do not collect or access financial information directly.\n\nCookies\n----\n- We use services such as Google Analytics to measure usage. These services may set cookies or other information locally on your device.\n\nVirtual Browsers\n----\n- Virtual machines are recycled after each session ends and any data on them is destroyed.\n- Your commands are encrypted while in-transit to the virtual machine.\n\nYouTube\n----\n- The service provides the ability to search and play YouTube videos. Google/YouTube may use data provided to the search service in accordance with the [Google Privacy Policy](https://policies.google.com/privacy).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const Terms = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nTerms of Service\n====\nBy using this service you agree to the following terms:\n- You are over 13 years of age\n- Your use of the service may be terminated if you are found to be sharing illegal or infringing content\n- The service provides no guarantee of uptime or availability\n- You use the service at your own risk of encountering objectionable content, as we do not actively moderate rooms unless content is found to be illegal or infringing\n\nSubscriptions\n----\n- If you are dissatisfied with the service for any reason or believe you have been charged in error, please contact support@watchparty.me.\n- We will provide a full refund of the most recent payment, no questions asked.\n\nYouTube\n----\nThe service provides the ability to search and play YouTube videos. By using the YouTube search you agree to the [YouTube Terms of Service](https://www.youtube.com/t/terms).\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n\nexport const FAQ = () => {\n  return (\n    <div style={mdStyle}>\n      <ReactMarkdown>\n        {`\nFAQ\n====\nWhat's a VBrowser?\n----\nA virtual browser (VBrowser) is a browser running in the cloud that a room's members can connect to. Everyone in the room sees the same thing, so it's a great way to watch videos or collaborate on tasks together.\n\nWhy did my VBrowser session stop?\n----\nVBrowsers will terminate automatically if no one is in the room for a while.\nVBrowser sessions are also limited to a maximum of 3 hours for free users, and 24 hours for subscribers.\n\nDoes everyone in the room need to be a subscriber to get the benefits?\n----\nNo, only the person who created the VBrowser needs to be.\n\nHow do I access sites that have a \"not available\" message in the VBrowser?\n----\nSome sites may block traffic that's detected as coming from certain geographic regions. You may need to install an extension like Hola VPN inside the virtual browser.\n\nHow come I'm not getting any audio when screensharing?\n----\nTo share audio, you must be using Chrome or Edge, sharing a tab (not application), and check a small checkbox at the bottom-left of the share screen dialog.\n\nIs there a limit to how many people can be in a room?\n----\nCurrently there isn't a hard limit, although the service hasn't been tested with more than 15 people or so. Screensharing and filesharing rely on one person uploading to everyone else, so it may not work well with large room sizes.\n`}\n      </ReactMarkdown>\n    </div>\n  );\n};\n","import React from 'react';\nimport { Link } from 'react-router-dom';\n\nexport const Footer = () => (\n  <div style={{ margin: '1em', fontSize: '14px', color: 'white' }}>\n    <Link style={{ color: 'white' }} to=\"/terms\">\n      Terms\n    </Link>\n    {' · '}\n    <Link style={{ color: 'white' }} to=\"/privacy\">\n      Privacy\n    </Link>\n    {' · '}\n    <Link style={{ color: 'white' }} to=\"/faq\">\n      FAQ\n    </Link>\n  </div>\n);\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then((registration) => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch((error) => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then((response) => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then((registration) => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then((registration) => {\n        registration.unregister();\n      })\n      .catch((error) => {\n        console.error(error.message);\n      });\n  }\n}\n","import './index.css';\nimport 'semantic-ui-css/semantic.min.css';\n\nimport React, { lazy, Suspense } from 'react';\nimport ReactDOM from 'react-dom';\nimport { BrowserRouter, Route } from 'react-router-dom';\n\nimport App from './components/App';\nimport { Home } from './components/Home';\nimport { Privacy, Terms, FAQ } from './components/PrivacyTerms/PrivacyTerms';\nimport { TopBar } from './components/TopBar/TopBar';\nimport { Footer } from './components/Footer/Footer';\nimport * as serviceWorker from './serviceWorker';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/auth';\nimport { serverPath } from './utils';\n\nconst Debug = lazy(() => import('./components/Debug/Debug'));\n\nconst firebaseConfig = process.env.REACT_APP_FIREBASE_CONFIG;\nif (firebaseConfig) {\n  firebase.initializeApp(JSON.parse(firebaseConfig));\n}\n\nclass WatchParty extends React.Component {\n  public state = {\n    user: undefined as firebase.User | undefined,\n    isSubscriber: false,\n    isCustomer: false,\n  };\n  async componentDidMount() {\n    if (firebaseConfig) {\n      firebase.auth().onAuthStateChanged(async (user: firebase.User | null) => {\n        if (user) {\n          // console.log(user);\n          this.setState({ user });\n          const token = await user.getIdToken();\n          const response = await window.fetch(\n            serverPath + `/metadata?uid=${user.uid}&token=${token}`\n          );\n          const data = await response.json();\n          this.setState({\n            isSubscriber: data.isSubscriber,\n            isCustomer: data.isCustomer,\n          });\n        }\n      });\n    }\n  }\n  render() {\n    return (\n      <React.StrictMode>\n        <BrowserRouter>\n          <Route\n            path=\"/\"\n            exact\n            render={(props) => {\n              if (props.location?.hash) {\n                return (\n                  <App\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                  />\n                );\n              }\n              return (\n                <React.Fragment>\n                  <TopBar\n                    user={this.state.user}\n                    isSubscriber={this.state.isSubscriber}\n                    isCustomer={this.state.isCustomer}\n                    hideNewRoom\n                  />\n                  <Home user={this.state.user} />\n                  <Footer />\n                </React.Fragment>\n              );\n            }}\n          />\n          <Route\n            path=\"/r/:vanity\"\n            exact\n            render={(props) => {\n              return (\n                <App\n                  user={this.state.user}\n                  isSubscriber={this.state.isSubscriber}\n                  isCustomer={this.state.isCustomer}\n                  vanity={props.match.params.vanity}\n                />\n              );\n            }}\n          />\n          <Route path=\"/terms\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Terms />\n            <Footer />\n          </Route>\n          <Route path=\"/privacy\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Privacy />\n            <Footer />\n          </Route>\n          <Route path=\"/faq\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <FAQ />\n            <Footer />\n          </Route>\n          <Route path=\"/debug\">\n            <TopBar\n              user={this.state.user}\n              isSubscriber={this.state.isSubscriber}\n              isCustomer={this.state.isCustomer}\n            />\n            <Suspense fallback={null}>\n              <Debug />\n            </Suspense>\n            <Footer />\n          </Route>\n        </BrowserRouter>\n      </React.StrictMode>\n    );\n  }\n}\nReactDOM.render(<WatchParty />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Home_container__1ukFy\",\"hero\":\"Home_hero__1zBE5\",\"green\":\"Home_green__3PMJt\",\"heroInner\":\"Home_heroInner__3w7l9\",\"heroText\":\"Home_heroText__21xIv\",\"subText\":\"Home_subText__363Kx\",\"featureSection\":\"Home_featureSection__1E5B_\",\"featureTitle\":\"Home_featureTitle__37GMX\",\"featureText\":\"Home_featureText__2VOwD\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"Card\":\"ChatVideoCard_Card__38w-I\",\"Wrapper\":\"ChatVideoCard_Wrapper__3cH2f\",\"ThumbnailWrapper\":\"ChatVideoCard_ThumbnailWrapper__hBV8X\",\"Thumbnail\":\"ChatVideoCard_Thumbnail__1J61h\",\"Content\":\"ChatVideoCard_Content__1q2Wx\",\"Title\":\"ChatVideoCard_Title__2XtVu\",\"ChannelName\":\"ChatVideoCard_ChannelName__3RX-r\",\"DurationLabel\":\"ChatVideoCard_DurationLabel__2dPHz\",\"Controls\":\"ChatVideoCard_Controls__3AJAK\"};"],"sourceRoot":""}