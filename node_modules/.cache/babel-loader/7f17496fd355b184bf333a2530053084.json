{"ast":null,"code":"import _regeneratorRuntime from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/runner/work/watchparty/watchparty/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React from'react';import{Modal,Button,Form,Message}from'semantic-ui-react';import firebase from'firebase/compat/app';import'firebase/compat/auth';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var LoginModal=/*#__PURE__*/function(_React$Component){_inherits(LoginModal,_React$Component);var _super=_createSuper(LoginModal);function LoginModal(){var _this;_classCallCheck(this,LoginModal);for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key];}_this=_super.call.apply(_super,[this].concat(args));_this.state={email:'',password:'',isCreateMode:false,error:''};_this.resetPassword=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return firebase.auth().sendPasswordResetEmail(_this.state.email);case 3:_this.props.closeLogin();_context.next=9;break;case 6:_context.prev=6;_context.t0=_context[\"catch\"](0);// handle exceptions\n_this.setState({error:_context.t0.message});case 9:case\"end\":return _context.stop();}}},_callee,null,[[0,6]]);}));_this.emailSignIn=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email,password){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return firebase.auth().signInWithEmailAndPassword(email,password);case 3:_this.props.closeLogin();_context2.next=9;break;case 6:_context2.prev=6;_context2.t0=_context2[\"catch\"](0);// handle exceptions\n_this.setState({error:_context2.t0.message});case 9:case\"end\":return _context2.stop();}}},_callee2,null,[[0,6]]);}));return function(_x,_x2){return _ref2.apply(this,arguments);};}();_this.createAccount=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(email,password){return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return firebase.auth().createUserWithEmailAndPassword(email,password);case 3:_context3.next=8;break;case 5:_context3.prev=5;_context3.t0=_context3[\"catch\"](0);// handle exceptions\n_this.setState({error:_context3.t0.message});case 8:case\"end\":return _context3.stop();}}},_callee3,null,[[0,5]]);}));return function(_x3,_x4){return _ref3.apply(this,arguments);};}();_this.emailLinkSignIn=/*#__PURE__*/_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee4(){return _regeneratorRuntime.wrap(function _callee4$(_context4){while(1){switch(_context4.prev=_context4.next){case 0:_context4.next=2;return firebase.auth().sendSignInLinkToEmail(_this.state.email,{url:window.location.href,handleCodeInApp:true});case 2:case\"end\":return _context4.stop();}}},_callee4);}));return _this;}_createClass(LoginModal,[{key:\"render\",value:function render(){var _this2=this;var closeLogin=this.props.closeLogin;return/*#__PURE__*/_jsxs(Modal,{open:true,onClose:closeLogin,children:[/*#__PURE__*/_jsx(Modal.Header,{children:this.state.isCreateMode?'Create an account':'Login'}),/*#__PURE__*/_jsxs(Modal.Content,{children:[this.state.error&&/*#__PURE__*/_jsx(Message,{color:\"red\",header:\"Error\",content:this.state.error}),/*#__PURE__*/_jsxs(Form,{children:[/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{placeholder:\"Email\",value:this.state.email,onChange:function onChange(e){return _this2.setState({email:e.target.value});}})]}),/*#__PURE__*/_jsxs(Form.Field,{children:[/*#__PURE__*/_jsx(\"label\",{children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",placeholder:\"Password\",value:this.state.password,onChange:function onChange(e){return _this2.setState({password:e.target.value});}})]}),!this.state.isCreateMode&&/*#__PURE__*/_jsxs(\"div\",{children:[\"Don't have an account?\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"linkButton\",onClick:function onClick(){return _this2.setState({isCreateMode:true});},children:\"Create one.\"}),' ',\"Forgot your password? Enter your email and\",' ',/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"linkButton\",onClick:this.resetPassword,children:\"reset it.\"})]}),this.state.isCreateMode?/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:function onClick(){return _this2.createAccount(_this2.state.email,_this2.state.password);},children:\"Create\"}):/*#__PURE__*/_jsx(Button,{type:\"submit\",onClick:function onClick(){return _this2.emailSignIn(_this2.state.email,_this2.state.password);},children:\"Login\"})]})]})]});}}]);return LoginModal;}(React.Component);","map":{"version":3,"sources":["/home/runner/work/watchparty/watchparty/src/components/Modal/LoginModal.tsx"],"names":["React","Modal","Button","Form","Message","firebase","LoginModal","state","email","password","isCreateMode","error","resetPassword","auth","sendPasswordResetEmail","props","closeLogin","setState","message","emailSignIn","signInWithEmailAndPassword","createAccount","createUserWithEmailAndPassword","emailLinkSignIn","sendSignInLinkToEmail","url","window","location","href","handleCodeInApp","e","target","value","Component"],"mappings":"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","sourcesContent":["import React from 'react';\nimport { Modal, Button, Form, Message } from 'semantic-ui-react';\nimport firebase from 'firebase/compat/app';\nimport 'firebase/compat/auth';\n\nexport class LoginModal extends React.Component<{\n  closeLogin: Function;\n}> {\n  public state = { email: '', password: '', isCreateMode: false, error: '' };\n\n  resetPassword = async () => {\n    try {\n      await firebase.auth().sendPasswordResetEmail(this.state.email);\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailSignIn = async (email: string, password: string) => {\n    try {\n      await firebase.auth().signInWithEmailAndPassword(email, password);\n\n      this.props.closeLogin();\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  createAccount = async (email: string, password: string) => {\n    try {\n      await firebase.auth().createUserWithEmailAndPassword(email, password);\n    } catch (e: any) {\n      // handle exceptions\n      this.setState({ error: e.message });\n    }\n  };\n\n  emailLinkSignIn = async () => {\n    await firebase.auth().sendSignInLinkToEmail(this.state.email, {\n      url: window.location.href,\n      handleCodeInApp: true,\n    });\n  };\n\n  render() {\n    const { closeLogin } = this.props;\n    return (\n      <Modal open={true} onClose={closeLogin as any}>\n        <Modal.Header>\n          {this.state.isCreateMode ? 'Create an account' : 'Login'}\n        </Modal.Header>\n        <Modal.Content>\n          {this.state.error && (\n            <Message color=\"red\" header=\"Error\" content={this.state.error} />\n          )}\n          <Form>\n            <Form.Field>\n              <label>Email</label>\n              <input\n                placeholder=\"Email\"\n                value={this.state.email}\n                onChange={(e) => this.setState({ email: e.target.value })}\n              />\n            </Form.Field>\n            <Form.Field>\n              <label>Password</label>\n              <input\n                type=\"password\"\n                placeholder=\"Password\"\n                value={this.state.password}\n                onChange={(e) => this.setState({ password: e.target.value })}\n              />\n            </Form.Field>\n            {!this.state.isCreateMode && (\n              <div>\n                Don't have an account?{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={() => this.setState({ isCreateMode: true })}\n                >\n                  Create one.\n                </button>{' '}\n                Forgot your password? Enter your email and{' '}\n                <button\n                  type=\"button\"\n                  className=\"linkButton\"\n                  onClick={this.resetPassword}\n                >\n                  reset it.\n                </button>\n              </div>\n            )}\n            {this.state.isCreateMode ? (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.createAccount(this.state.email, this.state.password)\n                }\n              >\n                Create\n              </Button>\n            ) : (\n              <Button\n                type=\"submit\"\n                onClick={() =>\n                  this.emailSignIn(this.state.email, this.state.password)\n                }\n              >\n                Login\n              </Button>\n            )}\n          </Form>\n        </Modal.Content>\n      </Modal>\n    );\n  }\n}\n"]},"metadata":{},"sourceType":"module"}